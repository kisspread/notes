{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About","text":"<p>Hey traveler!</p> <p>I mainly share various problems encountered in the development and learning process of the game Unreal Engine 5. Feel free to discuss!</p> <p>My English isn't very good, I'm still learning, please bear with me.\ud83d\ude01</p> <p>Basic: Covers more basic content, like notes. The palest ink is better than the best memory.</p> <p>GAS: Gameplay Abilities System. I'll be documenting the solutions I understand while learning GAS.</p> <p>PCG: I really enjoy Procedural Content Generation (PCG). I love using code to magically build game worlds. Let's exchange ideas!</p> <p>UI:  UI solutions Notes.</p> <p></p>"},{"location":"Basic/00/","title":"FYI","text":"<p>The palest ink is better than the best memory</p> <p>base \u77e5\u8bc6\u70b9\uff0c\u8bb0\u5f55\u4e3a\u4e3b\u3002</p>"},{"location":"Basic/00/#unreal-project","title":"Unreal Project","text":"<ul> <li> <p>MaxQ A spaceflight Toolkit for Unreal Engine 5 </p> </li> <li> <p>KittensMaze A source code of \"Kittens' Maze\", a free to play game developed in Unreal Engine 4</p> </li> <li> <p>OnAllFronts-Public Mass Entity (ECS) framework Demo</p> </li> <li> <p>ParagonUIPrototyping Paragon UI Prototyping using UE4.11 UMG</p> </li> <li> <p>ActionRPG_UE53 Action RPG sample project upgraded to the latest Unreal Engine 5.3</p> </li> </ul>"},{"location":"Basic/00/#unreal-tools","title":"Unreal Tools","text":"<ul> <li>Tools Collection</li> </ul>"},{"location":"Basic/00/#website","title":"website","text":"<ul> <li>shadertoy https://www.shadertoy.com/</li> <li>shadertoy \u89e3\u8bfb https://zhuanlan.zhihu.com/p/542447481</li> <li>\u5927\u948a\u865a\u5e7b\u6574\u4f53\u67b6\u6784\u89e3\u8bfb https://www.zhihu.com/column/insideue4</li> </ul>"},{"location":"Basic/Material/","title":"Material","text":"<p>Here are several ways to draw circles in the material function:</p>"},{"location":"Basic/Material/#coordinate-system","title":"Coordinate System","text":"<p>Choose your coordinate system based on preference.</p>"},{"location":"Basic/Material/#simple-coordinate-system","title":"Simple Coordinate System","text":"<p>Simple and easy to use, with few nodes. The point (-1, -1) is in the top right corner, which may feel counterintuitive at first compared to what's shown in textbooks, but you'll get used to it. </p>"},{"location":"Basic/Material/#standard-coordinate-system","title":"Standard Coordinate System","text":"<p>The standard coordinate system involves two additional steps: rotation and swapping the XY axes. Although it requires two more instructions, a good coordinate system aids in understanding. </p>"},{"location":"Basic/Material/#drawing-circles","title":"Drawing Circles","text":""},{"location":"Basic/Material/#lerp-one","title":"Lerp One","text":"<p>Interpolate between 0 and -1 based on the distance field as a ratio. </p>"},{"location":"Basic/Material/#subtract-and-multiply","title":"Subtract and Multiply","text":"<p>Values below 0.8 are negative, resulting in a fully black circle. Multiplication is used to control the edges, making them sharper as the value increases. </p>"},{"location":"Basic/Material/#radialgradientexponential","title":"RadialGradientExponential","text":"<p>This built-in function is not recommended for drawing regular circles as it involves a relatively high computational load. While the previous methods required 47 instructions, this one needs 51. It can generate a cotton candy-like circle. </p> <p>The internal implementation is complex, and unless you specifically need this effect, it's not necessary to use it. </p>"},{"location":"Basic/Material/#spheregradient","title":"SphereGradient","text":"<p>The built-in function SphereGradient creates a circular gradient similar to the image below. It uses the circle equation to achieve a smooth transition effect. It is still not recommended for drawing standard circles. </p>"},{"location":"Basic/Material/#smoothstep","title":"smoothstep","text":"<p>Highly recommended for drawing the simplest circles. When max equals min, there's no need to handle gradient values, and the output values range purely from 0 to 1. It's worth mentioning that if you swap min and max, it will reverse. For consistent direction, it's better to use 1-x. </p>"},{"location":"Basic/Material/#drawing-rings","title":"Drawing Rings","text":"<p>Based on the above methods, drawing a large circle first and then a smaller one can create rings.</p>"},{"location":"Basic/Material/#multiplication","title":"Multiplication","text":"<p>Two circles, one positive and one negative. The overlapping area is positive, and rounding up the product. </p>"},{"location":"Basic/Material/#dot-product","title":"Dot Product","text":"<p>Dot product of two circles ranges from -1 to 1. The more similar the overlapping parts, the closer to 1. </p>"},{"location":"Basic/Material/#subtraction","title":"Subtraction","text":"<p>Using smoothstep produces pure 0s and 1s, which is excellent. </p>"},{"location":"Basic/Material/#animation","title":"Animation","text":"<p>Here, the animation is driven by periodic time. </p> <p>The range of atan2 is \\(\\left[ -\\pi, \\pi \\right]\\). Dividing by 2\u03c0 and using frac for decimal values is explained here:</p> <ul> <li>Dividing by 2\u03c0 narrows the range to \\(\\left[ -0.5, 0.5 \\right]\\).</li> <li>frac handles negative numbers by using 1-x. For example, for -0.4, the decimal part is 0.4, and 1-0.4=0.6.</li> <li>As the frac operation continues to increase, it reaches 1, allowing a complete rotation.</li> </ul>"},{"location":"Basic/Material/#simple-combination","title":"Simple Combination","text":""},{"location":"Basic/Math/","title":"Math In Game","text":""},{"location":"Basic/Math/#matrix","title":"Matrix","text":"<p> - \u8981\u80fd\u76f8\u4e58\uff0cN\u8981\u76f8\u540c\uff0c\u7136\u540e\u7ed3\u679c \u628aN\u770b\u51fa\u6d88\u6389\u4e86\u5373\u53ef - \u8ba1\u7b97\u7ed3\u679c\uff0c\u52a0\u5165\u662f\u7b2ci\u884c\uff0c\u7b2cj\u5217\uff0c\u90a3\u4e48\u5c31\u53bbA\u627e\u7b2ci\u884c\u7684\u5168\u90e8\u5143\u7d20\uff0c\u548cB\u7b2cJ\u5217\u7684\u5168\u90e8\u5143\u7d20\uff0c\u70b9\u79ef\u5373\u53ef\u3002</p>"},{"location":"Basic/Math/#_1","title":"\u70b9\u79ef \u548c \u4ea4\u79ef","text":"<ul> <li>\u70b9\u79ef \u5224\u65ad\u76f8\u4f3c\u5ea6\uff0c\u8ba1\u7b97\u89d2\u5ea6</li> <li>\u53c9\u79ef \u5224\u65ad\u5de6\u53f3\uff0c\u5224\u65ad\u70b9\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\u90e8 \u6839\u636eA x B = -B X A, \u4e00\u65e6\u6709\u4e00\u6761\u8fb9\u7b26\u53f7\u4e0d\u5bf9\uff0c\u65e2\u8bf4\u660e\u5728 \u70b9\u4e0d\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002</li> </ul>"},{"location":"Basic/Math/#_2","title":"\u9f50\u6b21\u5750\u6807","text":"<p>\u7f29\u653e\u548c\u65cb\u8f6c\u90fd\u80fd\u75282x2\u77e9\u9635\u4e58\u6cd5\u6765\u53d8\u5316\uff0c\u552f\u72ec\u5e73\u79fb\u3002\u57282\u7ef4\u4e0a\uff0c \u9f50\u6b21\u5750\u6807\u662f\u4e3a\u4e86\u89e3\u51b3 \u5e73\u79fb\u65e0\u6cd5\u5199\u6210\u77e9\u9635\u4e58\u6cd5\u7684\u5f62\u5f0f\u6784\u5efa\u51fa\u6765\u76843x3\u77e9\u9635\uff0c\u540c\u65f6\u8ba9\u8ba9\u529f\u80fd\u591a\u6837\u5316\u3002</p> <ul> <li> <p>\u5e73\u79fb    $$    T(tx, ty) = \\begin{pmatrix}    1 &amp; 0 &amp; tx \\    0 &amp; 1 &amp; ty \\    0 &amp; 0 &amp; 1    \\end{pmatrix}   $$</p> </li> <li> <p>\u7f29\u653e   $$    S(sx, sy) = \\begin{pmatrix}    sx &amp; 0 &amp; 0 \\    0 &amp; sy &amp; 0 \\    0 &amp; 0 &amp; 1    \\end{pmatrix}   $$</p> </li> <li> <p>\u65cb\u8f6c    $$    R(\\theta) = \\begin{pmatrix}    \\cos\\theta &amp; -\\sin\\theta &amp; 0 \\    \\sin\\theta &amp; \\cos\\theta &amp; 0 \\    0 &amp; 0 &amp; 1    \\end{pmatrix}    $$</p> </li> <li> <p>\u6cbf\\(x\\)\u8f74\u65b9\u5411\u7684\u526a\u5207\uff1a      $$      Sh_x(sh_x) = \\begin{pmatrix}      1 &amp; sh_x &amp; 0 \\      0 &amp; 1 &amp; 0 \\      0 &amp; 0 &amp; 1      \\end{pmatrix}      $$      \u5176\u4e2d\uff0c\\(sh_x\\)\u662f\u6cbf\\(x\\)\u8f74\u65b9\u5411\u7684\u526a\u5207\u56e0\u5b50\u3002</p> </li> <li> <p>\u6cbf\\(y\\)\u8f74\u65b9\u5411\u7684\u526a\u5207\uff1a      $$      Sh_y(sh_y) = \\begin{pmatrix}      1 &amp; 0 &amp; 0 \\      sh_y &amp; 1 &amp; 0 \\      0 &amp; 0 &amp; 1      \\end{pmatrix}      $$</p> </li> </ul>"},{"location":"Basic/Math/#_3","title":"\u7ed3\u5408\u5f8b","text":"<p>\u77e9\u9635\u4e58\u6cd5\u4e0d\u53ef\u4ee5\u8fdb\u884c\u4ea4\u6362\u5f8b\uff0c\u4f46\u6709\u7ed3\u5408\u5f8b</p> \\[ M = T(tx, ty) \\cdot R(\\theta) \\] <p>\u8ba1\u7b97\u8fd9\u4e2a\u4e58\u79ef\uff1a</p> \\[ M = \\begin{pmatrix} 1 &amp; 0 &amp; tx \\\\ 0 &amp; 1 &amp; ty \\\\ 0 &amp; 0 &amp; 1 \\end{pmatrix} \\cdot \\begin{pmatrix} \\cos\\theta &amp; -\\sin\\theta &amp; 0 \\\\ \\sin\\theta &amp; \\cos\\theta &amp; 0 \\\\ 0 &amp; 0 &amp; 1 \\end{pmatrix} \\] <p>\u8fdb\u884c\u77e9\u9635\u4e58\u6cd5\uff1a</p> \\[ M = \\begin{pmatrix} 1 \\cdot \\cos\\theta + 0 \\cdot \\sin\\theta + tx \\cdot 0 &amp; 1 \\cdot -\\sin\\theta + 0 \\cdot \\cos\\theta + tx \\cdot 0 &amp; 1 \\cdot 0 + 0 \\cdot 0 + tx \\cdot 1 \\\\ 0 \\cdot \\cos\\theta + 1 \\cdot \\sin\\theta + ty \\cdot 0 &amp; 0 \\cdot -\\sin\\theta + 1 \\cdot \\cos\\theta + ty \\cdot 0 &amp; 0 \\cdot 0 + 1 \\cdot 0 + ty \\cdot 1 \\\\ 0 \\cdot \\cos\\theta + 0 \\cdot \\sin\\theta + 1 \\cdot 0 &amp; 0 \\cdot -\\sin\\theta + 0 \\cdot \\cos\\theta + 1 \\cdot 0 &amp; 0 \\cdot 0 + 0 \\cdot 0 + 1 \\cdot 1 \\end{pmatrix} \\] <p>\u7b80\u5316\u7ed3\u679c\uff1a</p> \\[ M = \\begin{pmatrix} \\cos\\theta &amp; -\\sin\\theta &amp; tx \\\\ \\sin\\theta &amp; \\cos\\theta &amp; ty \\\\ 0 &amp; 0 &amp; 1 \\end{pmatrix} \\] <p>\u56e0\u6b64\uff0c\u590d\u5408\u53d8\u6362\u77e9\u9635 \\(M\\) \u5c31\u662f\uff1a</p> \\[ M = \\begin{pmatrix} \\cos\\theta &amp; -\\sin\\theta &amp; tx \\\\ \\sin\\theta &amp; \\cos\\theta &amp; ty \\\\ 0 &amp; 0 &amp; 1 \\end{pmatrix} \\] <p>\u8fd9\u4e2a\u77e9\u9635\u53ef\u4ee5\u7528\u4e8e\u5c06\u4e8c\u7ef4\u70b9\u5148\u65cb\u8f6c \\(\\theta\\) \u89d2\u5ea6\uff0c\u7136\u540e\u5e73\u79fb \\((tx, ty)\\)\u3002</p>"},{"location":"Basic/Math/#monte-carlo-integration","title":"\u8499\u7279\u5361\u6d1b\u79ef\u5206\uff08Monte Carlo Integration\uff09","text":"<p>\u51e0\u4f55\u4e0a\uff0c\u5b9a\u79ef\u5206\u8868\u793a\u7684\u662f\u66f2\u7ebf \\(y = f(x)\\) \u4e0e \\(x\\) \u8f74\u4e4b\u95f4\uff0c\u4ece \\(x = a\\) \u5230 \\(x = b\\) \u7684\u9762\u79ef\uff08\u6709\u6b63\u8d1f\uff09\u3002</p> <p>\u8ba1\u7b97\u51fd\u6570 \\(y = x\\) \u5728\u533a\u95f4 \\([0, 1]\\) \u4e0a\u7684\u5b9a\u79ef\u5206\uff1a</p> <p>$$ I = \\int_{0}^{1} x \\, dx $$ \u5373\u4f7f\u5fd8\u4e86 \u79ef\u5206\u7684\u57fa\u672c\u89c4\u5219\uff0c\u4e5f\u80fd\u56de\u60f3\u8d77\u4e09\u89d2\u5f62\u7684\u9762\u79ef\u516c\u5f0f\u4f5c\u4e3a\u4e92\u8865\u9a8c\u8bc1\u3002\u627e\u51fa\u5b83\u7684\u539f\u51fd\u6570\uff1a $$ \\int x \\, dx = \\frac{x^2}{2} + C $$ \u5c06 \\(x\\) \u4ece \\(0\\) \u79ef\u5206\u5230 \\(1\\)\uff1a</p> <p>$$ I = \\left[ \\frac{x^2}{2} \\right]_{0}^{1} = \\frac{1^2}{2} - \\frac{0^2}{2} = \\frac{1}{2} $$ \u5b9a\u79ef\u5206\u53ef\u4ee5\u7cbe\u51c6\u5730\u7b97\u51fa\u79ef\u5206\u503c\u3002\u800c\u8499\u7279\u5361\u6d1b\u79ef\u5206\u662f\u79bb\u6563\u7684\uff0c\u7b97\u51fa\u7684\u503c\u4e5f\u662f\u5927\u6982\u503c\u3002\u4e0b\u9762\u8bf7GPT\u6765\u89e3\u91ca\uff1a</p>"},{"location":"Basic/Math/#_4","title":"\u6570\u5b66\u80cc\u666f","text":"<p>\u8499\u7279\u5361\u6d1b\u79ef\u5206\u7684\u57fa\u672c\u601d\u60f3\u662f\u901a\u8fc7\u968f\u673a\u91c7\u6837\u6765\u4f30\u8ba1\u79ef\u5206\u503c\u3002\u5047\u8bbe\u6211\u4eec\u8981\u8ba1\u7b97\u4e00\u4e2a\u51fd\u6570 \\(f(x)\\) \u5728\u533a\u95f4 \\([a, b]\\) \u4e0a\u7684\u79ef\u5206\uff1a</p> \\[ I = \\int_{a}^{b} f(x) \\, dx \\] <p>\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u901a\u8fc7\u5728\u533a\u95f4 \\([a, b]\\) \u4e0a\u968f\u673a\u91c7\u6837 \\(N\\) \u4e2a\u70b9 \\(x_i\\)\uff0c\u7136\u540e\u8ba1\u7b97\u8fd9\u4e9b\u70b9\u4e0a\u7684\u51fd\u6570\u503c\u7684\u5e73\u5747\u503c\u6765\u8fd1\u4f3c\u79ef\u5206\uff1a</p> \\[ I \\approx \\frac{b-a}{N} \\sum_{i=1}^{N} f(x_i) \\]"},{"location":"Basic/Math/#_5","title":"\u51e0\u4f55\u89e3\u91ca","text":"<p>\u867d\u7136\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u4f7f\u7528\u79bb\u6563\u7684\u91c7\u6837\u70b9\uff0c\u4f46\u5176\u51e0\u4f55\u89e3\u91ca\u4ecd\u7136\u53ef\u4ee5\u7406\u89e3\u4e3a\u66f2\u7ebf \\(y = f(x)\\) \u4e0e \\(x\\) \u8f74\u4e4b\u95f4\u7684\u9762\u79ef\u3002\u5177\u4f53\u539f\u56e0\u5982\u4e0b\uff1a</p> <ul> <li>\u79bb\u6563\u91c7\u6837\u70b9\u7684\u5e73\u5747\u503c\uff1a\u8fd9\u4e9b\u91c7\u6837\u70b9\u7684\u51fd\u6570\u503c\u5e73\u5747\u503c\u4ee3\u8868\u4e86\u51fd\u6570\u5728\u533a\u95f4 \\([a, b]\\) \u4e0a\u7684\u5e73\u5747\u9ad8\u5ea6\u3002</li> <li>\u4e58\u4ee5\u533a\u95f4\u957f\u5ea6\uff1a\u5c06\u5e73\u5747\u9ad8\u5ea6\u4e58\u4ee5\u533a\u95f4\u957f\u5ea6 \\((b - a)\\)\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u4e2a\u8fd1\u4f3c\u9762\u79ef\u3002</li> </ul>"},{"location":"Basic/Math/#_6","title":"\u793a\u4f8b","text":"<p>\u5047\u8bbe\u6211\u4eec\u8981\u8ba1\u7b97\u51fd\u6570 \\(f(x) = x^2\\) \u5728\u533a\u95f4 \\([0, 1]\\) \u4e0a\u7684\u79ef\u5206\uff1a</p> \\[ I = \\int_{0}^{1} x^2 \\, dx \\] <p>\u4f7f\u7528\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\uff1a</p> <ol> <li>\u5728\u533a\u95f4 \\([0, 1]\\) \u4e0a\u968f\u673a\u91c7\u6837 \\(N\\) \u4e2a\u70b9 \\(x_i\\)\u3002</li> <li>\u8ba1\u7b97\u8fd9\u4e9b\u70b9\u4e0a\u7684\u51fd\u6570\u503c \\(f(x_i) = x_i^2\\)\u3002</li> <li>\u8ba1\u7b97\u8fd9\u4e9b\u51fd\u6570\u503c\u7684\u5e73\u5747\u503c\uff0c\u5e76\u4e58\u4ee5\u533a\u95f4\u957f\u5ea6 \\((1 - 0) = 1\\)\u3002</li> </ol> <p>\u516c\u5f0f\u4e3a\uff1a</p> \\[ I \\approx \\frac{1-0}{N} \\sum_{i=1}^{N} x_i^2 = \\frac{1}{N} \\sum_{i=1}^{N} x_i^2 \\] <p>\u5c3d\u7ba1\u6211\u4eec\u662f\u901a\u8fc7\u79bb\u6563\u7684\u91c7\u6837\u70b9\u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u4f46\u6700\u7ec8\u7ed3\u679c\u4ecd\u7136\u662f\u5bf9\u8fde\u7eed\u51fd\u6570 \\(f(x) = x^2\\) \u5728\u533a\u95f4 \\([0, 1]\\) \u4e0a\u79ef\u5206\u7684\u4e00\u4e2a\u8fd1\u4f3c\u503c\uff0c\u4e5f\u5c31\u662f\u66f2\u7ebf \\(y = x^2\\) \u4e0e \\(x\\) \u8f74\u4e4b\u95f4\u7684\u9762\u79ef\u3002</p>"},{"location":"Basic/Math/#_7","title":"\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u7684\u4f18\u52bf","text":"<p>\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u7684\u4f18\u52bf\u5728\u4e8e\u5b83\u7279\u522b\u9002\u7528\u4e8e\u9ad8\u7ef4\u79ef\u5206\u548c\u590d\u6742\u51fd\u6570\u7684\u79ef\u5206\u8ba1\u7b97\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f20\u7edf\u7684\u6570\u503c\u79ef\u5206\u65b9\u6cd5\uff08\u5982\u68af\u5f62\u6cd5\u3001\u8f9b\u666e\u68ee\u6cd5\uff09\u53ef\u80fd\u4f1a\u7531\u4e8e\u7ef4\u6570\u707e\u96be\u800c\u53d8\u5f97\u4e0d\u53ef\u884c\u3002\u800c\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u4e0e\u7ef4\u6570\u65e0\u5173\uff0c\u53ea\u4f9d\u8d56\u4e8e\u91c7\u6837\u70b9\u7684\u6570\u91cf\uff0c\u56e0\u6b64\u5728\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\u8868\u73b0\u5c24\u4e3a\u51fa\u8272\u3002</p>"},{"location":"Basic/Math/#_8","title":"\u5e94\u7528","text":"<p>\u8499\u7279\u5361\u6d1b\u79ef\u5206\u5728\u5149\u7ebf\u8ffd\u8e2a\uff08Ray Tracing\uff09\u548c\u5168\u5c40\u5149\u7167\uff08Global Illumination\uff09\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002\u901a\u8fc7\u6a21\u62df\u5149\u7ebf\u5728\u573a\u666f\u4e2d\u7684\u4f20\u64ad\u548c\u53cd\u5c04\uff0c\u53ef\u4ee5\u751f\u6210\u9ad8\u5ea6\u903c\u771f\u7684\u56fe\u50cf\u3002\u5177\u4f53\u5e94\u7528\u5305\u62ec\uff1a - \u8def\u5f84\u8ffd\u8e2a\uff08Path Tracing\uff09\uff1a\u7528\u4e8e\u8ba1\u7b97\u5149\u7ebf\u5728\u573a\u666f\u4e2d\u7684\u591a\u6b21\u53cd\u5c04\u548c\u6298\u5c04\u3002 - \u73af\u5883\u5149\u906e\u853d\uff08Ambient Occlusion\uff09\uff1a\u7528\u4e8e\u8ba1\u7b97\u573a\u666f\u4e2d\u5404\u70b9\u7684\u5149\u7167\u906e\u853d\u7a0b\u5ea6\u3002</p> <p>\u5728\u7edf\u8ba1\u5b66\u548c\u6570\u636e\u79d1\u5b66\u4e2d\uff0c\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u7528\u4e8e\u4f30\u8ba1\u590d\u6742\u6982\u7387\u5206\u5e03\u7684\u53c2\u6570\u3002\u4f8b\u5982\uff1a - \u8d1d\u53f6\u65af\u63a8\u65ad\uff1a\u901a\u8fc7\u6a21\u62df\u540e\u9a8c\u5206\u5e03\u6765\u8fdb\u884c\u53c2\u6570\u4f30\u8ba1\u3002 - \u9a6c\u5c14\u53ef\u592b\u94fe\u8499\u7279\u5361\u7f57\uff08MCMC\uff09\uff1a\u7528\u4e8e\u4ece\u590d\u6742\u6982\u7387\u5206\u5e03\u4e2d\u91c7\u6837\u3002</p>"},{"location":"Basic/Using%20Python%20Script%20to%20Place%20StaicMesh%20into%20Level%20Editor/","title":"Python Script in Editor","text":"demo.py<pre><code>import unreal\n\n# Constants\nWALL_MESH_PATH = \"/Game/Assets/Dungeon/SM_Wall_4x2\"\nWALL_SPACING = 800\nWALL_HEIGHT = 220\n\n\ndef create_wall():\n    # Get the editor utility library\n    editor_util = unreal.EditorLevelLibrary\n    # Before creating the wall, delete all the walls\n    world = editor_util.get_editor_world()\n    actors = unreal.GameplayStatics.get_all_actors_of_class(world, unreal.StaticMeshActor.static_class())\n    for actor in actors:\n        if actor.get_actor_label().startswith(\"Wall\"):\n            editor_util.destroy_actor(actor)\n\n    # Define wall segments\n    wall_segments = [\n        {\"start\": unreal.Vector(0, 0, WALL_HEIGHT), \"end\": unreal.Vector(4800, 0, WALL_HEIGHT), \"rotation\": 0, \"label\": \"Wall-Up\"},\n        {\"start\": unreal.Vector(0, -4800, WALL_HEIGHT), \"end\": unreal.Vector(4800, -4800, WALL_HEIGHT), \"rotation\": 0, \"label\": \"Wall-Down\"},\n        {\"start\": unreal.Vector(-900, 200, WALL_HEIGHT), \"end\": unreal.Vector(-900, -3800, WALL_HEIGHT), \"rotation\": -90, \"label\": \"Wall-Left\"},\n        {\"start\": unreal.Vector(4600, 200, WALL_HEIGHT), \"end\": unreal.Vector(4600, -3800, WALL_HEIGHT), \"rotation\": -90, \"label\": \"Wall-Right\"},\n    ]\n    # Create walls\n    for segment in wall_segments:\n        create_wall_segment(editor_util, segment[\"start\"], segment[\"end\"], segment[\"rotation\"], segment[\"label\"])\n\n    # Log a message\n    unreal.log(\"Walls created\")\n\n\ndef create_wall_segment(editor_util, start, end, rotation, label):\n    # Calculate the number of walls needed\n    distance = unreal.Vector.distance(start, end)\n    num_walls = int(distance / WALL_SPACING)\n\n    for i in range(num_walls + 1):\n        direction = unreal.Vector.subtract(end, start).normal()\n        location = start + direction * (i * WALL_SPACING)\n        spawn_wall(editor_util, location, rotation, f\"{label}-{i}\")\n\n\ndef spawn_wall(editor_util, location, rotation, label):\n    actor = editor_util.spawn_actor_from_class(unreal.StaticMeshActor, location)\n    actor.set_actor_rotation(unreal.Rotator(0, 0, rotation), False)\n\n    # Load the static mesh\n    static_mesh = unreal.EditorAssetLibrary.load_asset(WALL_MESH_PATH)\n    static_mesh = unreal.StaticMesh.cast(static_mesh)\n\n    # Set the static mesh\n    static_mesh_component = actor.static_mesh_component\n    static_mesh_component.set_static_mesh(static_mesh)\n\n    # Set the actor's label and folder\n    actor.set_actor_label(label)\n    actor.set_folder_path(unreal.Name(\"/Walls\"))\n\n    # Select the actor\n    actors_to_select = unreal.Array(unreal.Actor)\n    actors_to_select.append(actor)\n    editor_util.set_selected_level_actors(actors_to_select=actors_to_select)\n\n\nif __name__ == \"__main__\":\n    create_wall()    \n</code></pre>"},{"location":"Basic/ffmpeg/","title":"FFmpeg","text":""},{"location":"Basic/ffmpeg/#ffmpeg","title":"FFmpeg","text":"<p>mp4 to webp cli</p>"},{"location":"Basic/ffmpeg/#set-webp-properties-and-convert","title":"Set webp properties and convert","text":"<p>Example command which would convert an mp4 file to a lossless loop playing webp file in 20FPS with resolution 800px(width) * h600px(height):</p> <pre><code>ffmpeg -i input_filename.mp4 -vcodec libwebp -filter:v fps=fps=20 -lossless 1 -loop 0 -preset default -an -vsync 0 -s 800:600 output_filename.webp\n</code></pre> <p>Export an animated lossy WebP with preset mode picture\uff1a </p><pre><code>ffmpeg -i input.mp4 -vcodec libwebp -filter:v fps=fps=20 -lossless 0  -compression_level 3 -q:v 70 -loop 1 -preset picture -an -vsync 0 -s 800:600 output.webp\n</code></pre> Mp4 resize, reduce resolution rate, bit rate, compress audio, and using H.265 <pre><code>ffmpeg -i input.mp4 -vf \"scale=1280:720\" -b:v 1000k -b:a 128k -c:v libx265 -crf 28 output.mp4\n</code></pre> <p>more:   mp4 to webp</p>"},{"location":"Basic/Blueprint/BluePrint/","title":"Blueprint Relevant","text":"<p>\u4e0d\u9650\u4e8e\u84dd\u56fe\uff0cC++\u4e5f\u6709\u3002\u8bb0\u5f55\u4e00\u4e0b</p>"},{"location":"Basic/Blueprint/BluePrint/#_1","title":"\u84dd\u56fe\u9677\u9631","text":""},{"location":"Basic/Blueprint/BluePrint/#event","title":"Event\u7684\u53d8\u91cf\u8986\u76d6","text":"<p>\u5f53\u4e00\u4e2aeventA \u91cc\u9762\u6709\u5ef6\u65f6\u8282\u70b9\u7684\u65f6\u5019\uff0c\u8981\u7279\u522b\u5c0f\u5fc3\u3002\u5982\u679c\u5ef6\u65f6\u8282\u70b9\u8981\u83b7\u53d6eventA \u8bbe\u7f6e\u8fdb\u6765\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u5f88\u53ef\u80fd\u88ab \u591a\u6b21\u8c03\u7528\u7684 eventA \u8986\u76d6\uff0c\u5bfc\u81f4\u5ef6\u65f6\u8282\u70b9\u83b7\u5f97\u7684\u503c\u6c38\u8fdc\u90fd\u662f\u6700\u65b0\u503c\u3002</p> <p> \u591a\u6b21\u8c03\u7528\u65f6\u8fd9\u91ccNew Param \u6c38\u8fdc\u662f\u6700\u65b0\u503c\uff0c\u65e7\u7684\u88ab\u8986\u76d6\uff0c\u5bfc\u81f4\u540e\u7eed\u7684\u8282\u70b9\u83b7\u53d6\u7684\u503c\u51fa\u9519\u3002</p> <p> \u8fd9\u91cc\u4e5f\u662f\u9519\u7684\uff0c\u84dd\u56fe\u4e0d\u662f\u4ee3\u7801\uff0c\u6ca1\u6709\u50cflambda\u90a3\u6837 \u201c\u6355\u83b7\u53d8\u91cf\u201d\uff0c\u8fd9\u91cc\u7684New Param\u4f9d\u65e7\u4f1a\u88ab\u65b0\u6765\u7684\u8986\u76d6\uff0c\u5bf9\u4e60\u60ef\u4ee3\u7801\u7684\u4eba\u6765\u8bf4\u975e\u5e38\u53cd\u76f4\u89c9\u3002\uff08\u8fd9\u91cc\u8fd8\u4f1a\u5bfc\u81f4\u591a\u6b21bind\u7684\u95ee\u9898\uff09</p>"},{"location":"Basic/Blueprint/BluePrint/#actorcomponent","title":"actorcomponent \u65e0\u9650\u9012\u5f52\u5bfc\u81f4\u6808\u6ea2\u51fa","text":"<p>\u4fee\u6539actorcomponent\uff0cHotLoad\u540e\uff0c\u8be6\u60c5\u9762\u677f\u65e0\u6cd5\u67e5\u770b\uff0c\u4e8e\u662f\u6539\u4e2a\u540d\u5b57\uff0c\u91cd\u5199\u7f16\u8bd1\u3002\u6b63\u5e38\u8fdb\u5165\u5f15\u64ce\uff0c\u518d\u6b21\u53bb\u67e5\u770b\u8be5\u7a97\u53e3\uff0c\u7ed3\u679c\u7acb\u5373\u5d29\u6e83\uff0c\u663e\u793a\u6808\u6ea2\u51fa\u3002 \u65e0\u5948\uff0c\u4ecegit\u91cc\u9762\u8fd8\u539f\u8be5\u84dd\u56fe\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u91cd\u65b0\u7f16\u8bd1\uff0c\u6b63\u5e38\u4e86\u3002 \u540e\u6765\uff0c\u7a81\u7136\u53c8\u518d\u6b21\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u8fd9\u6b21\uff0c\u76f4\u63a5\u4fee\u6539\u7236\u7c7b\uff0c\u518d\u91cd\u65b0\u8be5\u56de\u6765\uff0c\u6b63\u5e38\u4e86\u3002\u53ea\u662f\u4e00\u4e9b\u914d\u7f6e\u6570\u636e\u4f1a\u4e22\u5931\u3002</p> <p>\u636e\u8bf4\u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u4fee\u590d\u7c7b\u4f3c\u7684\u95ee\u9898\u3002\u6ca1\u8bd5\u8fc7\uff0c\u4ee5\u540e\u8bd5\u8bd5\u3002 \uff08\u5c45\u7136\u662f\u4e00\u5e74\u591a\u6ca1\u4fee\u590d\u7684bug\uff09 https://github.com/rweber89/BPCorruptionFix</p>"},{"location":"Basic/Blueprint/BluePrint/#meta","title":"Meta\u8bb0\u5f55","text":""},{"location":"Basic/Blueprint/BluePrint/#blueprintinternaluseonly","title":"BlueprintInternalUseOnly","text":"<p><code>meta = (BlueprintInternalUseOnly = \"true\")</code></p> <ol> <li>\u9632\u6b62\u76f4\u63a5\u521b\u5efa\u84dd\u56fe\u8282\u70b9\uff1a<code>BlueprintInternalUseOnly</code> \u6807\u8bb0\u9632\u6b62\u5f15\u64ce\u76f4\u63a5\u4e3a\u8fd9\u4e2a\u51fd\u6570\u521b\u5efa\u84dd\u56fe\u8282\u70b9\uff0c\u56e0\u4e3a\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u53ef\u80fd\u4e0d\u4f1a\u6309\u9884\u671f\u5de5\u4f5c\u3002</li> <li>\u5f02\u6b65\u8282\u70b9\u9700\u6c42\uff1a\u5c3d\u7ba1\u51fd\u6570\u9700\u8981\u88ab\u6807\u8bb0\u4e3a <code>BlueprintCallable</code> \u4ee5\u4fbf\u88ab\u7279\u6b8a\u7684\u5f02\u6b65\u8282\u70b9\u4f7f\u7528\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u5b83\u88ab\u76f4\u63a5\u66b4\u9732\u7ed9\u84dd\u56fe\u7528\u6237\u3002\u8fd9\u4e2a\u6807\u8bb0\u544a\u8bc9\u5f15\u64ce\u8df3\u8fc7\u521b\u5efa\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u7684\u84dd\u56fe\u8282\u70b9\u3002</li> </ol>"},{"location":"Basic/Blueprint/BluePrint/#mustimplement","title":"MustImplement","text":"<p>\u9650\u5236\u5b9e\u73b0\u63a5\u53e3 </p><pre><code>UPROPERTY(EditAnywhere, Category = EntryLayout, meta=(MustImplement = \"/Script/CommonUI.CommonBoundActionButtonInterface\"))\n    TSubclassOf&lt;UCommonButtonBase&gt; ActionButtonClass;\n</code></pre>"},{"location":"Basic/Blueprint/BluePrint/#defaulttoself","title":"DefaultToSelf","text":"<p>\u628aself \u8bbe\u7f6e\u4e3a\u5f53\u524d\u8c03\u7528\u8005 </p><pre><code>    UFUNCTION(BlueprintCallable, Category = \"Ability|Tasks\", meta = (DefaultToSelf = \"TargetActor\", BlueprintInternalUseOnly = \"TRUE\"))\n    static UAbilityAsync_WaitAttributeChanged* WaitForAttributeChanged(AActor* TargetActor, FGameplayAttribute Attribute, bool OnlyTriggerOnce = false)\n</code></pre>"},{"location":"Basic/Blueprint/BluePrint/#editcondition","title":"EditCondition","text":"<p>\u53ef\u4ee5\u7528\u6765\u9690\u85cffeature\uff0c\u652f\u6301\u7684\u65f6\u5019\uff0c\u624d\u663e\u793a\u3002\u53ef\u4ee5\u662f\u4e0a\u4e0b\u6587\u76f8\u5173 </p><pre><code>    /** \n     *  The enhanced input action that is bound to this button. The common input manager will trigger this button to \n     *  click if the action was pressed \n     */\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (EditCondition = \"CommonInput.CommonInputSettings.IsEnhancedInputSupportEnabled\", EditConditionHides))\n    TObjectPtr&lt;UInputAction&gt; TriggeringEnhancedInputAction;\n\n    /** Press and Hold values used for Keyboard and Mouse, Gamepad and Touch, depending on the current input type */\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = \"Input|Hold\", meta = (EditCondition=\"bRequiresHold\", ExposeOnSpawn = true))\n    TSubclassOf&lt;UCommonUIHoldData&gt; HoldData;\n</code></pre>"},{"location":"Basic/Blueprint/BluePrint/#camp","title":"Camp","text":"<p>\u9650\u5236\u6570\u503c, \u5176\u4e2dUIMin UIMax \u53ea\u662f\u663e\u793a\u6548\u679c\uff0c\u4e0d\u5f71\u54cd\u5b9e\u9645\u4ee3\u7801 </p><pre><code>    UPROPERTY(EditAnywhere, config, Category = \"VisualLogger\", meta = (ClampMin = \"10\", ClampMax = \"1000\", UIMin = \"10\", UIMax = \"1000\"))\n    float DefaultCameraDistance;\n</code></pre>"},{"location":"Basic/Blueprint/BluePrint/#_2","title":"\u5c5e\u6027\u6807\u8bb0\uff08\u6ce8\u89e3\uff09","text":"<ol> <li> <p><code>Transient</code></p> <ul> <li>Transient\u662f\u4e00\u4e2a\u5c5e\u6027\u6807\u8bb0\uff0c\u7528\u4e8e\u6307\u793a\u7279\u5b9a\u53d8\u91cf\u4e0d\u5e94\u88ab\u5e8f\u5217\u5316\u6216\u8005\u4fdd\u5b58\u5230\u78c1\u76d8\u4e0a\u3002\u8fd9\u610f\u5473\u7740\u5f53\u4f60\u6807\u8bb0\u4e00\u4e2a\u53d8\u91cf\u4e3aTransient\u65f6\uff0c\u5b83\u7684\u503c\u4e0d\u4f1a\u5728\u6e38\u620f\u4fdd\u5b58\u65f6\u88ab\u4fdd\u7559\uff0c\u4e5f\u4e0d\u4f1a\u5728\u7f16\u8f91\u5668\u5173\u95ed\u548c\u91cd\u65b0\u6253\u5f00\u540e\u88ab\u6062\u590d\u3002\u8fd9\u4e2a\u6807\u8bb0\u901a\u5e38\u7528\u4e8e\u8fd0\u884c\u65f6\u7684\u4e34\u65f6\u6570\u636e\u3002     <pre><code>UPROPERTY(Transient)\nTObjectPtr&lt;UMaterialInstanceDynamic&gt; ProgressDynamicMaterial;\n</code></pre></li> </ul> </li> <li> <p><code>NonPIEDuplicateTransient</code>\uff1a</p> </li> <li> <p>\u8fd9\u4e2a\u6807\u8bb0\u7528\u4e8e\u6307\u793a\u5c5e\u6027\u5728\u975ePIE\uff08Play In Editor\uff09\u573a\u666f\u4e2d\u4e0d\u5e94\u88ab\u590d\u5236\u3002\u901a\u5e38\u7528\u4e8e\u907f\u514d\u5728\u7f16\u8f91\u5668\u6a21\u5f0f\u4e0b\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u590d\u5236\u3002</p> <pre><code>UPROPERTY(NonPIEDuplicateTransient)\nTObjectPtr&lt;UMaterialInstanceDynamic&gt; MyMaterial;\n</code></pre> </li> <li> <p><code>DuplicateTransient</code>\uff1a</p> </li> <li> <p>\u5c5e\u6027\u5728\u5bf9\u8c61\u88ab\u590d\u5236\u65f6\u4e0d\u4f1a\u88ab\u590d\u5236\u3002\u901a\u5e38\u7528\u4e8e\u6307\u793a\u8fd0\u884c\u65f6\u7684\u4e34\u65f6\u6570\u636e\u3002</p> <pre><code>UPROPERTY(DuplicateTransient)\nTObjectPtr&lt;UTexture&gt; RuntimeTexture;\n</code></pre> </li> <li> <p><code>TextExportTransient</code>\uff1a</p> </li> <li> <p>\u5c5e\u6027\u5728\u6587\u672c\u5bfc\u51fa\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u5bfc\u51fa\u3002\u901a\u5e38\u7528\u4e8e\u6570\u636e\u4e0d\u9700\u8981\u5728\u6587\u672c\u683c\u5f0f\u4e2d\u4fdd\u5b58\u7684\u573a\u666f\u3002</p> <pre><code>UPROPERTY(TextExportTransient)\nint32 TemporaryData;\n</code></pre> </li> <li> <p><code>SkipSerialization</code>\uff1a</p> </li> <li> <p>\u5b8c\u5168\u8df3\u8fc7\u5e8f\u5217\u5316\u8fc7\u7a0b\uff0c\u5c5e\u6027\u4e0d\u4f1a\u88ab\u5e8f\u5217\u5316\u6216\u53cd\u5e8f\u5217\u5316\u3002</p> <pre><code>UPROPERTY(SkipSerialization)\nFString SecretData;\n</code></pre> </li> <li> <p><code>AssetRegistrySearchable</code>\uff1a</p> </li> <li> <p>\u5c5e\u6027\u4f1a\u88ab\u6dfb\u52a0\u5230\u8d44\u4ea7\u6ce8\u518c\u8868\u4e2d\uff0c\u5141\u8bb8\u901a\u8fc7\u8d44\u4ea7\u6ce8\u518c\u8868\u8fdb\u884c\u641c\u7d22\u3002\u901a\u5e38\u7528\u4e8e\u9700\u8981\u5728\u5185\u5bb9\u6d4f\u89c8\u5668\u4e2d\u5feb\u901f\u627e\u5230\u7279\u5b9a\u8d44\u4ea7\u7684\u573a\u666f\u3002</p> <pre><code>UPROPERTY(AssetRegistrySearchable)\nFString AssetTag;\n</code></pre> </li> </ol>"},{"location":"Basic/Blueprint/MontageSection/","title":"Multi section Montage Anim Notify Not Fire In Client","text":"<p>\u5728\u591a\u4eba\u6e38\u620f\u91cc\uff0cmontage\u52a8\u753b\u5982\u679c\u6709\u5b9a\u4e49\u4e86\u591a\u4e2asection\uff0c\u5982\u679c\u662f\u670d\u52a1\u7aef\u5728gameplay ability \u91cc\u9762\u89e6\u53d1\u8be5\u52a8\u753b\uff0c\u90a3\u4e48\u53ea\u6709\u7b2c\u4e00section\u91cc\u9762\u7684\u52a8\u753bnotify \u4f1a\u53d1\u9001\u5230 client\uff0c\u5176\u4ed6section\u7684 \u7684 notify \u53ea\u4f1a \u5728 server \u8c03\u7528\uff0c\u6211\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u5f15\u64ce\u5185\u90e8\u7684bug\u3002  \u4e0a\u56fe\u8c03\u8bd5\u7ed3\u679c\u663e\u793a\uff0cgrab\u53ea\u5728server\u6267\u884c\uff0c\u800cRelease\u662f\u6b63\u5e38\u7684\u3002</p> <p></p> <p>\u5982\u56fe\uff0c\u7531\u4e8e\u8d44\u6e90\u63d0\u4f9b\u7684\u52a8\u753b\u5e8f\u5217\u987a\u5e8f\u4e0d\u592a\u5bf9\uff0c\u4e8e\u662f\u662f\u7528section \u81ea\u5b9a\u4e49\u4e86\u64ad\u653e\u5e8f\u5217\uff1a\u5148\u64ad\u653eGrab \u518d\u64ad\u653eRelease\uff0c\u8868\u73b0\u6548\u679c\u5728server \u662f\u6b63\u5e38\u7684\uff0c\u5728client \u65e0\u6cd5\u89e6\u53d1 grab\u4e0b\u9762\u7684 anim notify\u3002</p> <p>\u7531\u4e8e\u662f\u5f15\u64ce\u7684bug\uff0c\u4e00\u65f6\u534a\u4f1a\u513f\u65e0\u6cd5\u89e3\u51b3\u3002  - \u8981\u4e48\u6253\u56deblender \u91cd\u65b0\u5bfc\u51fa\u987a\u5e8f\u7b26\u5408\u6e38\u620f\u8981\u6c42\u7684\u5e8f\u5217\uff0c\u4e0d\u719f\u6089\u653e\u5f03\u4e86\u3002  - \u5220\u6389 section\uff0c\u590d\u52362\u4efd\u8be5\u52a8\u753b\u5e8f\u5217\uff0c\u88c1\u526a\u6210\u4e24\u90e8\u5206\uff0c\u5728montage\u91cc\u91cd\u65b0\u62fc\u63a5</p> <p>\u590d\u5236\u88c1\u526a\u62fc\u63a5\u786e\u5b9e\u53ef\u4ee5\u5b9e\u73b0\u60f3\u8981\u7684\u6548\u679c\uff0c\u4f46\u662f\u88c1\u5207\u7684\u5730\u65b9\u5e76\u4e0d\u7cbe\u786e\uff0c\u5bb9\u6613\u8df3\u5e27\uff1a    \u5982\u56fe\uff0c\u5728\u7b2c8\u5e27\u5207\u4e00\u5200\uff0c\u5206\u6210\u4e24\u90e8\u5206\uff0c\u4f46\u624b\u52a8\u5207\u51fa\u6765\u7684\u4e24\u90e8\u5206\u5e76\u4e0d\u662f\u5b8c\u7f8e\u8d34\u5408\u3002</p> <p>\u5982\u679c\u6709\u4eba\u77e5\u9053\u66f4\u597d\u7684\u529e\u6cd5\uff0c\u8bf7\u8bf7\u7559\u8a00\u544a\u8bc9\u6211\uff0c\u8c22\u8c22\u3002</p>"},{"location":"Basic/C%2B%2B/C%2B%2B/","title":"UE C++ Usage","text":""},{"location":"Basic/C%2B%2B/C%2B%2B/#_1","title":"\u96c6\u5408","text":"<p>RemoveSwap \u8981\u5220\u9664\u7684\u5143\u7d20\uff0c\u548c\u672b\u5c3e\u4ea4\u6362\u4f4d\u7f6e\uff0c\u7136\u540e\u5220\u9664\u5b83\uff0c\u7136\u540e\u7ee7\u7eed\u627e\u4e0b\u4e00\u4e2a\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u8003\u8651\u5143\u7d20\u7684\u987a\u5e8f\uff0c\u6570\u7ec4\u4e0d\u4f1a\u6574\u4e2a\u91cd\u6392\uff0c\u5bf9\u6bd4RemoveAt\u6548\u7387\u9ad8\u3002RemoveSingleSwap\u662f\u5355\u4e2a\u7684\u7248\u672c\u3002 </p><pre><code>    /**\n     * Removes all instances of a given item from the array.\n     *\n     * This version is much more efficient, because it uses RemoveAtSwap\n     * internally which is O(Count) instead of RemoveAt which is O(ArrayNum),\n     * but does not preserve the order.\n     *\n     * @param Item The item to remove\n     * @param AllowShrinking Tell if this function can shrink the memory in-use if suitable.\n     *\n     * @returns Number of elements removed.\n     * @see Add, Insert, Remove, RemoveAll, RemoveAllSwap\n     */\n    SizeType RemoveSwap(const ElementType&amp; Item, EAllowShrinking AllowShrinking = EAllowShrinking::Yes)\n</code></pre>"},{"location":"Basic/C%2B%2B/C%2B%2B/#delegateevent","title":"\u5404\u79cdDelegate\u548cEvent","text":"<p>\u66f4\u591a\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\uff1ahttps://www.cnblogs.com/kekec/p/10678905.html</p>"},{"location":"Basic/C%2B%2B/C%2B%2B/#delegate-event","title":"Delegate \u548c Event","text":"<p>Delegate\u5c31\u662f\u56de\u8c03\uff0c Event\u662f\u8ba2\u9605\u8005-\u89c2\u5bdf\u8005\u6a21\u578b\uff0c\u652f\u6301\u591a\u4e2a\u89c2\u5bdf\u8005\u3002</p> <ul> <li>\u53ea\u80fd\u5728C++ \u4f7f\u7528</li> <li>\u4e0d\u80fd\u5e8f\u5217\u5316</li> <li>\u5f00\u9500\u5c0f</li> </ul>"},{"location":"Basic/C%2B%2B/C%2B%2B/#dynamic-delegate-event","title":"dynamic \u524d\u7f00\u7684Delegate \u548c Event","text":"<p>\u52a8\u6001\u5c31\u662f\u84dd\u56fe\u4e5f\u53ef\u4ee5\u8c03\u7528\uff0c\u652f\u6301\u4e24\u79cd\u7ed1\u5b9a\u65b9\u5f0f\uff0cBindUFunction \u548c BindDynamic\uff0c\u5176\u4e2dBindDynamic\u662f\u4e00\u4e2amacro</p> <ul> <li>\u84dd\u56fe\u53ef\u4ee5\u7528</li> <li>\u53ef\u5e8f\u5217\u5316</li> <li>\u5f00\u9500\u5927</li> </ul>"},{"location":"Basic/C%2B%2B/C%2B%2B/#multicast-delegate","title":"MULTICAST \u524d\u7f00\u7684Delegate","text":"<p>\u591a\u64addelegate \u5c31\u662f\u53e6\u4e00\u4e2a\u7248\u672c\u7684 Event\uff0cEvent\u672c\u8eab\u5c31\u662f\u591a\u64ad\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u8fd9\u4e2a\u524d\u7f00\u3002\u548cEvent\u7684\u533a\u522b\u662f\uff0cEvent\u9700\u8981\u58f0\u660e\u5728\u54ea\u4e2a\u7c7b\u91cc\u9762\u4f7f\u7528\uff0c\u800c\u591a\u64addelegate\u662f\u5168\u5c40\u901a\u7528\u7684\u3002MULTICAST\u524d\u7f00\u8ba9Delegate\u4e5f\u53d8\u6210\u4e86\u8ba2\u9605\u8005-\u89c2\u5bdf\u8005\u6a21\u578b</p>"},{"location":"Basic/C%2B%2B/C%2B%2B/#_2","title":"\u5f15\u64ce\u5185\u90e8\u7528\u4f8b","text":"<p>\u666e\u901a\u65e0\u53c2\u52a8\u6001Delegate \u548c\u51fd\u6570\u7ed1\u5b9a\uff0c\u4f7f\u7528 BindDynamic\uff0c\u5f53\u4f5c\u56de\u8c03\u7528 <code>UDELEGATE() DECLARE_DYNAMIC_DELEGATE(FWidgetAnimationDynamicEvent);</code> </p> <p>\u591a\u64adDelegate \u548c\u51fd\u6570\u7ed1\u5b9a, \u4f7f\u7528 AddDynamic  <code>DECLARE_DYNAMIC_MULTICAST_DELEGATE(FMontageWaitSimpleDelegate);</code> </p> <p><code>DECLARE_EVENT(MyClass, FMyEvent)</code>\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8981\u6307\u5b9a\u7ed9\u54ea\u4e2a\u7c7b\u4f7f\u7528 </p>"},{"location":"Basic/C%2B%2B/C%2B%2B/#ue-constants","title":"UE constants","text":"<ul> <li> <p>UE_SMALL_NUMBER when you need to skip some samll number</p> <p></p><pre><code>bool UCommonButtonBase::NativeOnHoldProgress(float DeltaTime)\n{\n    if (HoldTime &gt; UE_SMALL_NUMBER)\n</code></pre> and more: <pre><code>#define UE_PI                   (3.1415926535897932f)   /* Extra digits if needed: 3.1415926535897932384626433832795f */\n#define UE_SMALL_NUMBER         (1.e-8f)\n#define UE_KINDA_SMALL_NUMBER   (1.e-4f)\n#define UE_BIG_NUMBER           (3.4e+38f)\n#define UE_EULERS_NUMBER        (2.71828182845904523536f)\n#define UE_GOLDEN_RATIO         (1.6180339887498948482045868343656381f) /* Also known as divine proportion, golden mean, or golden section - related to the Fibonacci Sequence = (1 + sqrt(5)) / 2 */\n#define UE_FLOAT_NON_FRACTIONAL (8388608.f) /* All single-precision floating point numbers greater than or equal to this have no fractional value. */\n</code></pre> </li> </ul>"},{"location":"Basic/C%2B%2B/C%2B%2B/#log","title":"Log","text":"<ul> <li> <p>UE_LOGFMT this very useful for print function name.     </p><pre><code>    UE_LOGFMT(LogSwitchboard, Error, \"{Func}: EVP_PKEY_derive_init\", __FUNCTION__);    \n</code></pre> </li> <li> <p>UE_LOGFMT_EX: \u66f4\u6e05\u6670\uff0c\u4e0d\u5982\u4e0a\u9762\u5b9e\u7528    \u547d\u540d\u53c2\u6570\u4f7f\u65e5\u5fd7\u6d88\u606f\u66f4\u52a0\u6e05\u6670\u548c\u6613\u8bfb\u3002\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u9700\u8981\u7528 <code>UE_LOGFMT_FIELD</code> \u5b8f\u5305\u88c5\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u5b57\u6bb5\u540d\u3002</p> <pre><code>UE_LOGFMT_EX(LogCore, Warning, \"Loading '{Name}' failed with error {Error}\",\n    UE_LOGFMT_FIELD(\"Name\", Package-&gt;GetName()), UE_LOGFMT_FIELD(\"Error\", ErrorCode), UE_LOGFMT_FIELD(\"Flags\", LoadFlags));\n</code></pre> </li> </ul>"},{"location":"Basic/C%2B%2B/C%2B%2B/#tools","title":"Tools","text":"<ul> <li>widget pool     <pre><code>/**\n * Gets an instance of a widget of the given class.\n * The underlying slate is stored automatically as well, so the returned widget is fully constructed and GetCachedWidget will return a valid SWidget.\n */\nUUserWidget* NewEntryWidget = EntryWidgetPool.GetOrCreateInstance(InEntryClass);\n</code></pre></li> </ul>"},{"location":"Basic/C%2B%2B/C%2B%2B/#macro","title":"Macro","text":"<ul> <li>AddUniqueDynamic \u50cf\u51fd\u6570\u4e00\u6837\u4f7f\u7528\u7684Marco   <pre><code>  EnhancedInputSubsystem-&gt;ControlMappingsRebuiltDelegate.AddUniqueDynamic(this, &amp;UAuraBaseButton::CheckAndAddHoldBinding);\n\n //\u5c55\u5f00\u540e\u7684\u6548\u679c \n  EnhancedInputSubsystem-&gt;ControlMappingsRebuiltDelegate.__Internal_AddUniqueDynamic( this, &amp;UAuraBaseButton::CheckAndAddHoldBinding, UE::Delegates::Private::GetTrimmedMemberFunctionName(L\"&amp;UAuraBaseButton::CheckAndAddHoldBinding\") );\n</code></pre></li> </ul>"},{"location":"Basic/C%2B%2B/USubSystem/","title":"Subsystem","text":"<p>\u4e86\u89e3 subsystem\u7684\u6784\u5efa\u8fc7\u7a0b\u975e\u5e38\u91cd\u8981\uff0c\u6bd4\u5982\u5f88\u591aSubsystem\u4e0d\u9700\u8981\u624b\u52a8\u521b\u5efa\u548c\u8c03\u7528\uff0c\u53ea\u9700\u76f4\u63a5\u7ee7\u627f\u5b83\uff0c\u8fd0\u884c\u65f6\u5c31\u4f1a\u88ab\u8c03\u7528\u3002Subsystem\u672c\u8eab\u662f\u4e00\u5957\u751f\u547d\u5468\u671f\u7ed1\u5b9a\u673a\u5236\uff0c\u5c31\u50cfAndroid\u7684Activity\u6709\u975e\u5e38\u591a\u7684\u751f\u547d\u5468\u671f\uff0c\u5982\u679c\u529f\u80fd\u90fd\u5199\u5728activitiy\u91cc\u9762\uff0c\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u81c3\u80bf\uff0c\u96be\u4ee5\u8fc1\u79fb\u548c\u4f18\u5316, \u4e8e\u662fAndroid\u63a8\u51fa\u5f88\u591a lifecycle \u5173\u8054\u673a\u5236\uff0c\u8fd9\u4e2asubsystem\u662f\u5f02\u66f2\u540c\u5de5\u7684\uff0c\u4e0d\u8fc7\u6211\u611f\u89c9subsystem\u7684\u8bbe\u8ba1\u7406\u5ff5\u66f4\u52a0\u4f18\u96c5\u3002 \u8fd9\u91cc\u7b80\u5355\u8bb0\u5f55</p> <p>\u66f4\u591a\u53c2\u8003: - https://www.cnblogs.com/shiroe/p/14819721.html</p> <ul> <li>https://www.cnblogs.com/yejianying/p/15029111.html</li> </ul>"},{"location":"Basic/C%2B%2B/USubSystem/#subsystem","title":"Subsystem \u521d\u59cb\u5316","text":"<ul> <li> <p>\u83b7\u53d6\u6d3e\u751f\u7c7b\u7684\u5de5\u5177\u65b9\u6cd5     </p><pre><code>/**\n* Returns an array of classes that were derived from the specified class.\n*\n* @param    ClassToLookFor              The parent class of the classes to return.\n* @param    Results                     An output list of child classes of the specified parent class.\n* @param    bRecursive                  If true, the results will include children of the children classes, recursively. Otherwise, only direct decedents will be included.\n*/\nCOREUOBJECT_API void GetDerivedClasses(const UClass* ClassToLookFor, TArray&lt;UClass *&gt;&amp; Results, bool bRecursive = true);\n</code></pre> </li> <li> <p>\u9012\u5f52\u83b7\u53d6\u6d3e\u751f\u7c7b\uff0c\u52a0\u5165\u521d\u59cb\u5316\u5217\u8868     </p>SubsystemCollection.cpp<pre><code>TArray&lt;UClass*&gt; SubsystemClasses;\nGetDerivedClasses(BaseType, SubsystemClasses, true);\n\nfor (UClass* SubsystemClass : SubsystemClasses)\n{\n    AddAndInitializeSubsystem(SubsystemClass);\n}\n</code></pre> </li> <li>\u5f00\u59cb\u521d\u59cb\u5316\uff0c\u8c03\u7528\u8be5\u7c7bCDO \u7684ShouldCreateSubSystem \u6765\u5224\u65ad\u662f\u4e0d\u662f\u8981\u5b9e\u4f8b\u5316\u3002     <pre><code>const USubsystem* CDO = SubsystemClass-&gt;GetDefaultObject&lt;USubsystem&gt;();\nif (CDO-&gt;ShouldCreateSubsystem(Outer))\n{\n    USubsystem* Subsystem = NewObject&lt;USubsystem&gt;(Outer, SubsystemClass);\n    SubsystemMap.Add(SubsystemClass,Subsystem);\n    Subsystem-&gt;InternalOwningSubsystem = this;\n    Subsystem-&gt;Initialize(*this);\n</code></pre></li> <li>\u5982\u679c\u53ea\u60f3\u6700\u5916\u5c42\u7684\u7684\u6d3e\u751f\u7c7b\u88ab\u5b9e\u4f8b\u5316\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a     UCommonUIActionRouterBase.cpp<pre><code>bool UCommonUIActionRouterBase::ShouldCreateSubsystem(UObject* Outer) const\n{\n    TArray&lt;UClass*&gt; ChildClasses;\n    GetDerivedClasses(GetClass(), ChildClasses, false);\n\n    UE_LOG(LogUIActionRouter, Display, TEXT(\"Found %i derived classes when attemping to create action router (%s)\"), ChildClasses.Num(), *GetClass()-&gt;GetName());\n\n    // Only create an instance if there is no override implementation defined elsewhere\n    return ChildClasses.Num() == 0;\n}\n</code></pre></li> </ul>"},{"location":"GAS/00/","title":"FYI","text":"<p>They are rage, brutal, without mercy. But you, you will be worse. RIP AND TEAR UNTIL IT IS DONE!</p> <p>--Doom Eternal</p>"},{"location":"GAS/00/#gas-startup","title":"GAS Startup:","text":"<ul> <li>GAS Document  My understanding of Unreal Engine 5's GameplayAbilitySystem plugin with a simple multiplayer sample project.</li> <li>GAS Document Chinsese version</li> <li>Stephen Ulibarri GAS Course I love this course! I learn a lot from Stephen. And his voice is very clear, which helps non-native English speakers understand what he's saying.This course is not expensive. I recommend you to feel free to buy it.</li> </ul>"},{"location":"GAS/1GamePlayTag/","title":"Using macro to define Native Gameplay Tag","text":"<p>Note</p> <p>This post base on Aura GAS Course</p>"},{"location":"GAS/1GamePlayTag/#gameplaytag","title":"GamePlayTag","text":"<p>Instead of using an object instance to hold all of the gameplay tags, it's better to use a macro. This is how Lyra did it:</p> Tags.h<pre><code>namespace AuraGameplayTags\n{\n\n  UE_DECLARE_GAMEPLAY_TAG_EXTERN(Attribute_Primary_Intelligence);\n  UE_DECLARE_GAMEPLAY_TAG_EXTERN(Attribute_Primary_Strength);\n  UE_DECLARE_GAMEPLAY_TAG_EXTERN(Attribute_Primary_Vigor);\n  UE_DECLARE_GAMEPLAY_TAG_EXTERN(Attribute_Primary_Resilience);\n}\n</code></pre> Tags.cpp<pre><code>  namespace AuraGameplayTags\n  {\n      UE_DEFINE_GAMEPLAY_TAG_COMMENT(Attribute_Primary_Intelligence, \"Attribute.Primary.Intelligence\", \"Increase spell damage\")\n      UE_DEFINE_GAMEPLAY_TAG_COMMENT(Attribute_Primary_Strength, \"Attribute.Primary.Strength\", \"Increase Physical damage\")\n      UE_DEFINE_GAMEPLAY_TAG_COMMENT(Attribute_Primary_Vigor, \"Attribute.Primary.Vigor\", \"Increase max health\")\n      UE_DEFINE_GAMEPLAY_TAG_COMMENT(Attribute_Primary_Resilience, \"Attribute.Primary.Resilience\", \"Increase armor and armor penetration\")\n</code></pre>"},{"location":"GAS/1GamePlayTag/#remove-tagstoattributes","title":"Remove TagsToAttributes","text":"<p>we don't need this mapping now. The magic is</p> <p><code>Attribute.AttributeGetter = FindFieldChecked&lt;FProperty&gt;(UAuraAttributeSet::StaticClass(), AttributeName);</code></p> <p>we can save attributeGet in Our DataAsset: </p><pre><code>USTRUCT(BlueprintType)\nstruct FAttributeInfo\n{\n    GENERATED_BODY()\n\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly)\n    FGameplayTag AttributeTag;\n\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly)\n    FText AttributeName;\n\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly)\n    FText AttributeDescription;\n\n    UPROPERTY(BlueprintReadOnly)\n    mutable float AttributeValue = 0.f;\n\n    UPROPERTY(BlueprintReadOnly)\n    FGameplayAttribute  AttributeGetter;\n\n};\n</code></pre> <p><code>TMap&lt;FGameplayTag,TAttrFunctionPrt&lt;FGameplayAttribute()&gt;&gt; TagsToAttributes;</code></p> <p>then, auto init all data  row, like so: </p><pre><code>UAuraAttributeDataAsset::UAuraAttributeDataAsset()\n{\n    // init default attributes from tag manager with parent tag is \"Attribute.*\"\n    const UGameplayTagsManager&amp; Manager = UGameplayTagsManager::Get();\n    const FGameplayTagContainer PrimaryTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Primary\", false));\n    const FGameplayTagContainer SecondaryTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Secondary\", false));\n    const FGameplayTagContainer ResistanceTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Resistance\", false));\n    AddDefaultAttributeInfos(PrimaryTags);\n    AddDefaultAttributeInfos(SecondaryTags);\n    AddDefaultAttributeInfos(ResistanceTags, true);\n}\n\n\nvoid UAuraAttributeDataAsset::AddDefaultAttributeInfos(const FGameplayTagContainer&amp; Tags, const bool bIsResistance)\n{\n    for (const FGameplayTag&amp; Tag : Tags)\n    {\n        FAttributeInfo Attribute;\n        Attribute.AttributeTag = Tag;\n        // split tag name by '.' and get the last part, tag example: \"Attribute.Primary.Intelligence\", we only need \"Intelligence\"\n        FString TagName = Tag.ToString();\n        int32 LastDotIndex;\n        if (TagName.FindLastChar('.', LastDotIndex))\n        {\n            TagName = TagName.Mid(LastDotIndex + 1);\n        }\n        Attribute.AttributeName = FText::FromString(bIsResistance ? TagName + \" Resistance\" : TagName);\n#if WITH_EDITORONLY_DATA\n        Attribute.AttributeDescription = FText::FromString(UGameplayTagsManager::Get().FindTagNode(AuraGameplayTags::Attribute_Primary_Intelligence).Get()-&gt;GetDevComment());\n#endif\n        Attribute.AttributeValue = 0.f;\n        const FName AttributeName = bIsResistance ? FName(*(\"Resistance\" + TagName)) : FName(*TagName);\n        Attribute.AttributeGetter = FindFieldChecked&lt;FProperty&gt;(UAuraAttributeSet::StaticClass(), AttributeName);\n        Attributes.Add(Attribute);\n    }\n}\n</code></pre>"},{"location":"GAS/1GamePlayTag/#how-it-look-like","title":"How it look like","text":"<p>let me share my use cases:</p> UExecCalc_Damage.cpp<pre><code>struct DamageStatics\n{\n    DECLARE_ATTRIBUTE_CAPTUREDEF(Armor);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(ArmorPenetration);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(BlockChance);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(CriticalHitChance);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(CriticalHitDamage);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(CriticalHitResistance);\n\n    DECLARE_ATTRIBUTE_CAPTUREDEF(ResistanceFire);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(ResistanceLightning);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(ResistanceArcane);\n    DECLARE_ATTRIBUTE_CAPTUREDEF(ResistancePhysical);\n\n    TMap&lt;FGameplayTag, FGameplayEffectAttributeCaptureDefinition&gt; TagsToCaptures;\n\n    DamageStatics()\n    {\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, Armor, Target, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ArmorPenetration, Source, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, BlockChance, Target, false);\n\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, CriticalHitChance, Source, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, CriticalHitDamage, Source, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, CriticalHitResistance, Target, false);\n\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ResistanceFire, Target, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ResistanceLightning, Target, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ResistanceArcane, Target, false);\n        DEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ResistancePhysical, Target, false);\n\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_Armor, ArmorDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_ArmorPenetration, ArmorPenetrationDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_BlockChance, BlockChanceDef);\n\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_CriticalHitChance, CriticalHitChanceDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_CriticalHitDamage, CriticalHitDamageDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Secondary_CriticalHitResistance, CriticalHitResistanceDef);\n\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Resistance_Fire, ResistanceFireDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Resistance_Lightning, ResistanceLightningDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Resistance_Arcane, ResistanceArcaneDef);\n        TagsToCaptures.Add(AuraGameplayTags::Attribute_Resistance_Physical, ResistancePhysicalDef);\n    }\n};\n\nUExecCalc_Damage::UExecCalc_Damage()\n{\n    RelevantAttributesToCapture.Add(DamageStatics().ArmorDef);\n    RelevantAttributesToCapture.Add(DamageStatics().ArmorPenetrationDef);\n    RelevantAttributesToCapture.Add(DamageStatics().BlockChanceDef);\n\n    RelevantAttributesToCapture.Add(DamageStatics().CriticalHitChanceDef);\n    RelevantAttributesToCapture.Add(DamageStatics().CriticalHitDamageDef);\n    RelevantAttributesToCapture.Add(DamageStatics().CriticalHitResistanceDef);\n\n    RelevantAttributesToCapture.Add(DamageStatics().ResistanceFireDef);\n    RelevantAttributesToCapture.Add(DamageStatics().ResistanceLightningDef);\n    RelevantAttributesToCapture.Add(DamageStatics().ResistanceArcaneDef);\n    RelevantAttributesToCapture.Add(DamageStatics().ResistancePhysicalDef);\n}\n</code></pre> <p>a Tag Mapping Helper Function: </p><pre><code>    TMap&lt;FGameplayTag, FGameplayTag&gt;&amp; AuraGameplayTags::GetDamageTypeToResistanceMap()\n    {\n        static TMap&lt;FGameplayTag, FGameplayTag&gt; DamageTypeToResistanceMap = {\n            {AuraGameplayTags::Damage_Fire, AuraGameplayTags::Attribute_Resistance_Fire},\n            {AuraGameplayTags::Damage_Lightning, AuraGameplayTags::Attribute_Resistance_Lightning},\n            {AuraGameplayTags::Damage_Arcane, AuraGameplayTags::Attribute_Resistance_Arcane},\n            {AuraGameplayTags::Damage_Physical, AuraGameplayTags::Attribute_Resistance_Physical}\n        };\n        return DamageTypeToResistanceMap;\n    }\n</code></pre>"},{"location":"GAS/2DataAssetsAuto/","title":"Make DataAsset setup with Default Values","text":"<p>Note</p> <p>This post base on Aura GAS Course</p> <p>In the Aura Course, we have to manually input all the RPG Attribute Items into the DataAsset, which is pretty boring and repetitive. So, I believe we can generate default values based on the existing information, eliminating the need for manual input and achieving semi-automation.</p>"},{"location":"GAS/2DataAssetsAuto/#tldr","title":"TLDR","text":"<ul> <li>Utilize <code>FindFieldChecked&lt;FProperty&gt;(UAuraAttributeSet::StaticClass(), AttributeName)</code> to save FGameplayAttribute in DataAsset</li> <li>Use <code>GetDerivedClasses</code> to obtain all subclasses of UGameplayAbility.</li> </ul>"},{"location":"GAS/2DataAssetsAuto/#auto-collect-all-attributes","title":"Auto Collect All Attributes","text":"<ul> <li>Utilize <code>UGameplayTagsManager.RequestGameplayTagChildren</code> to locate all the Sub Tags.</li> <li>Utilize <code>FindFieldChecked&lt;FProperty&gt;(UAuraAttributeSet::StaticClass(), AttributeName)</code> to retrieve the AttributeGetter and store it in DataAssets for future use.</li> </ul> <pre><code>    UAuraAttributeDataAsset::UAuraAttributeDataAsset()\n{\n    // init default attributes from tag manager with parent tag is \"Attribute.*\"\n    const UGameplayTagsManager&amp; Manager = UGameplayTagsManager::Get();\n    const FGameplayTagContainer PrimaryTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Primary\", false));\n    const FGameplayTagContainer SecondaryTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Secondary\", false));\n    const FGameplayTagContainer ResistanceTags = Manager.RequestGameplayTagChildren(FGameplayTag::RequestGameplayTag(\"Attribute.Resistance\", false));\n    AddDefaultAttributeInfos(PrimaryTags);\n    AddDefaultAttributeInfos(SecondaryTags);\n    AddDefaultAttributeInfos(ResistanceTags, true);\n}\n\nvoid UAuraAttributeDataAsset::AddDefaultAttributeInfos(const FGameplayTagContainer&amp; Tags, const bool bIsResistance)\n{\n    for (const FGameplayTag&amp; Tag : Tags)\n    {\n        FAttributeInfo Attribute;\n        Attribute.AttributeTag = Tag;\n        // split tag name by '.' and get the last part, tag example: \"Attribute.Primary.Intelligence\", we only need \"Intelligence\"\n        FString TagName = Tag.ToString();\n        int32 LastDotIndex;\n        if (TagName.FindLastChar('.', LastDotIndex))\n        {\n            TagName = TagName.Mid(LastDotIndex + 1);\n        }\n        Attribute.AttributeName = FText::FromString(bIsResistance ? TagName + \" Resistance\" : TagName);\n#if WITH_EDITORONLY_DATA\n        Attribute.AttributeDescription = FText::FromString(UGameplayTagsManager::Get().FindTagNode(AuraGameplayTags::Attribute_Primary_Intelligence).Get()-&gt;GetDevComment());\n#endif\n        Attribute.AttributeValue = 0.f;\n        const FName AttributeName = bIsResistance ? FName(*(\"Resistance\" + TagName)) : FName(*TagName);\n        Attribute.AttributeGetter = FindFieldChecked&lt;FProperty&gt;(UAuraAttributeSet::StaticClass(), AttributeName);\n        Attributes.Add(Attribute);\n    }\n}\n</code></pre>"},{"location":"GAS/2DataAssetsAuto/#auto-collect-all-offensive-abilities","title":"Auto Collect All Offensive Abilities","text":"<p>In the Aura Course, all the offensive abilities have an Input Tag, so we can leverage this to identify all offensive spells.</p> <ul> <li>Use <code>GetDerivedClasses</code> to obtain all subclasses of UGameplayAbility.</li> </ul> <pre><code>UAuraAbilitiesDataAsset::UAuraAbilitiesDataAsset()\n{\n    TArray&lt;UClass*&gt; AbilityClasses;\n    GetDerivedClasses(UAuraGameplayAbility::StaticClass(), AbilityClasses, true);\n    for (UClass* AbilityClass : AbilityClasses)\n    {\n        UAuraGameplayAbility* Ability = Cast&lt;UAuraGameplayAbility&gt;(AbilityClass-&gt;GetDefaultObject());\n        // has a press key tag means it's a player triggered spell\n        if (Ability &amp;&amp; Ability-&gt;PlayerKeyPressTag.IsValid())\n        {\n            FAbilityInfo Info;\n            Info.InputTag = Ability-&gt;PlayerKeyPressTag;\n            if (Ability-&gt;AbilityTags.Num() &gt; 0)\n            {\n                Info.AbilityTag = Ability-&gt;AbilityTags.First();\n            }\n            Info.Ability = AbilityClass;\n            AbilityInformation.Add(Info);\n        }\n    }\n}\n</code></pre>"},{"location":"GAS/3AbilityAsync/","title":"Use AbilityAsync Instead of UBlueprintAsyncActionBase","text":"<p>GAS Course introduces UBlueprintAsyncActionBase, I found some subClass maybe useful. </p> <p>Derived from UAbilityAsync, we can reduce some code.</p> AbilityAsync_WaitCooldown.h<pre><code>#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"Abilities/Async/AbilityAsync.h\"\n#include \"AbilityAsync_WaitCooldown.generated.h\"\n\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnCooldownDelegate, float, TimeRemaining);\n\n/**\n * \n */\nUCLASS()\nclass AURA_API UAbilityAsync_WaitCooldown : public UAbilityAsync\n{\n    GENERATED_BODY()\npublic:\n    UPROPERTY(BlueprintAssignable)\n    FOnCooldownDelegate CooldownStart;\n\n    UPROPERTY(BlueprintAssignable)\n    FOnCooldownDelegate CooldownEnd;\n\n    UFUNCTION(BlueprintCallable, meta = (BlueprintInternalUseOnly = \"true\"))\n    static UAbilityAsync_WaitCooldown* WaitCooldown(UAbilitySystemComponent* InASC, FGameplayTag InCooldownTag);\n\n    virtual void EndAction() override;\n\n    void CooldownTagChanged(FGameplayTag GameplayTag, int32 Count );\n    void OnGE_ApplyToSelf(UAbilitySystemComponent* ASC, const FGameplayEffectSpec&amp; GESpec, FActiveGameplayEffectHandle ActiveGameplayEffectHandle);\n    virtual void Activate() override;\n\n\nprotected:\n\n    FGameplayTag CooldownTag;\n\n};\n</code></pre>"},{"location":"GAS/4GAS%20Trap/","title":"Gas Common Pitfalls","text":""},{"location":"GAS/4GAS%20Trap/#gascomponent","title":"GASComponent","text":""},{"location":"GAS/4GAS%20Trap/#gameplaytag-gameplay-effect-replication-policy","title":"gameplaytag \u548c gameplay effect \u7684 replication policy","text":"<ul> <li> <p>\u8fc7\u65e9\u8c03\u7528<code>waitGameplayTag</code>\u4f1a\u5bfc\u81f4\u6ce8\u518c\u5931\u8d25\uff1aThe initialization of GASComponent is after <code>BeginPlay</code>. If a node like <code>WaitGameplay</code> is called after <code>BeginPlay</code>, it usually can't register events to GAS because the GAS Component is null. This applies to both the server and client. \u6240\u6709\u5e94\u8be5\u5728on commponent created \u4e4b\u540e\u8c03\u7528\u3002    </p> </li> <li> <p><code>WaitGameplay</code>, the event \"WaitGameplay\" will be register to all roles: ROLE_Authority (server), ROLE_AutonomousProxy (your character),So, always pay attention to which role the current code is running under. \u7531\u4e8egameplaytag \u662f\u591a\u7aef\u590d\u5236\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u76d1\u542c\u6b63\u786e\uff0c\u6240\u6709\u7aef\u90fd\u80fd\u63a5\u53d7\u5230 waitgampeplay event.\u5982\u679cNPC\u4e0d\u9700\u8981\u8fd9\u4e2a\u56de\u8c03\uff0c\u8981\u5f53\u5fc3\u3002</p> </li> <li> <p>\u591a\u4eba\u6e38\u620f\u91cc\uff0c\u5982\u679c\u89d2\u8272\u5728\u4e0d\u540cclient\u7684\u89c6\u89d2\u91cc\u8868\u73b0\u4e0d\u4e00\u81f4\uff08\u81ea\u5df1\u80fd\u770b\u5230\uff0c\u522b\u4eba\u770b\u4e0d\u5230\uff09\uff0c\u53ef\u80fd\u662f\u5bf9GE\u7f51\u7edc\u590d\u5236\u7684\u7406\u89e3\u9519\u8bef\uff0c\u5bfc\u81f4\u5199\u51fa\u4e86\u9519\u8bef\u7684\u903b\u8f91:   In a multiple player game, the Player's GE Replicate Mode is Mixed, while NPC is set to Minimal. \u8fd9\u8bf4\u660e\uff0c\u201c\u5f53\u524d\u73a9\u5bb6\u201d\u7684GE\u53ea\u590d\u5236\u5230\u201c\u5f53\u524d\u73a9\u5bb6\u201d\u7684\u7535\u8111\u4e0a\uff0c\u540c\u65f6\u73a9\u5bb6\u7535\u8111\u91cc\u7684NPC\u4e0d\u4f1a\u63a5\u53d7\u5230\u4efb\u4f55GE\u7f51\u7edc\u590d\u5236\u3002       so the ROLE_SimulatedProxy (your game partner) will not have any Active Effects because the server does not replicate GE to them. So in this case, the node <code>Get Active Effects with All Tags</code> will always return an empty array. The same goes for NPCs.\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u65e0\u6cd5\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u6765\u83b7\u53d6\u5230\u5176\u4ed6\u73a9\u5bb6\uff08\u6216\u8005NPC\uff09\u7684Active Gameplay Effects\u3002\u5b83\u53ea\u80fd\u83b7\u5f97\u5f53\u524d\u73a9\u5bb6active GEs.</p> </li> <li> <p>\u603b\u7ed3\uff0c\u901a\u8fc7GameplayTag\u6765\u5224\u65ad\u67d0\u4e2a\u89d2\u8272\u662f\u5426\u6709\u6fc0\u6d3b\u7684GE\u662f\u6700\u59a5\u5f53\u7684\uff0c\u56e0\u4e3a\u5b83\u662f\u591a\u7aef\u590d\u5236\u7684\uff0c\u800c\u65e0\u6cd5\u901a\u8fc7actor \u662f\u5426\u6709\u6fc0\u6d3b\u7684GE\u6765\u5224\u65ad\u3002</p> </li> </ul>"},{"location":"GAS/5CooldownGE/","title":"Gas Cooldown Effect","text":"<p>I dont't want to create Cooldown effect  for every Ability. So I want to find a way to create a Cooldown effect for all spells. To dynamically create a Cooldown effect for all spells. But finilly I found we can't do that. I writon a article about this.</p>"},{"location":"GAS/5CooldownGE/#ugameplayability","title":"UGameplayAbility","text":"<p>Some related code in UGameplayAbility.cpp. At the beginning, I think we can simply override <code>GetCooldownGameplayEffect</code> to return my own Cooldown GE.</p> <pre><code>void UGameplayAbility::ApplyCooldown(const FGameplayAbilitySpecHandle Handle, const FGameplayAbilityActorInfo* ActorInfo, const FGameplayAbilityActivationInfo ActivationInfo) const\n{\n    UGameplayEffect* CooldownGE = GetCooldownGameplayEffect();\n    if (CooldownGE)\n    {\n        ApplyGameplayEffectToOwner(Handle, ActorInfo, ActivationInfo, CooldownGE, GetAbilityLevel(Handle, ActorInfo));\n    }\n}\n\nUGameplayEffect* UGameplayAbility::GetCooldownGameplayEffect() const\n{\n    if ( CooldownGameplayEffectClass )\n    {\n        return CooldownGameplayEffectClass-&gt;GetDefaultObject&lt;UGameplayEffect&gt;();\n    }\n    else\n    {\n        return nullptr;\n    }\n}\n</code></pre> <p>so I just override <code>GetCooldownGameplayEffect</code> to return my own Cooldown GE.</p> <pre><code>UGameplayEffect* UAuraGameplayAbility::GetCooldownGameplayEffect() const\n{\n    const auto Test =Super::GetCooldownGameplayEffect();\n    // has value, using the simple cooldown config.\n    if (CooldownDuration != -1.f &amp;&amp; CooldownTag.IsValid())\n    {\n        if (CooldownGE) return CooldownGE;\n\n        CooldownGE = NewObject&lt;UGameplayEffect&gt;();\n\n        CooldownGE-&gt;DurationPolicy =EGameplayEffectDurationType::HasDuration;\n\n        UTargetTagsGameplayEffectComponent&amp; TargetTagsComponent = CooldownGE-&gt;FindOrAddComponent&lt;UTargetTagsGameplayEffectComponent&gt;();\n\n        CooldownGE-&gt;DurationMagnitude = FGameplayEffectModifierMagnitude(FScalableFloat(CooldownDuration));\n        CooldownGE-&gt;Period = 1.f;\n        FInheritedTagContainer TagContainerMods;\n        TagContainerMods.AddTag(CooldownTag);\n        TargetTagsComponent.SetAndApplyTargetTagChanges(TagContainerMods);\n        return CooldownGE;\n    }\n    return Test;\n}\n</code></pre> <p>But it doesn't work. So I dive into the source code.  </p><pre><code>FActiveGameplayEffectHandle UGameplayAbility::ApplyGameplayEffectToOwner(const FGameplayAbilitySpecHandle Handle, const FGameplayAbilityActorInfo* ActorInfo, const FGameplayAbilityActivationInfo ActivationInfo, const UGameplayEffect* GameplayEffect, float GameplayEffectLevel, int32 Stacks) const\n{\n    if (GameplayEffect &amp;&amp; (HasAuthorityOrPredictionKey(ActorInfo, &amp;ActivationInfo)))\n    {\n        FGameplayEffectSpecHandle SpecHandle = MakeOutgoingGameplayEffectSpec(Handle, ActorInfo, ActivationInfo, GameplayEffect-&gt;GetClass(), GameplayEffectLevel);\n        if (SpecHandle.IsValid())\n        {\n            SpecHandle.Data-&gt;SetStackCount(Stacks);\n            return ApplyGameplayEffectSpecToOwner(Handle, ActorInfo, ActivationInfo, SpecHandle);\n        }\n    }\n\n    // We cannot apply GameplayEffects in this context. Return an empty handle.\n    return FActiveGameplayEffectHandle();\n}\n</code></pre> In <code>ApplyGameplayEffectToOwner</code>, we can see that it will call <code>MakeOutgoingGameplayEffectSpec</code> to create a <code>FGameplayEffectSpecHandle</code>. And then call <code>ApplyGameplayEffectSpecToOwner</code> to apply the <code>FGameplayEffectSpecHandle</code>. But it not using my own Cooldown GE.<code>GameplayEffect-&gt;GetClass()</code>, it will get the <code>CooldownGameplayEffectClass</code> from <code>UGameplayAbility</code>, its the class deflault object. <p>here is the code show how to create a <code>FGameplayEffectSpecHandle</code>: </p><pre><code>FGameplayEffectSpecHandle UAbilitySystemComponent::MakeOutgoingSpec(TSubclassOf&lt;UGameplayEffect&gt; GameplayEffectClass, float Level, FGameplayEffectContextHandle Context) const\n{\n    SCOPE_CYCLE_COUNTER(STAT_GetOutgoingSpec);\n    if (Context.IsValid() == false)\n    {\n        Context = MakeEffectContext();\n    }\n\n    if (GameplayEffectClass)\n    {\n        UGameplayEffect* GameplayEffect = GameplayEffectClass-&gt;GetDefaultObject&lt;UGameplayEffect&gt;();\n\n        FGameplayEffectSpec* NewSpec = new FGameplayEffectSpec(GameplayEffect, Context, Level);\n        return FGameplayEffectSpecHandle(NewSpec);\n    }\n\n    return FGameplayEffectSpecHandle(nullptr);\n}\n</code></pre> <code>UGameplayEffect* GameplayEffect = GameplayEffectClass-&gt;GetDefaultObject&lt;UGameplayEffect&gt;();</code> that is the problem."},{"location":"GAS/5CooldownGE/#my-opinion","title":"My Opinion","text":"<p>I think The reason for this design is...</p> <ul> <li>Performance optimization: Using GetDefaultObject can help avoid frequently creating and destroying objects, especially when they are used a lot.</li> <li>Data consistency: Make sure all GameplayEffects of the same type use the same base configuration.</li> <li>Blueprint compatibility: This design makes it easy to create and configure GameplayEffects in Blueprints.</li> <li>Network synchronization: Using predefined classes makes it easier to sync effects in multiplayer games.</li> <li>Serializability: Predefined classes are easier to serialize and deserialize, which is important for saving game states.</li> </ul> <p>if you know another way to create a Cooldown effect for all spells, please tell me. I will be very grateful.</p>"},{"location":"GAS/5CooldownGE/#other-solution","title":"Other Solution","text":"<ul> <li>auto create cooldown effect</li> </ul>"},{"location":"GAS/6GE_Calculation/","title":"GAS GE Custom Calculation","text":""},{"location":"GAS/6GE_Calculation/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ul> <li>\u7b80\u5355\u8ba1\u7b97\uff0c\u7ee7\u627f <code>UGameplayModMagnitudeCalculation</code></li> <li>\u590d\u6742\u8ba1\u7b97\uff0c\u7ee7\u627f <code>UGameplayEffectExecutionCalculation</code></li> </ul>"},{"location":"GAS/6GE_Calculation/#ugameplaymodmagnitudecalculation","title":"UGameplayModMagnitudeCalculation","text":"<ul> <li>CalculateBaseMagnitude\uff1a\u7528\u4e8e\u8bbe\u7f6e\u57fa\u7840\u503c\u8ba1\u7b97\u89c4\u5219\uff0c base value,\u4e5f\u5c31\u662f\u8bf4\u6700\u7ec8\u503c\u662f\u7531\u57fa\u7840\u503c\u548cpre/post\u7cfb\u6570\u8ba1\u7b97\u51fa\u6765\u7684\u3002 <p>coeffecient and pre/post multiply adds </p><pre><code>    /**\n     * Calculate the base magnitude of the gameplay effect modifier, given the specified spec. Note that the owning spec def can still modify this base value\n     * with a coeffecient and pre/post multiply adds. see FCustomCalculationBasedFloat::CalculateMagnitude for details.\n     * \n     * @param Spec  Gameplay effect spec to use to calculate the magnitude with\n     * \n     * @return Computed magnitude of the modifier\n     */\n    UFUNCTION(BlueprintNativeEvent, Category=\"Calculation\")\n    float CalculateBaseMagnitude(const FGameplayEffectSpec&amp; Spec) const;\n</code></pre> </li> <li>GetExternalModifierDependencyMulticast: \u5982\u679c\u8ba1\u7b97\u7ed3\u679c\u4f9d\u8d56\u4e8e\u6e38\u620f\u4ee3\u7801\u7279\u5b9a\u7684\u6761\u4ef6\uff0c\u53ef\u4ee5\u91cd\u5199\u8fd9\u4e2a\u65b9\u6cd5\u63d0\u4f9b\u4e00\u4e2a\u591a\u64ad\u59d4\u6258\uff0c\u5f53\u4f9d\u8d56\u6761\u4ef6\u6539\u53d8\u65f6\u89e6\u53d1\u91cd\u65b0\u8ba1\u7b97\u3002</li> </ul>"},{"location":"GAS/6GE_Calculation/#ugameplayeffectexecutioncalculation","title":"UGameplayEffectExecutionCalculation","text":"<p>\u8be5\u7c7b\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u7684\u7075\u6d3b\u6027\uff0c\u53ef\u4ee5\u5904\u7406\u51e0\u4e4e\u6240\u6709\u4f60\u80fd\u60f3\u5230\u7684\u4e0e\u6e38\u620f\u6548\u679c\u76f8\u5173\u7684\u903b\u8f91\u3002  \u57fa\u672c\u4e0a\u84dd\u56fe\u914d\u7f6e GE \u5404\u79cd modified\uff0c\u90fd\u53ef\u4ee5\u76f4\u63a5\u5728 \u7ee7\u627f\u8be5C++\u7c7b \u5b9e\u73b0\u3002</p> <ul> <li>\u4f7f\u7528ExecutionParams \u7684AttemptCalculateCapturedAttributeMagnitude\u6765\u6355\u83b7\u503c     <pre><code>float TargetArmor = 0.f;\n    ExecutionParams.AttemptCalculateCapturedAttributeMagnitude(DamageStatics().ArmorDef, EvaluationParameters, TargetArmor);\n</code></pre></li> <li>\u7cfb\u6570\u4e5f\u662f\u81ea\u5df1\u8bbe\u5b9a\uff0c\u6700\u7ec8\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u4fee\u6539\u5668\uff0c\u91cc\u9762\u5305\u542b\u7684\u503c\u5c31\u662f\u6700\u7ec8\u503c\u3002     <pre><code>Damage *= (100 - EffectiveArmor * EffectiveArmorCoefficient) / 100;\n\nconst FGameplayModifierEvaluatedData DamageData(UAuraAttributeSet::GetIncomingDamageAttribute(), EGameplayModOp::Additive, Damage);\nOutExecutionOutput.AddOutputModifier(DamageData);\n</code></pre></li> </ul>"},{"location":"GAS/6GE_Calculation/#_2","title":"\u7406\u89e3\u4e3a\u4f55\u662f\u8fd9\u6837\u8bbe\u8ba1","text":"<p>GE\u662f\u7684\u6570\u503c\u6e38\u620f\uff0cGE\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2a\u6570\u503c\u8ba1\u7b97\u51fd\u6570\u3002\u6bd4\u5982<code>GE_FireDamage(A,B)</code>,\u5fc5\u7136\u6709\u53c2\u4e0e\u7684\u53cc\u65b9A\u548cB\uff0c\u5176\u4e2dA\u662f\u6e90\u5c5e\u6027\uff0cB\u662f\u76ee\u6807\u5c5e\u6027\u3002\u90a3\u4e48\u8ba1\u7b97\u8fc7\u7a0b\u5c31\u8981\u83b7\u5f97A\u7684\u706b\u5c5e\u6027\u4f24\u5bb3\uff0c\u548cB\u7684\u706b\u5c5e\u6027\u9632\u5fa1\u3002</p>"},{"location":"GAS/6GE_Calculation/#_3","title":"\u5b9e\u9645\u6837\u5b50","text":"<p>\u51fa\u4e8e\u6027\u80fd\u8003\u8651\uff0c\u8fd9\u4e2a\u51fd\u6570\u6700\u597d\u4e0d\u8981\u628aA\u548cB\u7684\u6574\u4e2aAttributeSet \u4f20\u8fdb\u6765\u3002 \u6240\u4ee5\uff0c\u8fd9\u4e2a\u51fd\u6570\u5e94\u8be5\u662f\u7c7b\u4f3c\u8fd9\u6837\u7684\uff1a <code>GE_FireDamage(FireDamgeFromARef,FireResistanceFromBRef)</code></p> <p>\u8fd9\u91ccFireDamgeFromARef\u7684\u5f62\u5f0f\uff0c\u5c31\u7c7b\u4f3c\u201c\u6355\u83b7\u201d\u3002\u4e5f\u53ef\u4ee5\u7406\u89e3\u6210\u8def\u5f84\u3002</p>"},{"location":"GAS/6GE_Calculation/#ue","title":"UE\u91cc\u5b9e\u73b0\u7684\u6355\u83b7","text":"<p>\u7531\u4e8e\u4e0d\u60f3\u64cd\u4f5c\u6574\u4e2aAttributeSet\uff0c\u6240\u4ee5\u5c31\u5f97\u77e5\u9053\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u7528\u5230\u54ea\u4e9b\u5c5e\u6027\uff0c\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u8bfb\u53d6\u51fa\u6765\uff0c\u4f9b\u540e\u7eed\u53bb\u4f7f\u7528\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u53eb\u505a\u6355\u83b7\u3002</p> <p>\u5148\u770b\u6837\u4f8b\u4ee3\u7801 </p><pre><code>    VigorDef.AttributeToCapture = UAuraAttributeSet::GetVigorAttribute();\n    VigorDef.AttributeSource = EGameplayEffectAttributeCaptureSource::Target;\n    VigorDef.bSnapshot = false;\n\n    RelevantAttributesToCapture.Add(VigorDef);\n</code></pre> VigorDef\u662f\u4e00\u4e2a<code>FGameplayEffectAttributeCaptureDefinition</code>"},{"location":"GAS/6GE_Calculation/#fgameplayeffectattributecapturedefinition","title":"FGameplayEffectAttributeCaptureDefinition","text":"<p>\u7528\u4e8e\u63cf\u8ff0GAS\u5c5e\u6027\u6355\u83b7\u5b9a\u4e49\uff0c\u5305\u542b\u6355\u83b7\u6e90\u548c\u76ee\u6807\u5c5e\u6027\uff0c\u4ee5\u53ca\u662f\u5426\u4f7f\u7528\u5feb\u7167\u3002 </p><pre><code>    /** Gameplay attribute to capture */\n    UPROPERTY(EditDefaultsOnly, Category=Capture)\n    FGameplayAttribute AttributeToCapture;\n\n    /** Source of the gameplay attribute */\n    UPROPERTY(EditDefaultsOnly, Category=Capture)\n    EGameplayEffectAttributeCaptureSource AttributeSource;\n\n    /** Whether the attribute should be snapshotted or not */\n    UPROPERTY(EditDefaultsOnly, Category=Capture)\n    bool bSnapshot;\n</code></pre>"},{"location":"GAS/6GE_Calculation/#snapshot","title":"\u5feb\u7167\uff08Snapshot\uff09\u7684\u6982\u5ff5\uff1a","text":"<p>\u5feb\u7167\u51b3\u5b9a\u4e86\u6211\u4eec\u662f\u4f7f\u7528\u6548\u679c\u5e94\u7528\u65f6\u7684\u5c5e\u6027\u503c\uff0c\u8fd8\u662f\u968f\u65f6\u95f4\u53d8\u5316\u7684\u5f53\u524d\u503c\u3002\u5c31\u662f\u8bf4\uff1a\u6355\u83b7\u7684\u5c5e\u6027\u503c\u662f\u5426\u201c\u5b9a\u683c\u201d\u5728\u7834\u83b7\u65f6\u90a3\u4e00\u523b\u3002</p> <p>for example:</p> <p>\u60f3\u8c61\u4e00\u4e2a\u89d2\u8272\u6709\u4e00\u4e2a\"\u529b\u91cf\"\u5c5e\u6027\uff0c\u521d\u59cb\u503c\u4e3a10\u3002\u73b0\u5728\u6211\u4eec\u8981\u521b\u5efa\u4e00\u4e2a\u6301\u7eed30\u79d2\u7684\u589e\u5f3a\u6548\u679c\uff0c\u589e\u52a0\u8be5\u89d2\u827250%\u7684\u4f24\u5bb3\u3002</p> <ul> <li> <p>\u60c5\u51b51\uff1a\u4e0d\u4f7f\u7528\u5feb\u7167\uff08bSnapshot = false\uff09</p> <p>\u6548\u679c\u5f00\u59cb\u65f6\uff0c\u89d2\u8272\u529b\u91cf\u4e3a10\uff0c\u4f24\u5bb3\u589e\u52a050%\uff0c\u537315\u3002 \u5982\u679c\u5728\u6548\u679c\u6301\u7eed\u671f\u95f4\uff0c\u89d2\u8272\u7684\u529b\u91cf\u63d0\u5347\u523020\uff0c\u4f24\u5bb3\u4f1a\u968f\u4e4b\u589e\u52a0\u523030\u3002 \u6548\u679c\u4f1a\u59cb\u7ec8\u4f7f\u7528\u5f53\u524d\u7684\u529b\u91cf\u503c\u6765\u8ba1\u7b97\u4f24\u5bb3\u3002</p> </li> <li> <p>\u60c5\u51b52\uff1a\u4f7f\u7528\u5feb\u7167\uff08bSnapshot = true\uff09</p> <p>\u6548\u679c\u5f00\u59cb\u65f6\uff0c\u89d2\u8272\u529b\u91cf\u4e3a10\uff0c\u4f24\u5bb3\u589e\u52a050%\uff0c\u537315\u3002 \u5373\u4f7f\u5728\u6548\u679c\u6301\u7eed\u671f\u95f4\u89d2\u8272\u7684\u529b\u91cf\u63d0\u5347\u523020\uff0c\u4f24\u5bb3\u4ecd\u7136\u4fdd\u6301\u572815\u3002 \u6548\u679c\u4f1a\u4f7f\u7528\u5e94\u7528\u65f6\u6355\u83b7\u7684\u529b\u91cf\u503c\uff0810\uff09\u6765\u8ba1\u7b97\u4f24\u5bb3\uff0c\u4e0d\u53d7\u540e\u7eed\u529b\u91cf\u53d8\u5316\u7684\u5f71\u54cd\u3002</p> </li> </ul>"},{"location":"GAS/6GE_Calculation/#uattributesetgetxxxattribute","title":"UAttributeSet::GetXXXAttribute()","text":"<p>GetXXXAttribute \u5b9e\u9645\u4e0a\u8fd4\u56de\u7684 FProperty\u6307\u9488\uff0c\u662fUE\u53cd\u5c04\u673a\u5236\u91cc\u7684 \u5bf9\u8c61\u5b57\u6bb5\u5143\u6570\u636e\u3002 \u4f8b\u5b50\u91cc<code>VigorDef.AttributeToCapture = UAuraAttributeSet::GetVigorAttribute();</code>\u8fd9\u4e2a\u8d4b\u503c\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u7684\u8c03\u7528\u4e86<code>FGameplayAttribute(FProperty *NewProperty)</code>\u6784\u9020\u51fd\u6570\u3002</p> <p>Def\u91cc\u9762\u6709\u4e86\u8fd9\u4e2a\u5143\u6570\u636e\uff0c\u5c31\u76f8\u5f53\u4e8e\u77e5\u9053\u4e86\u8be5\u5b57\u6bb5\u7684\u201c\u8def\u5f84\u201d\u3002\u53ef\u5728\u540e\u7eed\u62ff\u5230\u76f8\u5e94\u7684AttributeSet\u5b9e\u4f8b\u540e\uff0c\u6839\u636e\u7406\u89e3\u67e5\u627e\u5230\u60f3\u8981\u7684\u503c\u3002</p>"},{"location":"GAS/6GE_Calculation/#def","title":"\u5982\u4f55\u521b\u5efa Def","text":"<p>\u9664\u4e86\u4e0a\u9762\u7684\u624b\u52a8\u521b\u5efa\uff0c\u5f15\u64ce\u8fd8\u63d0\u4f9b\u4e86\u76f8\u5173\u7684\u5b8f\uff1a </p><pre><code>// -------------------------------------------------------------------------\n//  Helper macros for declaring attribute captures \n// -------------------------------------------------------------------------\n\n#define DECLARE_ATTRIBUTE_CAPTUREDEF(P) \\\n    FProperty* P##Property; \\\n    FGameplayEffectAttributeCaptureDefinition P##Def; \\\n\n#define DEFINE_ATTRIBUTE_CAPTUREDEF(S, P, T, B) \\\n{ \\\n    P##Property = FindFieldChecked&lt;FProperty&gt;(S::StaticClass(), GET_MEMBER_NAME_CHECKED(S, P)); \\\n    P##Def = FGameplayEffectAttributeCaptureDefinition(P##Property, EGameplayEffectAttributeCaptureSource::T, B); \\\n}\n\n// \u4f7f\u7528\nDECLARE_ATTRIBUTE_CAPTUREDEF(ResistanceFire);\nDEFINE_ATTRIBUTE_CAPTUREDEF(UAuraAttributeSet, ResistanceFire, Target, false);\n</code></pre>"},{"location":"GAS/6GE_Calculation/#attributetocapture","title":"\u662f\u600e\u4e48\u6839\u636eAttributeToCapture \u6765\u6355\u83b7\u503c\u7684\uff1f","text":"<p>AttributeToCapture \u662fFGameplayAttribute\uff0c\u662f\u6211\u4eec\u5b9a\u4e49 AttributeSet\u65f6\u7684\u6700\u5c0f\u5355\u5143\u3002</p>"},{"location":"GAS/6GE_Calculation/#fgameplayattribute-fgameplayattributedata","title":"FGameplayAttribute \u548c FGameplayAttributeData","text":"<p>\u901a\u8fc7\u4e0a\u8ff0\u5206\u6790\uff0c\u5b9e\u9645\u4e0a FGameplayAttribute\u4e5f\u53ea\u662f\u5305\u88c5\u4e86FProperty\u6307\u9488\u800c\u5df2\uff0c\u5185\u90e8\u5b57\u6bb5\u5e76\u6ca1\u6709\u5305\u542b\u771f\u6b63\u7684\u5c5e\u6027\u503c\u3002\u67e5\u770b\u6e90\u7801\u53d1\u73b0FGameplayAttributeData \u624d\u662f\u771f\u6b63\u7684\u5c5e\u6027\u503c\u3002</p> <p>\u8be5\u51fd\u6570\u901a\u8fc7\u53cd\u5c04\u673a\u5236\uff0c\u5f88\u795e\u5947\u5730\u53d8\u6210\u4e86FGameplayAttributeData\uff0c\u91cc\u9762\u7684baseValeu\u548cCurrentValue\u5c31\u662f\u771f\u6b63\u7684\u503c\u3002 \u8fc7\u7a0b\u8fc7\u4e8e\u590d\u6742\u4e0d\u6562\u518d\u6df1\u7a76\uff0c\u4e86\u89e3\u5373\u53ef\u3002 </p><pre><code>const FGameplayAttributeData* FGameplayAttribute::GetGameplayAttributeData(const UAttributeSet* Src) const\n{\n    if (Src &amp;&amp; IsGameplayAttributeDataProperty(Attribute.Get()))\n    {\n        FStructProperty* StructProperty = CastField&lt;FStructProperty&gt;(Attribute.Get());\n        check(StructProperty);\n        MARK_PROPERTY_DIRTY(Src, StructProperty);\n        return StructProperty-&gt;ContainerPtrToValuePtr&lt;FGameplayAttributeData&gt;(Src);\n    }\n\n    return nullptr;\n}\n</code></pre> \u603b\u5f97\u6765\u8bf4\uff0c<code>AttributeToCapture</code> \u662f\u4e00\u4e2a\u5305\u88c5\u4e86 <code>FProperty</code> \u6307\u9488\u7684 <code>FGameplayAttribute</code>\uff0c\u5b83\u63cf\u8ff0\u4e86\u5c5e\u6027\u7684\u5143\u6570\u636e\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u901a\u8fc7 <code>Spec</code> \u627e\u5230\u5177\u4f53\u7684 <code>AttributeSet</code> \u5b9e\u4f8b\uff0c\u7136\u540e\u6839\u636e <code>FProperty</code> \u6307\u9488\uff0c\u4ece <code>AttributeSet</code> \u5b9e\u4f8b\u4e2d\u67e5\u627e\u5e76\u83b7\u53d6\u5c5e\u6027\u7684\u5b9e\u9645\u503c\u3002"},{"location":"PCG/00/","title":"FYI","text":""},{"location":"PCG/00/#pcg-startup-link","title":"PCG Startup Link","text":"<p>Amathlog</p> <p>Amathlog github</p> <p>Basic (Bilibili,\u831c\u7199xixi)</p> <p>Advance(Procedural Minds) </p>"},{"location":"PCG/00/#my-pcg-show-cases","title":"My PCG Show Cases:","text":""},{"location":"PCG/00/#pcg-dungeon","title":"PCG Dungeon","text":""},{"location":"PCG/00/#pcg-markov-maze","title":"PCG Markov Maze","text":""},{"location":"PCG/UE5.4PCGWithCPP/","title":"A Brief Analysis of Common C++ Classes for Custom Nodes in UE5.4 PCG","text":""},{"location":"PCG/UE5.4PCGWithCPP/#upcgdata","title":"UPCGData","text":"<ul> <li>Equivalent to the \"UObject\" of PCG, most PCG classes are derived from it.</li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#fpcgpoint","title":"FPCGPoint","text":"<ul> <li>The meta-structure of a PCG point, representing the point information displayed during blueprint debugging, such as Position, Density, Bound, etc.</li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#fpcgcontext","title":"FPCGContext","text":"<ul> <li>The context during execution (the number of connections can be obtained through it).</li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#upcgsettings","title":"UPCGSettings","text":"<ul> <li>Most PCG nodes come with UPCGSettings. Custom nodes also inherit this class, which is a wrapper for the entire node configuration and is used to generate IPCGElement, the nodes we see in the blueprint. Execution is done through IPCGElement::Execute, which calls the <code>UPCGSettings::ExecuteInternal</code> method. <code>ExecuteInternal</code> is where we write our custom logic.</li> <li>Custom variables are written here, so they can be configured in the graph node.</li> <li>This class also derives from UPCGData.</li> <li> <p>Two important structures are used in Settings:</p> </li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#fpcgpinproperties","title":"FPCGPinProperties","text":"<ul> <li>The property class for pins, used to describe the attributes of Input/Output pins of UPCGSettings, such as whether they are advanced, whether they are required (EPCGPinStatus::Required), etc.</li> <li>The data type that the pin accepts is configured using EPCGDataType, with the most common types being Point and Param. Param corresponds to the Attribute Set type in blueprints.</li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#fpcgtaggeddata","title":"FPCGTaggedData","text":"<ul> <li>The data class for pins, used to describe the data of the pins. When executed, it is necessary to obtain the incoming data from FPCGContext. \"The number of connections corresponds to the number of FPCGTaggedData.\"</li> <li>There is a data field <code>TObjectPtr&lt;const UPCGData&gt; Data</code>, which can be cast to the desired derived class as needed.</li> <li>To link input data, use <code>Outputs.Add_GetRef(Input)</code>:     <pre><code>// Step 1: Obtain Outputs from the execution context\nTArray&lt;FPCGTaggedData&gt;&amp; Outputs = Context-&gt;OutputData.TaggedData;\n// Step 2: Link Input\nFPCGTaggedData&amp; ChosenTaggedData = Outputs.Add_GetRef(Input);\n// Step 3: Complete configuration\nChosenTaggedData.Data = ChosenPointsData;\nChosenTaggedData.Pin = PCGRandomChoiceSettings::ChosenPointsLabel;\n</code></pre></li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#upcgpointdata","title":"UPCGPointData","text":"<ul> <li>A wrapper class for the Point type, inheriting from UPCGData, and encapsulating FPCGPoint.</li> <li>One of the data type options for FPCGTaggedData.</li> <li>After creation, it usually needs to be initialized from the Input PointData, as the incoming PointData contains some context that should not be lost:     <pre><code>UPCGPointData* ChosenPointsData = NewObject&lt;UPCGPointData&gt;();\nChosenPointsData-&gt;InitializeFromData(PointData);\nTArray&lt;FPCGPoint&gt;&amp; ChosenPoints = ChosenPointsData-&gt;GetMutablePoints();\n// Reserve memory space\nChosenPoints.Reserve(NumberOfElementsToKeep);\n</code></pre></li> </ul>"},{"location":"PCG/UE5.4PCGWithCPP/#upcgparamdata","title":"UPCGParamData","text":"<ul> <li>The Attribute Set type in blueprints, and another data type option for FPCGTaggedData.</li> <li>Example code for creating an int32 type, resembling a Key-Value structure:     <pre><code>// Create Attribute set\nUPCGParamData* ParamData = NewObject&lt;UPCGParamData&gt;();\n// Create an int32 attribute\nFPCGMetadataAttribute&lt;int32&gt;* Attribute = ParamData-&gt;Metadata-&gt;CreateAttribute&lt;int32&gt;(TEXT(\"ChosenPointsNum\"), NumberOfElementsToKeep, true, true);\n// Assign value\nAttribute-&gt;SetValue(ParamData-&gt;Metadata-&gt;AddEntry(), NumberOfElementsToKeep);\n</code></pre></li> </ul>"},{"location":"Tools/00/","title":"FYI","text":"<p>Some Tools </p> <ul> <li> <p>BPCorruptionFix Sometimes BPs get corrupted, due to Actor Component changes. Their type, their name, declaring them with the wrong properties, saving information about them inside of BPs \u2026 there are a number of ways this can happen.</p> </li> <li> <p>awesome-unreal Some Unreal Engine  Tools</p> </li> <li> <p>blueprint Online</p> </li> <li> <p>FlowGraph  Design-agnostic node system for scripting game\u2019s flow in Unreal Engine</p> </li> <li> <p>TurboSequence Skeletal Based GPU Crowds for UE5 \ud83d\ude80</p> </li> <li> <p>mixamo_converter Blender addon for converting mixamo animations to Unreal 4 rootmotion</p> </li> <li> <p>PythonSamples  contains some python samples to script the editor in Unreal Engine.</p> </li> <li> <p>UnrealEditorPythonScripts Some of my personal scripts i made to use for my own projects</p> </li> <li> <p>NiagaraUIRenderer Niagara UI Renderer | Free Plugin for Unreal Engine</p> </li> <li> <p>spine-runtimes Spine \u662f\u4e00\u6b3e\u9488\u5bf9\u6e38\u620f\u5f00\u53d1\u7684 2D \u9aa8\u9abc\u52a8\u753b\u7f16\u8f91\u5de5\u5177, \u652f\u6301\u865a\u5e7b\u3002</p> </li> <li> <p>MeshWidgetExample SMeshWidget Example</p> </li> <li> <p>ALSXT Advanced Locomotion System Refactored with expanded Character States, Improved Foot Print system, Sliding, Vaulting and Wallrunning(XT)</p> </li> <li> <p>UINavigation A UE4/5 plugin designed to help easily make UMG menus navigated by mouse, keyboard and gamepad</p> </li> <li> <p>UE-BYGRichText Rich text library supporting customizable Markdown formatting</p> </li> <li> <p>ElementUI-UMG-Kit An easy way to change the style of your elements that extends beyond the default ones the Common UI provides.</p> </li> <li> <p>VaRest REST API plugin for Unreal Engine 4 - we love restfull backend and JSON communications!</p> </li> <li> <p>MassSample understanding of Unreal Engine 5's experimental ECS plugin with a small sample project.</p> </li> <li> <p>ComfyTextures Unreal Engine \u2694\ufe0f ComfyUI - Automatic texturing using generative diffusion models</p> </li> <li> <p>SPUD SPUD is a save game and streaming level persistence solution for Unreal Engine 5.</p> </li> <li> <p>AdvancedUI Unreal Engine 5 Advanced UI Editor. it to start working This Unreal Engine Plugin allows setting a custom and persistent UI scale for the editor as well as allowing you to disable Slate UI tooltips in the editor (probably only useful for Linux).</p> </li> </ul>"},{"location":"Tools/01EditorModule/","title":"Auto Created Cooldown GE","text":"<p>Most skill cooldowns are quite simple to configure, and I don't want to manually create a separate GE for every simple case. Therefore, I wrote an asset action to automate the creation process.</p> <p>The code is about 200 lines long and can serve as a template for other actions. Throughout this process, I learned a lot, and I will provide the complete code for this tools, hoping it will help you as well.</p> <p></p>"},{"location":"Tools/01EditorModule/#idea","title":"Idea","text":"<p>Note</p> <p>Previous experience has shown that it's best not to dynamically create GE at runtime, so I opted to create them directly using Asset Action.</p> <p>In the Gameplay Ability, define a cooldown time field, then right-click to find a custom action to automatically create a GE. In addition to creating the GE itself, a corresponding cooldown tag will also be created.</p>"},{"location":"Tools/01EditorModule/#editor-module","title":"Editor Module","text":"<p>Since asset operations are frequent, this belongs to the Editor Module, so we need to create an Editor Module first.</p> <ul> <li> <p>Using Rider can greatly assist us in creating this.   </p> </li> <li> <p>Add dependencies.   </p> </li> </ul>"},{"location":"Tools/01EditorModule/#custom-assetdefinition","title":"Custom AssetDefinition","text":"<p>Originally, I used <code>UAssetDefinitionDefault</code> to implement the asset action, but comments indicated that this class is deprecated, and we need to use <code>AssetDefinition</code>.</p> <p>At first, I directly used <code>UGameplayAbility</code> to create the AssetDefinition, but I found that <code>UGameplayAbility</code> is actually a blueprint asset, and blueprint assets are already implemented internally by the engine. Creating my own would override the internal implementation, which complicates things. Fortunately, I saw internal examples indicating that an AssetDefinition does not necessarily need to be implemented. You can refer to the implementation of [GameplayAbilityAudit].</p>"},{"location":"Tools/01EditorModule/#custom-menuextension_xxx","title":"Custom MenuExtension_xxx","text":"<p><code>namespace MenuExtension_YourActions</code></p> <p>In this namespace, you only need to implement a method called Delayed Registration.</p> <p><code>static FDelayedAutoRegisterHelper DelayedAutoRegister(EDelayedRegisterRunPhase::EndOfEngineInit, []</code></p>"},{"location":"Tools/01EditorModule/#implementation-details","title":"Implementation Details","text":"<p>There are two main details: - Creating the GE blueprint asset. - Creating a GameplayTag and saving it to an .ini file.</p>"},{"location":"Tools/01EditorModule/#creating-ge","title":"Creating GE","text":"<pre><code>FAssetToolsModule&amp; AssetToolsModule = FModuleManager::GetModuleChecked&lt;FAssetToolsModule&gt;(\"AssetTools\");\n</code></pre> <p>First, obtain the AssetToolsModule.</p> <pre><code>UBlueprintFactory* BlueprintFactory = NewObject&lt;UBlueprintFactory&gt;();\nBlueprintFactory-&gt;ParentClass = UGameplayEffect::StaticClass();\n// do not use GE directly\n// UGameplayEffect* NewGE = Cast&lt;UGameplayEffect&gt;(AssetToolsModule.Get().CreateAsset(CooldownGEName, NewGEPath, UGameplayEffect::StaticClass(), nullptr));\nUObject* CreatedAsset = AssetToolsModule.Get().CreateAsset(CooldownGEName, NewGEPath, UBlueprint::StaticClass(), BlueprintFactory);\n</code></pre> <p>Create the GE blueprint asset; here, you need to use <code>BlueprintFactory</code> instead of directly using <code>UGameplayEffect</code>. Otherwise, you'll only get the default type of <code>UGameplayEffect</code> instead of its blueprint asset.</p> <pre><code>// GE Blueprint Asset Class\nUClass* GeneratedClass = GE_Blueprint-&gt;GeneratedClass;\n// use the CDO, not New Object\nUGameplayEffect* NewGE = Cast&lt;UGameplayEffect&gt;(GeneratedClass-&gt;GetDefaultObject());\n</code></pre> <p>Next, obtain the <code>GeneratedClass</code> from the blueprint and its CDO to assign values to it using code.</p>"},{"location":"Tools/01EditorModule/#creating-gameplaytag","title":"Creating GameplayTag","text":"<p>You need to use <code>IGameplayTagsEditorModule</code>, so you must add dependencies. The usage is quite simple:</p> <ul> <li>Check if the project allows creating GameplayTags via ini files.     <pre><code>const UGameplayTagsManager&amp; Manager = UGameplayTagsManager::Get();\n// Only support adding tags via ini file\nif (Manager.ShouldImportTagsFromINI() == false)\n{\n    return;\n}\n</code></pre></li> <li>Create a GameplayTag, with the default filename temporarily set to <code>DefaultGameplayTags.ini</code>.     <pre><code>const TSharedPtr&lt;FGameplayTagNode&gt; TagNode = Manager.FindTagNode(CooldownTagName);\nif (!TagNode.IsValid())\n{\n    const FString TagComment = FString::Format(TEXT(\"Auto Gen Cooldown Tag for {0}\"), {TagName});\n    IGameplayTagsEditorModule::Get().AddNewGameplayTagToINI(TagName, TagComment, DefaultTagINI);\n}\n</code></pre></li> </ul>"},{"location":"Tools/01EditorModule/#complete-code","title":"Complete Code","text":"<p>GamePlayAbilityGenCooldownGE</p>"},{"location":"Tools/01EditorModule/#other-attempts","title":"Other Attempts","text":""},{"location":"Tools/01EditorModule/#blueprint-editor-script","title":"Blueprint Editor Script","text":"<p>I can create a GE asset file, but I have not yet found a way to assign values. I don\u2019t know how to use Set Editor Property; if anyone knows, please leave a comment.</p> <p></p>"},{"location":"UI/00/","title":"FYI","text":""},{"location":"UI/00/#umg-slate","title":"UMG- Slate","text":"<ul> <li> <p>UMG documents: https://github.com/YawLighthouse/UMG-Slate-Compendium</p> </li> <li> <p>quabqi \u5927\u4f6c\u7684UI\u4f18\u5316\uff0c\u63a8\u8350\u89c2\u770b https://github.com/quabqi/UITest https://www.bilibili.com/video/BV1Wt4y1N7qg/</p> </li> </ul>"},{"location":"UI/00/#commomui-startup-link","title":"CommomUI Startup Link:","text":"<p>After researching for these few days, it's best not to use CommonUI unless you have a strong ability to read source code, especially if you are not making a game similar to Lyra.</p>"},{"location":"UI/00/#common-ui-doc","title":"Common UI Doc:","text":"<p>https://dev.epicgames.com/documentation/en-us/unreal-engine/common-ui-plugin-for-advanced-user-interfaces-in-unreal-engine </p> <p>Input Technical Guide C++ recommend</p> <p>https://dev.epicgames.com/documentation/en-us/unreal-engine/commonui-input-technical-guide-for-unreal-engine#changehowwidgetsrespondtoinput</p>"},{"location":"UI/00/#nance","title":"Nance","text":"<p>a little project shows how to setup Common UI </p> <p>select branch 5.3-EnhanceInput, Nance will tell you how to setup enhanced input with CommonUI, and how Lyra using CommonUI.</p> <p>https://github.com/NanceDevDiaries/PauseMenu </p>"},{"location":"UI/00/#x157-commonui","title":"x157 CommonUI","text":"<p>x157 will tell us why we should not using <code>setInputMode</code> When we using CommonUI</p> <p>https://x157.github.io/UE5/CommonUI/</p>"},{"location":"UI/00/#unrealist","title":"Unrealist","text":"<p>how to using Actionbar</p> <p>https://unrealist.org/commonui-actionbar/</p>"},{"location":"UI/00/#benui","title":"Benui","text":"<p>intro common ui</p> <p>https://benui.ca/unreal/common-ui-intro/</p>"},{"location":"UI/00/#how-epic-team-using-widgets","title":"How Epic team using widgets","text":"<p>Stephen(GAS Course Teacher) mentions a talk about Advanced UI Templating Techniques (this not common ui, but help us to know best way to handle widgets.)</p> <p>https://www.youtube.com/watch?v=dSTdAToJ7Gg</p>"},{"location":"UI/00/#alternative","title":"Alternative","text":"<p>free plugin: Ui-navigation3</p>"},{"location":"UI/WidgetPool/","title":"Using Engine built-in Widget Pool","text":"<p>Note</p> <p>this post is base on Aura GAS Course</p> <p></p> <p>I found a built-in widget pool in the UE source code, so I think we can use it for the Aura Damage Floating Text. Because in some scenarios, characters may create a lot of floating widgets and then just remove them, which could cause a slight performance loss.</p> <p>\uff08Widget pool may offer minimal performance improvement, making it challenging to provide a quantitative comparison. Please carefully consider whether you need to utilize it.\uff09</p>"},{"location":"UI/WidgetPool/#scenario","title":"Scenario","text":"<p>Too many floating texts are being created and destroyed at the same time.</p> <p></p>"},{"location":"UI/WidgetPool/#main-functions","title":"Main Functions","text":"<p>DynamicEntryBox(5.2-5.4)</p> <pre><code>UUserWidget* NewEntryWidget = EntryWidgetPool.GetOrCreateInstance(InEntryClass);\n</code></pre> <p>This is a piece of code from UDynamicEntryBox, showing us how to use a widget pool. We can use UDynamicEntryBox in Blueprint directly, without writing any C++. UDynamicEntryBox provides these two main functions to create and release widget entities:</p> <ul> <li>BP_CreateEntry: Retrieves or creates a widget entity.     <pre><code>    UFUNCTION(BlueprintCallable, Category = DynamicEntryBox, meta = (DisplayName = \"Create Entry\", AllowPrivateAccess = true))\n    UMG_API UUserWidget* BP_CreateEntry();\n</code></pre></li> <li>RemoveEntry: Releases the entity when not in use, removes it from the parent, but caches it for re-use.     <pre><code>    UFUNCTION(BlueprintCallable, Category = DynamicEntryBox)\n    UMG_API void RemoveEntry(UUserWidget* EntryWidget);\n</code></pre></li> </ul>"},{"location":"UI/WidgetPool/#blueprint","title":"Blueprint","text":"<ul> <li> <p>create a UserWdiget, place a DynamicEntryWidget </p> </li> <li> <p>set the box type to overlay </p> </li> <li>set the aura floating text widget class </li> </ul>"},{"location":"UI/WidgetPool/#cpp","title":"CPP","text":"<ul> <li> <p>Update AuraPlayerController, Update AuraPlayerController, no need to create and remove WidgetComponent anymore. </p> </li> <li> <p>Since it's difficult to notify DynamicBox to release the widget after the animation ends in Blueprint, I tried but found it challenging, so I switched to implementing it in C++ . I Update UDamageTextComponent like so:     Make sure the log doesn't keep increasing in size. If it does, then the configuration is correct. Otherwise, it means new entries are being created continuously.</p> </li> <li> <p>Attention, the instances of DynamicBox will be automatically destroyed when the reference count drops to 0 upon the death of the character. If you have other references to the floating widget elsewhere, you may need to manually clean them up.</p> </li> </ul>"},{"location":"UI/WidgetPool/#usage","title":"Usage","text":""},{"location":"UI/WidgetPool/#other","title":"Other","text":"<p>The DynamicBox has some other interesting features, such as radial. </p>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/","title":"How to Setup CommonUI in UE5.4.2 with enhanced input","text":"<p>So far, the documentation for commonUI is very basic and doesn't clearly tell us how to configure it correctly. It took me a long time to figure it out, so I'm going to record the main process here.</p>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#concept-of-activation","title":"Concept of Activation","text":"<p>An Activatable Widget is an important concept in Common UI. It can be simply understood that once activated, it will be displayed, and deactivated means hidden. Additionally:</p> <ul> <li>Once an activatable widget is activated, it will take over the Input Action, similar to manually calling <code>setInputMode</code> in UE4. This can cause conflicts, and it is not recommended to use the old method in CommonUI. I have tried this, and it led to various issues with Mouse Capture.</li> <li>Taking over input action is a thoughtful design because many games need to show the mouse once the menu is displayed. We only need to override GetDesiredInputConfig to decide the various behaviors of the mouse and controls.</li> <li>Therefore, we need to configure the default InputAction of the game on a resident HUD and abandon the use of UE4's <code>setInputMode</code>.</li> </ul>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#concept-of-stack","title":"Concept of Stack","text":"<p>Similar to mobile apps, the stack in CommonUI is the effect of stacking interfaces layer by layer as you enter them, and you can go back layer by layer through the back button.</p> <ul> <li>You can create this UCommonActivatableWidgetStack in Blueprint or C++ and set the width and height to fill the screen.</li> <li>With this stack, the activatable widget can be added into it. Once added, it will be displayed immediately, similar to Android's startActivity.</li> <li>You can use a RootLayout to manage the stack. A RootLayout can have multiple stacks. The Lyra project uses two: MenuStack and GameStack.</li> <li>The Game Stack is the game's resident HUD.</li> <li>The Menu Stack is the stack into which various menus are added.</li> <li>Pay attention to the stacking order between stacks. It's best to place the Menu above the Game.</li> <li>There is no good communication method between stacks. For example, when the Menu Stack is empty, meaning no menus are displayed on the screen, I want to notify the activated widget in the GameStack to react, such as playing a restore animation. CommonUI does not provide a ready-made method for this. If you know how, please be sure to let me know.</li> <li>Code example: You can use Blueprint, but I find C++ more convenient. I also did some hack operations to notify the default widget in the GameStack that the MenuStack has been emptied.    YouHUD.cpp<pre><code>    void YouHUD::InitHudWidgets(UAttributeSet* AS, UAbilitySystemComponent* ASC, APlayerState* PS, APlayerController* PC)\n {\n     checkf(OverlayWidgetClass, TEXT(\"please initial a OverlayWidgetClass\"));\n     checkf(OverLayWidgetControllerClass, TEXT(\"please initial a WidgetControllerClass\"));\n     checkf(MenuWidgetControllerClass, TEXT(\"please initial a MenuWidgetControllerClass\"));\n     UUserWidget* RootLayout = CreateWidget&lt;UUserWidget&gt;(GetWorld(), UCommonUserWidget::StaticClass());\n\n     UOverlay* OverLay = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UOverlay&gt;(UOverlay::StaticClass(), TEXT(\"Overlay\"));\n     // TSharedRef&lt;SOverlay&gt; RootLayout = SNew(SOverlay);\n     RootLayout-&gt;WidgetTree-&gt;RootWidget = OverLay;\n\n     GameLayerStack = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UCommonActivatableWidgetStack&gt;(UCommonActivatableWidgetStack::StaticClass(), TEXT(\"GameLayerStack\"));\n     MenuLayerStack = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UCommonActivatableWidgetStack&gt;(UCommonActivatableWidgetStack::StaticClass(), TEXT(\"MenuLayerStack\"));\n\n\n     OverLay-&gt;AddChild(GameLayerStack);\n     OverLay-&gt;AddChild(MenuLayerStack);\n\n     // set horizontal alignment and vertical alignment\n     const auto GameBoxSlot = Cast&lt;UOverlaySlot&gt;(GameLayerStack-&gt;Slot);\n     GameBoxSlot-&gt;SetHorizontalAlignment(HAlign_Fill);\n     GameBoxSlot-&gt;SetVerticalAlignment(VAlign_Fill);\n\n     const auto MenuBoxSlot = Cast&lt;UOverlaySlot&gt;(MenuLayerStack-&gt;Slot);\n     MenuBoxSlot-&gt;SetHorizontalAlignment(HAlign_Fill);\n     MenuBoxSlot-&gt;SetVerticalAlignment(VAlign_Fill);\n\n     RootLayout-&gt;AddToViewport();\n\n     // set up overlay widget\n     OverlayWidget = CreateWidget&lt;UAuraActivatableWidget&gt;(GetWorld(), OverlayWidgetClass);\n     UAuraWidgetController* OverLayWidController = GetWidgetController&lt;UAuraOverlayWidgetController&gt;(FAuraWidgetControllerParma(AS, ASC, PS, PC));\n     OverlayWidget-&gt;SetWidgetController(OverLayWidController);\n     // OverlayWidget-&gt;AddToViewport();\n     GameLayerStack-&gt;AddWidgetInstance(*OverlayWidget);\n\n     MenuLayerStack-&gt;OnDisplayedWidgetChanged().AddLambda([this](UCommonActivatableWidget* DisplayedWidget)\n     {\n         if (DisplayedWidget == nullptr)\n         {\n             OverlayWidget-&gt;OnMenuEmpty();\n         }\n     });\n\n     // set up menu widget\n     OverLayWidController-&gt;BroadcastInitialValue();\n }\n</code></pre></li> </ul>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#prerequisites","title":"Prerequisites","text":"<p>some config if not setup correctly, it will not work.</p> <ul> <li>Player Controller: Make sure \"Block Input\" is unchecked. </li> <li>Create a HUD or Menu widget derived from CommonActivatable Widget.</li> <li>Ensure that your HUD or Menu Widget set \"supports Activation Focus\" to true.   </li> <li>Create a specific UI InputConfig for your menu widget. Avoid using <code>Setup Input Mode Game &amp; UI</code> as it is not suitable for CommonUI!   </li> <li>If your game is a TopDown Game and you want to retain Mouse Capture, in your HUD Widget, set the input config Mouse Capture Mode to \"Capture Permanently including Initial Mouse Down.\" Otherwise, your game will require a double-click to trigger a single mouse click.   </li> </ul>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#enhanced-input-and-automatic-button-icon-display","title":"Enhanced Input and Automatic Button Icon Display","text":"<ul> <li> <p>In <code>Game-&gt;CommonInputSetting</code>, add your platform icon data and set \"Enable Enhanced Input Support\" to true.</p> <p></p> </li> <li> <p>Create a <code>CommonBaseButton</code>, place a <code>CommonActionWidget</code> inside it, and rename it to <code>InputActionWidget</code>. It must be named this way, otherwise it will not display.</p> </li> <li> <p>Configure the <code>CommonBaseButton</code> input action, setting an <code>InputAction</code> for it. Here, an 'E' key is set, and the <code>CommonActionWidget</code> inside the button will display the corresponding icon.   </p> </li> <li> <p>If no <code>InputAction</code> is specified for the above <code>CommonBaseButton</code>, the system will automatically set the relevant action icon based on the platform when it is in focus. For example, the Xbox's down button icon is usually the gamepad face button down, so it will display an 'A' icon.</p> </li> <li>This 'A' icon can be specified through configuring <code>CommonUIInputData</code>.   </li> <li>You can change the <code>ForwardAction</code> from the 'A' button to the 'X' button. However, this only modifies the icon, as the platform still passes the 'A' button's <code>InputAction</code>. Visually, it will show the 'X' icon, but the key binding remains 'A'. I can only consider this a bug. If you know the correct approach, please let me know.</li> </ul>"},{"location":"UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#gamepad-navigation-configuration","title":"Gamepad Navigation Configuration","text":"<p>When using a gamepad, you need to navigate through the menu using the gamepad's directional buttons (up, down, left, right) so that players can select which button to interact with. </p> <p>You only need to override <code>GetDesiredFocusTarget</code> to let the system know which Common BaseButton should be focused by default.</p> <ul> <li>This only works for gamepads; keyboard navigation is very cumbersome now, presumably due to the mouse capture. The Lyra project disables keyboard navigation. If you know simeple way to setup keyboard navigation , please let me konw. :)</li> </ul> <p></p>"},{"location":"UI/CommonUI/01EnhancedInput/","title":"EnhancedInput \u548c commonUI \u914d\u5408\u7684\u6570\u636e\u914d\u7f6e","text":"<p>Warning</p> <p>\u672c\u7bc7\u662f\u8bb0\u5f55\u5411\uff0c\u6ca1\u505a\u9605\u8bfb\u4f18\u5316\uff0c\u6392\u7248\u7684\u65f6\u95f4\u987a\u5e8f\u6709\u70b9\u4e71\uff0c\u614e\u770b\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#turnon","title":"TurnOn","text":"<p> Project-&gt;Game-&gt;Common Input Settings: \u8fd93\u4e2a\u6ca1\u6253\u52fe\u7684\uff1a  - Enable Enhanced Input Support \u5fc5\u987b\u6253\u52fe  - Enable Default InputConfig \u6bcf\u6b21active\uff0c\u5982\u6ca1\u914d\u7f6eInputConfig\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8f93\u5165\u6a21\u5f0f\u7684\u914d\u7f6e\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6700\u597d\u4e0d\u8981\u6253\u52fe\uff0c\u56e0\u4e3a\u6253\u52fe\u540e\uff0c\u6bcf\u6b21\u6253\u5f00\u4e00\u4e2a\u652f\u6301 Activatable \u7684widget\uff0c\u90fd\u4f1a\u8986\u76d6\u4e00\u6b21 InputMode\uff0c\u53ef\u80fd\u5bfc\u81f4\u8f93\u5165\u6df7\u4e71\u3002\u6700\u597d\u81ea\u5df1\u7ba1\u7406\u3002  - Allow Out Of Fucas Device Input \u5b57\u9762\u610f\u601d\uff0c\u611f\u89c9\u6253\u52fe\u6bd4\u8f83\u597d\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#enhancedinput","title":"EnhancedInput","text":"<p>\u84dd\u56fe\u91cc\u6ce8\u518c\u7684EnhancedInput\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u5728 InputMode \u5305\u542b \u201cGame Mode\u201d \u65f6\u751f\u6548\uff0c\u5982\u56fe\uff1a </p> <p>\u5982\u84dd\u56fe\u63d0\u793a\uff0c\u5f53InputMode \u8bbe\u7f6eMenu\u65f6\uff0c\u4e0a\u8ff0EnhancedInput\u5c06\u4e0d\u4f1a\u8c03\u7528\uff0c\u76f4\u5230InputMode \u91cd\u65b0\u5305\u542b \u201cGame\u201d\u3002 \u5229\u7528\u8fd9\u4e2a\u7279\u6027\uff0c\u5c31\u53ef\u4ee5\u5728\u83dc\u5355\u663e\u793a\u7684\u65f6\u5019\uff0c\u5e76\u5c4f\u853d\u6389\u9ed8\u8ba4\u7684\u6e38\u620f Input\u3002 \u88ab\u5c4f\u853d\uff0c\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u652f\u6301 CommonUI \u5bf9EnhancedInput\uff0cCommonUI \u901a\u8fc7\u4e00\u7c7b\u53eb\u505aRegisterUIActionBinding\u7684\u65b9\u6cd5\u6765\u7ed1\u5b9a\u8f93\u5165\u3002</p> <p>Note</p> <p>\u4e0d\u8fc7\uff0c\u8fd9\u4e2a\u884c\u4e3a\uff0c\u5728CommonUI\u52a0\u5165\u8fdb\u6765\uff0c\u662f\u53ef\u4ee5\u4fee\u6539\u7684\uff01\u5373\u4f7f\u662fMenu\u6a21\u5f0f\uff0c\u4f9d\u7136\u89e6\u53d1\u8f93\u5165</p>"},{"location":"UI/CommonUI/01EnhancedInput/#inputaction","title":"InputAction","text":"<p>\u6bcf\u4e2aInputAction\u7684\u914d\u7f6e\u91cc\uff0c\u6709\u4e00\u9879Player Mappable Key Setting. \u8fd9\u662f\u63d0\u4f9b\u7ed9CommonUI\u4fee\u6539\u914d\u7f6e\u7684\u5730\u65b9\u3002</p> <p> \u8fd9\u91cc\u53ef\u4ee5\u914d\u7f6eMetadata\uff0c\u4f5c\u4e3a\u8f93\u5165\u7684\u201c\u5143\u6570\u636e\u201d</p> <p>\u9ed8\u8ba4\u7684\u201c\u5143\u6570\u636e\u201d \u53ea\u6709\u4e24\u4e2a\u5b57\u6bb5\uff0cNavBarPriority \u548c bIsGenericInputAction </p><pre><code>class COMMONUI_API UCommonInputMetadata : public UObject\n{\n    GENERATED_BODY()\n\npublic:\n\n    /** Priority in nav-bar */\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = \"CommonInput\")\n    int32 NavBarPriority = 0;\n\n    /** \n     * Generic actions like accept or face button top will be subscribed to by multiple\n     * UI elements. These actions will not broadcast enhanced input action delegates\n     * such as \"Triggered, Ongoing, Canceled, or Completed.\" Since those delegates\n     * would be fired by multiple UI elements.\n     * \n     * Non-generic input actions will fire Enhanced Input events. However they will \n     * not fire CommonUI action bindings (Since those can be manually fired in BP).\n     */\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = \"CommonInput\")\n    bool bIsGenericInputAction = true;\n};\n</code></pre>"},{"location":"UI/CommonUI/01EnhancedInput/#metadata","title":"\u9ed8\u8ba4metadata\u7684\u4f5c\u7528","text":"<ul> <li>NavBarPriority \u7528\u4e8eActionBar\u7684\u6392\u5e8f\uff0cRouter\u4f1a\u6536\u96c6\u6240\u6709\u6d3b\u52a8\u7684Action\uff0c\u7136\u540e\u901a\u77e5<code>UCommonBoundActionBar::HandleDeferredDisplayUpdate()</code>\u8fdb\u884c\u66f4\u65b0    </li> <li> <p>bIsGenericInputAction \u5982\u679c\u662f\u901a\u7528\u8f93\u5165\uff0c\u5219\u4e0d\u4f1a\u6ce8\u5165 \u666e\u901aenhanced input\u7684\u903b\u8f91\uff0c\u5177\u4f53\u4ee3\u7801\u5728 <code>auto TryConsumeInput = [&amp;](const FKey&amp; InKey, const UInputAction* InInputAction)</code>      \u4e5f\u5c31\u662fwidget\u91cc \u81ea\u5b9a\u4e49\u7684enhanced input action\u4e0d\u4f1a\u88ab\u7cfb\u7edf\u89e6\u53d1\u3002     </p> </li> <li> <p>\u8fd9\u91cc\u8fd8\u6709\u914d\u7f6e\u5168\u5c40\u7684\u9ed8\u8ba4\u503c\uff0c\u4e5f\u662f\u975e\u5e38\u91cd\u8981\u4e0d\u6307\u5b9a\u7684\u8bdd\uff0c\u5c31\u4f1a\u91c7\u7528\u9ed8\u8ba4\u503c\u7684\u8bbe\u5b9a\uff1a   </p> </li> </ul> <p>\u7efc\u4e0a\uff0c\u4f7f\u7528ActionBar \u548c EnhancedInput \u914d\u7f6e\u4e0a\u9762\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u8fd8\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002  bIsGenericInputAction\u9ed8\u8ba4\u503c\u662ftrue\uff0c\u4f1a\u5bfc\u81f4widget\u91cc\u666e\u901a\u7684enhanced input \u4e0d\u7ed1\u5b9a\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#commonui","title":"\u7ed3\u5408CommonUI \u4f7f\u7528","text":"<p>\u77e5\u9053\u4e86Metadata\u7684\u4f5c\u7528\uff0c\u5c1d\u8bd5\u548ccommonUI\u7ed3\u5408\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#ui","title":"UI\u4f18\u5148\u7ea7\u66f4\u9ad8","text":"<p>\u5148\u8bd5\u8bd5\u6211\u6bd4\u8f83\u5728\u610f\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u540c\u4e00\u4e2aInputAction\uff0c\u90fd\u8bbe\u7f6e\u7ed1\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u8c01\u7684\u4f18\u5148\u7ea7\u9ad8\uff1f\u4e8e\u662f\u6211\u51c6\u5907\u8fd9\u4e2a\u4f8b\u5b50\uff1a</p> <ul> <li>\u4e00\u4e2a\u662fCommonBaseButton\u7684\uff08\u4ee3\u8868Menu\u6a21\u5f0f\uff0c\u53ef\u914d\u7f6e\u8986\u76d6\uff09</li> <li>\u4e00\u4e2a\u662f\u76f4\u63a5\u84dd\u56fe\u91cc\u7684\u7ed1\u5b9a\uff0c\u4ee3\u8868Game\u6a21\u5f0f\u3002 </li> </ul> <p>\u628a\u5168\u5c40bIsGenericInputAction\u8bbe\u7f6e\u4e3afalse\uff1a </p> <p>\u6d4b\u8bd5\u7ed3\u679c\u5982\u56fe\uff0c\u5373\u4f7f\u662f\u5f53\u524d\u8f93\u5165\u6a21\u5f0f\u662fMenu\u6a21\u5f0f\uff0c\u56e0\u4e3a\u8be5action\u7684\u7ed1\u5b9a\u6ca1\u6709\u201c\u542f\u7528\u201d\uff0c\u4e0d\u4f1a\u6267\u884c\uff0c\u5f53\u5b83\u4f1a\u628a\u63a7\u5236\u6743\u4ea4\u7ed9game\u6a21\u5f0f\u6267\u884c\uff0c\u8ba9\u539f\u672cgame\u6a21\u5f0f\u4e0b\u7684\u4e8b\u4ef6\u7ed1\u5b9a\uff0c\u5f97\u5230\u6267\u884c\u7684\u673a\u4f1a\u3002  \u800c\u5982\u679c\u662f\u201c\u542f\u7528\u201d\uff0c\u5e76\u4e14\u662fAll\u6a21\u5f0f\u6216\u8005Menu\uff0c\u90a3\u4e48UI\u4f18\u5148\uff0c\u800cGame\u90a3\u4e2a\u7ed1\u5b9a\u88ab\u5ffd\u7565\u3002\u6240\u4ee5\u5728All\u6a21\u5f0f\u4e0b\uff0c\u5176\u5b9e\u4e5f\u53ef\u7528\u628a\u8fd9\u91cc\u7684\u201cUI\u542f\u7528\u201d\uff0c\u7406\u89e3\u4e3a\u201cUI\u5360\u7528\u201d\u3002 \uff08\u4e0a\u9762\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u662f\u901a\u8fc7\u63a7\u5236\u53f0\u6253\u5f00\u7684\u3002\u8fd9\u4e24\u4e2a\u90fd\u8981\u8bbe\u7f6e\u4e3atrue\uff09  \u4fdd\u6301\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4e0d\u8981\u5355\u72ec\u914d\u7f6e\u6309\u94ae\u7684\u6a21\u5f0f\u5982\u4e0b\u56fe\u3002\u4fdd\u6301\u9ed8\u8ba4\u884c\u4e3a\u597d\u7406\u89e3\uff0c\u4e0d\u7136\u4e00\u5957\u89c4\u5219\u7684\u6392\u5217\u7ec4\u5408\u4e0b\u6765\uff0c\u8fd8\u662f\u633a\u70e6\u4eba\u7684\u3002 </p> <p>\u6240\u4ee5\u6211\u7684\u5efa\u8bae\u662f\u201c\u542f\u7528\u201d\u9ed8\u8ba4\u8fd8\u662f\u6253\u52fe\u597d\uff0c\u5e76\u4e14\u9075\u4ece\u9ed8\u8ba4\u884c\u4e3a\uff1a</p> <ul> <li>\u5c06\u76f4\u63a5\u5728\u84dd\u56fe\u6216\u8005C++ \u91cc\u7ed1\u5b9a\u7684Input Action\uff0c\u90fd\u89c6\u4e3aGame Input</li> <li>\u5c06\u901a\u8fc7CommonUI \u6ce8\u518c\u7684 Input Action\uff0c\u90fd\u662f\u89c6\u4e3aMenu Input</li> <li>\u628a\u9ed8\u8ba4HUD\u8bbe\u7f6e\u4e3aALL\uff0c\u8ba9UI\u6309\u952e\u548c\u6e38\u620f\u90fd\u80fd\u54cd\u5e94\u8f93\u5165\u4e8b\u4ef6</li> <li>\u5404\u79cd\u5f39\u51fa\u83dc\u5355\u540e\uff0c\u8f93\u5165\u6a21\u5f0f\u8bbe\u7f6e\u4e3aMenu\uff0c\u5c4f\u853d\u6389game\u8f93\u5165\u3002</li> </ul>"},{"location":"UI/CommonUI/01EnhancedInput/#_1","title":"\u5360\u7528\u95ee\u9898","text":"<p>\u4e0d\u540cInputAction \u53ef\u7ed1\u5b9a\u76f8\u540c\u7684\u6309\u952e\uff08KEY\uff09\uff0cEnhanced Input\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u5360\u7528\u7684\uff0c\u90fd\u4f1a\u6267\u884c\uff1a \u4f8b\u5b50,\u8fd9\u4e24\u4e2aIA\u90fd\u7ed1\u5b9a\u4e86E \u952e\uff1a   \u5b83\u4eec\u90fd\u80fd\u8f93\u51fa\u3002</p> <p>\u4f46\u662f\uff0c\u4e00\u65e6CommonUI\u6ce8\u518c\u4e86\uff0c\u5c31\u4f1a\u76f4\u63a5\u5360\u7528\u8be5\u201cKEY\u201d\uff0c\u5047\u5982\u6b64\u65f6\u65b0\u589e\u4e00\u4e2aIA_E2,\u4e5f\u7ed1\u5b9a\u201cE\u201d\uff0c\u5e76\u6ce8\u518c\u5230\u4e00\u4e2a\u6309\u94ae\u91cc\uff0c\u90a3\u4e48ALL\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u201cE\u201d\u952e\uff0c\u5c31\u88abUI\u5b8c\u5168\u5360\u7528\u4e86\u3002</p> <p>\u5373\u4f7f\u662fbIsGenericInputAction\u6ca1\u6709\u542f\u7528, \u4e5f\u4f1a\u5b8c\u5168\u5360\u7528\u201cE\u201d\u952e\u3002</p> <p>\u5373\u4f7f\u662fbIsGenericInputAction\u6ca1\u6709\u542f\u7528, \u4e5f\u4f1a\u5b8c\u5168\u5360\u7528\u201cE\u201d\u952e\u3002 </p> <p>\u5373\u4f7f\u662fbIsGenericInputAction\u6ca1\u6709\u542f\u7528, \u4e5f\u4f1a\u5b8c\u5168\u5360\u7528\u201cE\u201d\u952e\u3002</p> <p>\u6b64\u65f6\u867d\u7136\u7ed1\u5b9a\u4e86\u4e09\u4e2a\u4e0d\u540c\u7684IA\uff0c\u4f46\u6309\u4e0bE\uff0c\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u53d1\u751f\uff0c\u5c31\u50cfE\u952e\u88ab\u6263\u6389\u4e86\u4e00\u6837\u3002  </p> <p>\u90e8\u5206\u6e90\u7801\u7814\u7a76 </p>"},{"location":"UI/CommonUI/01EnhancedInput/#factivatabletreenode","title":"FActivatableTreeNode","text":"<p>Activatable Widgets are abstracted as nodes in a tree using FActivatableRootNode. Nodes are arranged in a hierarchy based on the hierarchy of Activatable Widgets in the UI's widget tree. Parent nodes act as root nodes, while their children are considered child or leaf nodes. Refer to the CommonUI Overview for more information.</p> <p>\u6839\u636e\u5b98\u65b9\u63cf\u8ff0\uff0c\u6240\u6709Activatable Widgets\u4f1a\u88ab\u62bd\u8c61\u4e3a\u6811\u7ed3\u6784\uff0c\u8fdb\u884c\u8282\u70b9\u6392\u5217\u3002</p> <p>\u76f8\u5173\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a <code>FActivatableTreeRoot -&gt; FActivatableTreeNode -&gt; FActionRouterBindingCollection</code></p>"},{"location":"UI/CommonUI/01EnhancedInput/#_2","title":"\u521b\u5efa\u8282\u70b9","text":"<p>UCommonActivatableWidget \u7684\u4efb\u610f\u4e00\u4e2a\u5b50widget\uff0c\u53ea\u8981\u8c03\u7528\u7684RegisterUIActionBinding\uff0c\u5c31\u4f1a\u67e5\u627eFActivatableTreeNode\uff0c\u628aaction\u7ed1\u5b9a\u8fdb\u8be5node, \u5e76\u8ba9UCommonActivatableWidget\u6301\u6709\u8fd9\u4e2a\u8282\u70b9\u7684\u5f15\u7528\u3002 RegisterUIActionBinding\u662f\u5229\u7528\u8fd9\u4e2a\u6811\u7ed3\u6784\u67e5\u627enode  \u90a3\u4e48\u8fd9\u4e9bNode\u662f\u4f55\u65f6\u521b\u5efa\u7684\uff1f \u662f\u5728ProcessRebuiltWidgets\u91cc\u521b\u5efa\u7684\uff0c\u6ca1\u6709\u521b\u5efa\u7684\uff0c\u4f1a\u5728\u4e0b\u4e00\u5e27\u521b\u5efa\uff1a</p> <p><code>UCommonUIActionRouterBase::ProcessRebuiltWidgets()</code></p> <ul> <li> <p>tree \u6839\u6784\u9020   </p> </li> <li> <p>tree\u6dfb\u52a0\u5b50\u8282\u70b9   </p> </li> </ul>"},{"location":"UI/CommonUI/01EnhancedInput/#leafmostnode","title":"LeafmostNode","text":"<p>\u6700\u53f6\u8282\u70b9</p> <p>\u4ece\u4ee3\u7801\u4e0a\u770b\uff0c\u6700\u53f6\u8282\u70b9\uff0c\u53ef\u4ee5\u662f\u672c\u8eab\uff08\u6ca1\u6709child\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u6700\u8fb9\u7f18\u7684\u8282\u70b9\u3002\u5728\u89c6\u89c9\u548c\u903b\u8f91\u5c42\u6b21\u4e0a\u6700\u9760\u8fd1\u53f6\u5b50\u8282\u70b9\u7684\u8282\u70b9\u3002\u901a\u8fc7 GetLastPaintLayer \u6765\u5224\u65ad\u8282\u70b9\u7684\u5c42\u6b21\uff0c\u5c42\u6b21\u8d8a\u5927\u8868\u793a\u8d8a\u9760\u8fd1\u53f6\u5b50\u8282\u70b9  </p> <p>\u6839\u636eNode\u6539\u53d8FUIInputConfig,node \u7684input config \u5728\u8fd9\u91cc\u5207\u6362 </p>"},{"location":"UI/CommonUI/01EnhancedInput/#process-input","title":"Process Input","text":"<p>\u5904\u7406\u8f93\u5165\uff0c\u5c31\u662f\u901a\u8fc7\u8282\u70b9\u6811\u6765\u5904\u7406\u7684\uff0c\u53ea\u6709\u6fc0\u6d3b\u7684\u624d\u6709\u8d44\u683c\u5904\u7406\u3002  \u4e0a\u9762\u63d0\u5230\u7684TryConsumeInput\u662f<code>FActionRouterBindingCollection::ProcessNormalInput</code>\u7684\u4e34\u65f6\u5185\u90e8\u51fd\u6570\uff0c\u8fd9\u91cc\u7684\u5904\u7406\u6bd4\u8f83\u590d\u6742\uff0c\u5c1d\u8bd5\u8bb0\u5f55\u4e00\u4e0b\u6211\u7684\u7406\u89e3</p>"},{"location":"UI/CommonUI/01EnhancedInput/#input","title":"Input \u7684\u6765\u6e90","text":"<p>Enhanced \u9ed8\u8ba4\u8c03\u7528\u94fe\uff1a </p> <p>\u901a\u8fc7CommonUI\u6ce8\u518c\u7684\uff0c\u8c03\u7528\u94fe\u5b8c\u5168\u4e0d\u540c\uff0c\u9884\u5904\u7406\u5668\uff1a</p> <ul> <li>\u952e\u76d8\u8f93\u5165\uff1a\u4eceapplication \u4e00\u8def\u53bb\u5230 GameViewPort Client, \u6700\u7ec8\u7531 ActionRouter \u8fdb\u884c\u6700\u540e\u7684\u5206\u53d1   </li> <li>\u9f20\u6807\u8f93\u5165\uff1a\u5927\u81f4\u76f8\u540c   </li> <li>\u624b\u67c4\u8f93\u5165\uff1a   </li> </ul> <p>\u53c2\u8003\u5b98\u65b9\u56fe\uff0c\u7b80\u5316\u6d41\u7a0b\uff1a      \u8fd9\u56fe\u544a\u8bc9\u6211\u4eec\uff0c \u624b\u67c4\u6a21\u62df\u9f20\u6807\u70b9\u51fb\u7684\u4e00\u822c\u6d41\u7a0b\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#_3","title":"\u8f93\u5165\u9884\u5904\u7406\u5668","text":"<p>\u53d1\u73b0AnalogCursor\u7684\u9884\u5904\u7406\u6743\u9650\u5f88\u9ad8\uff0c\u6bd4\u5982\u5728Input Mode\u662fGame\u7684\u65f6\u5019\uff0c\u624b\u67c4\u70b9\u51fbA\u6309\u94ae\uff0c\u4f1a\u89e6\u53d1\u6a21\u62df\u7684\u9f20\u6807\u5de6\u952e\u6548\u679c\u3002\u8fd9\u5728TopDown\u7c7b\u578b\u7684Game\u91cc\u9762\uff0c\u975e\u5e38\u6ca1\u6709\u5fc5\u8981\u3002\u6700\u597d\u662f\u53ea\u6709InputMode\u662fMenu\u662f\u7684\u65f6\u5019\uff0c\u624d\u6a21\u62df\u5de6\u952e\u70b9\u51fb\uff0c\u624d\u662f\u5408\u7406\u7684\u3002</p> <p>\u76f2\u731c\u9884\u5904\u7406\u5404\u79cdHandle\uff0c\u8fd4\u56detrue\u5c31\u662f\u6d88\u8d39\u8be5\u4e8b\u4ef6\uff0c\u65b9\u6cd5false\u5c31\u662f\u8ba9\u4e0b\u4e00\u4e2a\u9884\u5904\u7406\u63a5\u7ba1\u3002</p> <p>\u5e38\u89c1\u7684\u9884\u5904\u7406\u6709\u8fd93\u4e2a\uff0c\u6211\u6bd4\u8f83\u5173\u7cfb\u5b83\u4eec\u5904\u7406\u8f93\u5165\u7684\u4f18\u5148\u7ea7\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#analogcursor","title":"AnalogCursor","text":"<p>\u9ed8\u8ba4\u7684\u6ce8\u518cpriority \u662f 2\uff0c\u5728Project-&gt;Plugin-&gt; CommonUI -&gt; Analog \u53ef\u7528\u4fee\u6539 </p>"},{"location":"UI/CommonUI/01EnhancedInput/#enhancedinput_1","title":"EnhancedInput","text":"<p>hard coding -1\uff0c \u8fd9\u4e2a\u662fEnhancedInputWorldSubsystem\uff0c\u6211\u7684\u6d4b\u8bd5\u91cc\uff0c\u5b83\u6ca1\u6709\u8c03\u7528\u3002 </p>"},{"location":"UI/CommonUI/01EnhancedInput/#commoninput","title":"CommonInput","text":"<p>hard coding 0\uff0cCommonInput\u5185\u90e8\u4f1a\u901a\u8fc7<code>Collection.InitializeDependency&lt;UEnhancedInputLocalPlayerSubsystem&gt;();</code>\u6765\u521d\u59cb\u5316EnhancedInput\uff0c\u4f46EnhancedInput\u4f3c\u4e4e\u5e76\u6ca1\u6709\u9884\u5904\u7406\u5668\u3002 </p>"},{"location":"UI/CommonUI/01EnhancedInput/#analogcursor_1","title":"AnalogCursor \u81ea\u5b9a\u4e49","text":"<p>FCommonAnalogCursor does not handle the input for standard 'Accept' actions on the gamepad that aren't captured by Bound Actions on the current widget. Instead it forwards the input to FAnalogCursor::HandleKeyDownEvent. FAnalogCursor then creates a synthetic mouse click event for the FSlateApplication to process.</p> <p>\u8fd9\u6bb5\u8bdd\u5176\u5b9e\u662f\u8bf4\uff0c\u5f53\u4e00\u4e2awidget\u6ca1\u6709\u7279\u522b\u5730\u5904\u7406\u5f53\u524d\u8f93\u5165\u7684\u4e8b\u4ef6\u7684\u65f6\u5019\uff0c\u865a\u62df\u5149\u6807\u5c31\u5728\u5f53\u524dwidget\u4e0a\u9762\u4f1a\u751f\u6210\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6\u3002</p> <p>\u6839\u636e\u8fd9\u51fd\u6570\uff0c\u624b\u67c4\u6a21\u5f0f\u7684\u65f6\u5019\uff0cCommonUI\u7684AnalogCursor\u63a5\u7ba1\u624b\u67c4\u7684A\u6309\u952e\u3002\u770b\u6837\u5b50\uff0c\u53ea\u80fd\u91cd\u5199\u8fd9\u4e2a\u51fd\u6570\uff1a</p> <p></p>FCommonAnalogCursor.cpp<pre><code>bool FCommonAnalogCursor::IsRelevantInput(const FKeyEvent&amp; KeyEvent) const\n{\n    return IsUsingGamepad() &amp;&amp; FAnalogCursor::IsRelevantInput(KeyEvent) &amp;&amp; (IsGameViewportInFocusPathWithoutCapture() || (KeyEvent.GetKey() == EKeys::Virtual_Accept &amp;&amp; CanReleaseMouseCapture()));\n}\n</code></pre> \u7bc7\u5e45\u592a\u957f\uff0c\u8be6\u89c1"},{"location":"UI/CommonUI/01EnhancedInput/#_4","title":"\u5f00\u59cb\u5904\u7406","text":"<p>\u7cfb\u7edf\u4f20\u7ed9ActionRouter \u7684input\u662f KEY \u503c \u548c InputEvent\u7c7b\u578b\uff08\u6309\u4e0b\uff0c\u91ca\u653e\uff09\uff0c ActionRouter\u4f1a\u7ed3\u5408\u5f53\u524d\u7684 ActiveMode\uff08\u8f93\u5165\u6a21\u5f0f\uff09\u8fdb\u884c\u5904\u7406\u3002\u8f93\u5165\u6a21\u5f0f\u76ee\u524d\u5b9a\u4e49\u4e863+1 \u79cd\u3002</p> <pre><code>enum class ECommonInputMode : uint8\n{\n    Menu    UMETA(Tooltip = \"Input is received by the UI only\"),\n    Game    UMETA(Tooltip = \"Input is received by the Game only\"),\n    All     UMETA(Tooltip = \"Input is received by UI and the Game\"),\n\n    MAX UMETA(Hidden)\n};\n</code></pre> <p>ActivatableWidget\uff08\u901a\u5e38\u662f\u5404\u79cd\u83dc\u5355\u7684\u6700\u5916\u5c42\uff09\u53ef\u4ee5\u5bf9InputConfig\u8fdb\u884c\u914d\u7f6e\uff1a\u8fd9\u91cc\u914d\u7f6e\u7684InputMode\u5c31\u662fECommonInputMode\uff0c\u4ece\u800c\u5f71\u54cd ActionRouter\u5bf9\u4e8b\u4ef6\u7684\u5206\u53d1\u3002\u53c2\u8003\u6700\u53f6\u8282\u70b9 </p> <p>\u53e6\u5916\uff0cCommonBaseButton \u53ef\u4ee5\u5bf9\u81ea\u8eab\u7ed1\u5b9a\u7684InputMode\u8fdb\u884c\u8986\u76d6 </p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5904\u7406\u8f93\u5165\u65f6\uff0c\u662f\u6839\u636e\u5f53\u524dInputMode\u662f\u5426\u5339\u914d\uff0c\u624d\u4f1a\u8fdb\u884c\u5904\u7406\u3002\u5982\u679c\u8f93\u5165\u4e0d\u8d77\u4f5c\u7528\uff0c\u5f88\u53ef\u80fd\u662fMode\u6ca1\u6709\u8bbe\u7f6e\u6b63\u786e\u3002</p> <p></p><pre><code>EProcessHoldActionResult FActionRouterBindingCollection::ProcessHoldInput(ECommonInputMode ActiveInputMode, FKey Key, EInputEvent InputEvent) const\n{\n    for (FUIActionBindingHandle BindingHandle : ActionBindings)\n    {\n        if (TSharedPtr&lt;FUIActionBinding&gt; Binding = FUIActionBinding::FindBinding(BindingHandle))\n        {\n            if (ActiveInputMode == ECommonInputMode::All || ActiveInputMode == Binding-&gt;InputMode)\n</code></pre> \u6bcf\u5f53 ActionRouter Tick\u7684\u65f6\u5019\uff0c\u4f1a\u5224\u65ad\u662f\u5426\u6709pending Widget \u9700\u8981\u6ce8\u518c\u4e8b\u4ef6\u3002\u652f\u6301 CommonInputAction\u7684widget \u90fd\u4f1a\u5728\u521b\u5efa\u7684\u65f6\u5019\uff0c\u6ce8\u518c\u9700\u8981\u7ed1\u5b9a\u7684\u4e8b\u4ef6, \u4f9bActionRouter\u5728tick\u7684\u65f6\u5019\u8fdb\u884c\u7ed1\u5b9a\u3002  \u6309\u4e0b\u6309\u952e\u7684\u65f6\u5019\uff0c\u7531ViewPort\u63a5\u53d7\u4e8b\u4ef6\uff0c\u8c03\u7528ActionRouter\u8fdb\u884c\u5904\u7406 <code>UCommonGameViewportClient::HandleRerouteInput</code>  \u7ed1\u5b9a\u7684\u4e8b\u4ef6\uff0c\u6700\u7ec8\u5728Process Input\u7ec6\u5206\uff0c\u4f18\u5148\u5904\u7406HoldInput\uff0c\u7136\u540e\u624d\u662fnormal Input\uff0c \u9010\u5c42handle\uff0c\u9010\u5c42\u6d88\u8d39\u3002 PersistentActions\u7684\u5904\u7406\u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u7136\u540e\u624d\u662fActiveRootNode\uff08\u5b83\u662f\u4e00\u4e2aFActivatableTreeNode : public FActionRouterBindingCollection\uff09,\u63a5\u7740\u662fdomain\uff0c\u8fd9\u4e2a\u4e0d\u662fenhanced input\uff0c\u4e0d\u8ba8\u8bba\u3002  <p>Press\u548c Release\u7684Input Action \u5927\u4f53\u4e0a\u76f8\u540c\uff0c\u53ea\u662f\u5165\u53e3\u4e0d\u4e00\u6837\uff0c\u4e0b\u56fe\u662fPressed \u548c Relased\u6700\u5f00\u59cb\u7684\u5730\u65b9\u3002\u8c03\u7528ProcessKeyDownEvent \u548c ProcessKeyUpEvent \u5206\u522b\u5904\u7406\u3002  \u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0cRelease\u9636\u6bb5 \u8fd8\u6709\u540e\u7eed\u5904\u7406\uff0c\u4f9d\u65e7\u662f\u7528ProcessInput \u7ec6\u5206\u5904\u7406\u3002 <code>ActionRouter.ProcessInput(InKeyEvent.GetKey(), IE_Released) == ERouteUIInputResult::Handled</code>\u3002\u5982\u679c\u7ed3\u679c\u662f\u6ca1\u6709\u4efb\u4f55widget handle action\uff0c\u5c31\u4f1a\u8c03\u7528<code>FAnalogCursor::HandleKeyUpEvent(SlateApp, InKeyEvent);</code>\u6784\u5efa\u865a\u62df\u9f20\u6807\u4e8b\u4ef6\u3002</p>"},{"location":"UI/CommonUI/01EnhancedInput/#hold-threshold","title":"Hold Threshold","text":"<p>\u6309\u4f4f\u6709\u4e2a\u6700\u5c0f\u65f6\u95f4\u7684\u8bbe\u5b9a\uff0c\u662f\u5199\u6b7b\u7684\uff0c\u9ed8\u8ba4\u662f\u56db\u5206\u4e4b\u4e00\u79d2,\u5426\u5219\u5c31\u4f1a\u8981\u6c42\u4e0b\u4e00\u6b65\u751f\u6210\u4e00\u4e2aPress \u4e8b\u4ef6</p> <pre><code>static const float PressToHoldThreshold = 0.25f;\nif (SecondsHeld &lt;= PressToHoldThreshold &amp;&amp; SecondsHeld &lt; HoldMapping.HoldTime)\n{\n    ProcessResult = EProcessHoldActionResult::GeneratePress;\n}\n</code></pre>"},{"location":"UI/CommonUI/01EnhancedInput/#hold-support","title":"Hold Support","text":"<p>\u76ee\u524d\u7684\u4ee3\u7801\uff0c\u5e76\u4e0d\u652f\u6301 Enhanced Input\u7684Hold Action\uff0c \u6211\u8fd9\u91cc\u8fdb\u884c\u7684\u989d\u5916\u7684\u652f\u6301</p>"},{"location":"UI/CommonUI/01EnhancedInput/#analogcursor_2","title":"AnalogCursor \u5904\u7406","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u6a21\u62df\u9f20\u6807\u70b9\u51fb\u7684\u5de5\u5177 </p><pre><code>bool FCommonAnalogCursor::HandleKeyUpEvent(FSlateApplication&amp; SlateApp, const FKeyEvent&amp; InKeyEvent)\n\n//\u6700\u7ec8\u901a\u8fc7\nSlateApp.ProcessMouseButtonUpEvent(MouseEvent); //\u6a21\u62df\n</code></pre>"},{"location":"UI/CommonUI/01EnhancedInput/#key","title":"\u9ed8\u8ba4KEY","text":"<pre><code>/** Remap a given key to something else if necessary. */\n    FORCEINLINE static FKey RemapKey(FKey Key) { return Key; }\n\n    static FKey GetGamepadAcceptKey()\n    {\n        return EKeys::Gamepad_FaceButton_Bottom;\n    }\n\n    static FKey GetGamepadBackKey()\n    {\n        return EKeys::Gamepad_FaceButton_Right;\n    }\n\n    static FKey GetPlatformDeleteKey()\n    {\n        return EKeys::Delete;\n    }\n</code></pre> \u7ecf\u8fc7\u4e0a\u9762\u7684\u5206\u6790\u5f97\u77e5\uff0c\u5f53Input\uff08\u62ac\u8d77key\uff09\u6ca1\u6709\u4efb\u4f55 Widget \u53bbCare\u7684\u65f6\u5019\uff0c\u4f1a\u6267\u884c\u9ed8\u8ba4\u884c\u4e3a\uff1a \u5176\u4e2dbox\u624b\u67c4\u7684 face button Bottom \uff0c\u4e5f\u5c31\u662fA\u6309\u94ae\uff0c\u4f1a\u6784\u9020\u4e00\u4e2a\u9f20\u6807\u5de6\u952e\u884c\u4e3a\uff08\u6309\u4e0b\u6216\u8005\u6309\u4f4f\uff09\u3002  \u6240\u4ee5\uff0c\u5982\u679c\u60f3\u8981\u5c4f\u853d\u9ed8\u8ba4\u7684A\u952e\u70b9\u51fb\u52a8\u4f5c\uff0c\u6709\u4e24\u4e2a\u529e\u6cd5 - \u5904\u7406\u8fd9\u4e2aA\u952e\uff0c\u7ed1\u5b9a\u5b83 - \u6539\u4e2aisRepeat = true\u7ed9\u5b83\u3002 - \u770b\u8d77\u6765\u53ef\u4ee5 remap key, \u4f46\u8fd8\u6ca1\u5b9e\u73b0\uff0c\u77e5\u9053\u7684\u5927\u4f6c\u5206\u4eab\u4e00\u4e0b\uff1a     <pre><code>/** Remap a given key to something else if necessary. */\nFORCEINLINE static FKey RemapKey(FKey Key) { return Key; }\n</code></pre>"},{"location":"UI/CommonUI/01EnhancedInput/#1","title":"\u7591\u95ee 1","text":"<ul> <li>\u4e3a\u4ec0\u4e48\u4fee\u6539\u4e86Enhance default Click Action \uff0c\u53ea\u6709\u56fe\u6807\u6539\u53d8\uff0cAction \u8fd8\u662f Faceb Button Bottom ?       \u56e0\u4e3a \u9996\u5148\u9ed8\u8ba4 GetGamepadAcceptKey \u662f\u5199\u6b7b\u7684A\uff0c\u5176\u6b21\u5e76\u6ca1\u6709\u663e\u5f0f\u6ce8\u518c  default Click Action</li> <li> <p>\u4e3a\u4ec0\u4e48\u56fe\u6807\u66f4\u65b0\u4e86\uff1f\u8fd9\u4e0d\u662f\u8bf4\u660e\u80fd\u62ff\u5230 default Click Action\u5417\uff1f   \u56e0\u4e3a \u56fe\u6807\u662fCommonActionWidget \u8bbe\u7f6e\u7684\uff0c\u5728CommonBaseButton Hovered\u7684\u65f6\u5019\uff0c\u4f1a\u83b7\u53d6<code>HoverEnhancedInputAction = ICommonInputModule::GetSettings().GetEnhancedInputClickAction();</code>    \u8fd9\u91cc\u53ea\u662f\u4e3a\u4e86\u8bbe\u7f6eIcon\uff0c\u5e76\u6ca1\u6709\u628a\u7ed1\u5b9a\u4e8b\u4ef6\u7ed9Button</p> <p>BaseButton\u4ee3\u7801\u663e\u793a\uff0c\u5b83\u662f\u901a\u8fc7\u5224\u65adIsHovered\uff0c\u6765\u51b3\u5b9a\u662f\u5426\u521b\u5efaHoverEnhancedInputAction </p><pre><code>UInputAction* HoverEnhancedInputAction = nullptr;\n            if (IsHovered())\n            {\n                if (bIsEnhancedInputSupportEnabled)\n                {\n                    HoverEnhancedInputAction = ICommonInputModule::GetSettings().GetEnhancedInputClickAction();\n                }\n                else\n                {\n                    HoverStateHandle = ICommonInputModule::GetSettings().GetDefaultClickAction();\n                }\n            }\n            //\u5e76\u8bbe\u7f6e\u7ed9Icon Widget\n            if (bIsEnhancedInputSupportEnabled)\n            {\n                InputActionWidget-&gt;SetEnhancedInputAction(HoverEnhancedInputAction);\n            }\n</code></pre> <p>\u53d8\u901a\u89e3\u6cd5\u5c31\u662f\uff0c\u5728OnHovered \u548c UnHoverd \u83b7\u53d6 Action widget \u7684Enhanced Input\uff0c\u9002\u5f53\u7684\u65f6\u5019\u624b\u52a8\u7ed1\u5b9a\u3002\u548c\u53d6\u6d88\u7ed1\u5b9a\u3002</p> </li> </ul>"},{"location":"UI/CommonUI/01EnhancedInput/#2","title":"\u7591\u95ee 2","text":"<ul> <li> <p>\u4e3a\u4ec0\u4e48Enhanced Input \u4f5c\u4e3a Trigger Action\u7684\u65f6\u5019\uff0cHold \u65e0\u6cd5\u6b63\u786e\u751f\u6548\uff1f</p> <p>\u56e0\u4e3a\u7f3a\u5c11HoldMapping\uff0c\u8fd9\u91cc\u5fc5\u987b\u6709HoldMapping\uff0c\u624d\u4f1a\u6267\u884c\u5230for\u5185\u90e8 </p> <p>\u7136\u800c\u5728\u5904\u7406HoldMapping\u7684\u65f6\u5019\uff0c\u504f\u504f\u4e0d\u5904\u7406Enhanced Input\u7684\u3002\u6ce8\u91ca\u8bf4\uff0c\u4e0d\u5728\u8fd9\u91cc\u5904\u7406HoldMapping\uff0c\u4f46\u6211\u6ca1\u53d1\u73b0\u5176\u4ed6\u5730\u65b9\u6709\u7ed9\u5b83\u8bbe\u7f6e\u3002\u5168\u5c40\u641c\u7d22\u90fd\u641c\u4e0d\u5230\u3002 </p>UIActionRouterTypes.cpp<pre><code>else if (CommonUI::IsEnhancedInputSupportEnabled() &amp;&amp; BindArgs.InputAction.IsValid())\n    {\n        // Nothing else to do if we have an enhanced input action,\n        // the input action itself will be queried against for keys later\n    }\n</code></pre> \u4e00\u79cd\u89e3\u6cd5\u662f\uff1a\u7528UIActionTag\u6765\u89e3\u51b3\uff0c\u56e0\u4e3a\u4ee3\u7801\u91cc\u4f1a\u7ed9\u6709Tag\u7684Action\u8fdb\u884cHoldMapping\u7ed1\u5b9a\u3002\u4f46Action\u8981\u5b9a\u4e49\u5728\u8fd9\u56fe\u91cc\u7684\u8bbe\u7f6e\u91cc\u3002\u800c\u4e14\u6839\u672c\u4e0d\u662fenhanced input\u3002  <p>\u6211\u770b\u5230\u6709\u4eba\u4f9d\u65e7\u63d0\u4ea4\u4e86\u76f8\u5173Pull Request, \u4ed6\u7684\u6539\u52a8\u5f88\u591a\uff0c\u611f\u89c9\u5b98\u65b9\u6ca1\u90a3\u4e48\u5feb\u5408\u5e76\u3002</p> <p>\u6211\u5b9e\u73b0\u4e86\u4e00\u79cd\u4e0d\u7528\u4fee\u6539\u6e90\u7801\u7684\u529e\u6cd5, click here</p> <p>\u524d\u63d0\u662f\u4fdd\u8bc1InputSystem-&gt;GetAllPlayerMappableActionKeyMappings() \u5df2\u7ecf\u6709\u503c\uff0c\u8c03\u7528\u987a\u5e8f\u4e0d\u80fd\u9519\u3002</p> </li> </ul>"},{"location":"UI/CommonUI/01EnhancedInput/#3","title":"\u7591\u95ee 3","text":"<ul> <li> <p>\u4e3a\u4ec0\u4e48 Enhanced trigger \u7684Pressed\u548c BaseButton \u7684 Pressed\u6ca1\u6709\u5173\u8054\uff1f \u4e5f\u5c31\u662f\u952e\u76d8 \u6309\u4e0b\u7684\u65f6\u5019\uff0c\u754c\u9762\u91cc Button\u7684 Pressed \u5e76\u6ca1\u6709\u51fa\u73b0\u6309\u4e0b\u7684\u72b6\u6001\uff1f(\u9ed8\u8ba4\u70b9\u51fb\u6309\u94ae\u9664\u5916\uff0cface Button A \u662f\u6784\u5efa\u865a\u62df\u9f20\u6807\u6309\u4e0b)</p> <p>\u56e0\u4e3a \u5b83\u4eec\u4e0d\u662f\u53cc\u5411\u5173\u8054\u7684\uff0c\u76ee\u524d\u7684\u5355\u5411\u7684\u3002 \u6211\u4eec\u7ed9\u754c\u9762\u6309\u94ae \u8bbe\u7f6e\u4e00\u4e2a Enhanced Trigger\uff0c\u6211\u4eec\u628a\u8fd9\u4e2atrigger\u5f53\u4f5c\u4e00\u79cd\u5feb\u6377\u952e\u7684\u8bdd\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6309\u94ae\u5728\u6784\u5efa\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u53bb\u7ed1\u5b9a\u7ed1\u5b9a\u8fd9\u4e2a\u5feb\u6377\u952e\u7684\u4e8b\u4ef6\u3002\u4f46\u5feb\u6377\u952e\u6309\u4e0b\u7684\u65f6\u5019\uff0c\u6fc0\u6d3b\u81ea\u8eab\u7684\u70b9\u51fb\u4e8b\u4ef6\u3002\u4f46\u8fd9\u4e2a\u70b9\u51fb\u4e8b\u4ef6\uff0c\u5e76\u4e0d\u4f1a\u6fc0\u6d3bstale \u539f\u59cb\u70b9\u51fb\u3002\u731c\u6d4b\u5982\u679c\u6fc0\u6d3b\uff0c\u53ef\u80fd\u5bfc\u81f4\u6b7b\u5faa\u73af\uff0c\u56e0\u4e3a\u539f\u59cb\u70b9\u51fb\u4e8b\u4ef6 \u662f\u7528\u6765 \u89e6\u53d1 \u6309\u94ae\u81ea\u8eab\u7684\u70b9\u51fb\u4e8b\u4ef6\u7684\u3002 \u76ee\u524d\u6ca1\u6709\u597d\u7684\u529e\u6cd5\uff0c\u4e00\u79cd\u505a\u6cd5\u662f \u5728 CommonBaseButton \u7684\u5b50\u7c7b\u91cc\uff0c\u81ea\u5df1\u5b9e\u73b0\u6309\u4f4f\u548c\u62ac\u8d77\u7684 style \u5207\u6362\uff0c\u6bd4\u8f83\u9ebb\u70e6\u3002</p> </li> </ul>"},{"location":"UI/CommonUI/01Focus/","title":"CommonUI \u7684Focus \u5bfc\u81f4\u7684\u95ee\u9898","text":"<p>Note</p> <p>\u52a0\u5165\u4e86commonUI\u540e\uff0c\u603b\u6709\u4e00\u4e9b\u610f\u60f3\u4e0d\u5230\u7684\u95ee\u9898\uff0c\u7814\u7a76\u4e86\u4e00\u4e0b\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898\uff1a</p> <ul> <li>Input Mode \u548c CommonUI \u51b2\u7a81 </li> <li>\u5bfc\u822a\u952e\uff08\u952e\u76d8\u7684Tab,\u624b\u67c4\u7684DPad\uff09 \u88abCommonUI\u5360\u7528</li> <li>\u786e\u8ba4\u952e\uff08FaceButton Bottom\uff09 \u88abCommonUI\u5360\u7528     </li> </ul>"},{"location":"UI/CommonUI/01Focus/#tldr","title":"TL;DR \u592a\u957f\u4e0d\u770b","text":"<p>commonUI \u6709\u4e24\u4e2a\u201cFocus\u201d, \u4e00\u4e2a\u662fWidget\u7684Focus\uff0c\u53e6\u4e00\u4e2a\u662fInput Mode \u7684Focus\u3002</p> <ul> <li> <p>\u5982\u679c\u5f53\u524d\u5c4f\u5e55\u91cc\u6709 focus\u7684widget\uff0c\u90a3\u4e48\u5bfc\u822a\u952e \u5c31\u6709\u53ef\u80fd\u88ab CommonUI \u5403\u6389\uff0c\u5c24\u5176\u662f Input Mode\u662fAll\u7684\u60c5\u51b5\u3002\u53d6\u6d88\u52fe\u9009 Focusable \u5373\u53ef\uff1a \u6216\u8005\uff0c\u5728 OnFocusReceived\u91cc\u9762\uff0c\u624b\u52a8\u8c03\u7528 Set Focus to Game Viewport</p> </li> <li> <p>CommonUI \u6ca1\u6709\u81ea\u52a8\u6fc0\u6d3b\u76f8\u5e94\u7684 Input Mode\uff0c\u52fe\u9009Supports Activation Focus \u5373\u53ef\u3002</p> </li> <li> <p>\u786e\u8ba4\u952e\uff08FaceButton Bottom\uff09 \u88abCommonUI\u5360\u7528\uff1a\u53ef\u4ee5\u901a\u8fc7 C++ \u91cd\u5199\u7236\u7c7b\u5224\u65ad\u7684\u65b9\u6cd5\u6765\u89e3\u51b3</p> </li> </ul>"},{"location":"UI/CommonUI/01Focus/#_1","title":"\u4e00\u4e9b\u6982\u5ff5","text":"<p>\u8ba9AI\u603b\u7ed3\u4e86\u4e00\u4e9b</p> <p>\u5728 Unreal Engine \u7684 Slate \u548c UMG \u7cfb\u7edf\u4e2d\uff0c\"Focus Path\" \u662f\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u7ba1\u7406\u7528\u6237\u754c\u9762\u4e2d\u7126\u70b9\u7684\u5bfc\u822a\u548c\u4f20\u9012\u3002\u7126\u70b9\u8def\u5f84\u4e3b\u8981\u7528\u4e8e\u952e\u76d8\u548c\u6e38\u620f\u624b\u67c4\u7b49\u8f93\u5165\u8bbe\u5907\u7684\u7126\u70b9\u7ba1\u7406\u3002</p>"},{"location":"UI/CommonUI/01Focus/#focus-path","title":"Focus Path \u7684\u5b9a\u4e49","text":"<p>Focus Path \u662f\u6307\u4e00\u7cfb\u5217\u7684 Widget\uff0c\u901a\u8fc7\u8fd9\u4e9b Widget \u7126\u70b9\u53ef\u4ee5\u987a\u7545\u5730\u5bfc\u822a\u3002\u7126\u70b9\u8def\u5f84\u7528\u4e8e\u7ba1\u7406\u7528\u6237\u754c\u9762\u4e2d\u7126\u70b9\u7684\u4f20\u9012\uff0c\u7279\u522b\u662f\u952e\u76d8\u548c\u6e38\u620f\u624b\u67c4\u7b49\u8f93\u5165\u8bbe\u5907\u7684\u7126\u70b9\u7ba1\u7406\u3002</p>"},{"location":"UI/CommonUI/01Focus/#_2","title":"\u6ce8\u91ca\u5206\u6790","text":""},{"location":"UI/CommonUI/01Focus/#_3","title":"\u8def\u7531\u4e8b\u4ef6","text":"<pre><code>/**\n * Route an event along a focus path (as opposed to PointerPath)\n *\n * Focus paths are used focus devices.(e.g. Keyboard or Game Pads)\n * Focus paths change when the user navigates focus (e.g. Tab or\n * Shift Tab, clicks on a focusable widget, or navigation with keyboard/game pad.)\n */\n</code></pre> <p>\u8fd9\u6bb5\u6ce8\u91ca\u89e3\u91ca\u4e86\u7126\u70b9\u8def\u5f84\u4e0e\u6307\u9488\u8def\u5f84\uff08PointerPath\uff09\u7684\u533a\u522b\u3002\u7126\u70b9\u8def\u5f84\u4e13\u95e8\u7528\u4e8e\u7126\u70b9\u8bbe\u5907\uff08\u5982\u952e\u76d8\u548c\u6e38\u620f\u624b\u67c4\uff09\u3002\u5f53\u7528\u6237\u901a\u8fc7 Tab\u3001Shift Tab\u3001\u70b9\u51fb\u4e00\u4e2a\u53ef\u4ee5\u83b7\u53d6\u7126\u70b9\u7684 Widget \u6216\u4f7f\u7528\u952e\u76d8/\u6e38\u620f\u624b\u67c4\u8fdb\u884c\u5bfc\u822a\u65f6\uff0c\u7126\u70b9\u8def\u5f84\u4f1a\u53d1\u751f\u53d8\u5316\u3002</p> <ul> <li>PointerPath\uff1a\u6307\u7684\u662f\u4e0e\u9f20\u6807\u6307\u9488\u76f8\u5173\u7684\u8def\u5f84\u3002</li> <li>Focus Path\uff1a\u6307\u7684\u662f\u4e0e\u952e\u76d8\u6216\u6e38\u620f\u624b\u67c4\u7b49\u7126\u70b9\u8bbe\u5907\u76f8\u5173\u7684\u8def\u5f84\u3002</li> </ul>"},{"location":"UI/CommonUI/01Focus/#_4","title":"\u7126\u70b9\u8def\u5f84\u4e2d\u7684\u4e8b\u4ef6","text":"<pre><code>/**\n * If focus is gained on on this widget or on a child widget and this widget is added\n * to the focus path, and wasn't previously part of it, this event is called.\n *\n * @param  InFocusEvent  FocusEvent\n */\nUFUNCTION(BlueprintImplementableEvent, BlueprintCosmetic, Category=\"Input\")\nUMG_API void OnAddedToFocusPath(FFocusEvent InFocusEvent);\n</code></pre> <p>\u8fd9\u6bb5\u6ce8\u91ca\u548c\u4ee3\u7801\u89e3\u91ca\u4e86\u5f53\u4e00\u4e2a Widget \u6216\u5176\u5b50 Widget \u83b7\u5f97\u7126\u70b9\uff0c\u5e76\u4e14\u8be5 Widget \u88ab\u6dfb\u52a0\u5230\u7126\u70b9\u8def\u5f84\u4e2d\u65f6\u4f1a\u89e6\u53d1\u7684\u4e8b\u4ef6\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a Widget \u4e4b\u524d\u4e0d\u5728\u7126\u70b9\u8def\u5f84\u4e2d\uff0c\u4f46\u7531\u4e8e\u7126\u70b9\u7684\u8f6c\u79fb\uff08\u4f8b\u5982\u7528\u6237\u6309\u4e0b Tab \u952e\uff09\u800c\u88ab\u6dfb\u52a0\u5230\u7126\u70b9\u8def\u5f84\u4e2d\uff0c\u5c31\u4f1a\u89e6\u53d1 <code>OnAddedToFocusPath</code> \u4e8b\u4ef6\u3002</p> <ul> <li>InFocusEvent\uff1a\u8fd9\u662f\u4e00\u4e2a <code>FFocusEvent</code> \u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u4e0e\u7126\u70b9\u53d8\u5316\u76f8\u5173\u7684\u4fe1\u606f\u3002</li> </ul>"},{"location":"UI/CommonUI/01Focus/#routealongfocuspath","title":"RouteAlongFocusPath \u65b9\u6cd5","text":"<p><code>RouteAlongFocusPath</code> \u65b9\u6cd5\u901a\u5e38\u7528\u4e8e\u5c06\u4e8b\u4ef6\u6cbf\u7740\u7126\u70b9\u8def\u5f84\u8fdb\u884c\u4f20\u9012\u3002\u5b83\u786e\u4fdd\u7126\u70b9\u8def\u5f84\u4e2d\u7684\u6bcf\u4e2a Widget \u90fd\u80fd\u6b63\u786e\u5730\u63a5\u6536\u5230\u548c\u5904\u7406\u4e8b\u4ef6\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u6309\u4e0b Tab \u952e\u65f6\uff0c\u7126\u70b9\u4f1a\u4ece\u4e00\u4e2a Widget \u8f6c\u79fb\u5230\u4e0b\u4e00\u4e2a Widget\uff0c<code>RouteAlongFocusPath</code> \u65b9\u6cd5\u4f1a\u786e\u4fdd\u8fd9\u4e2a\u8fc7\u7a0b\u987a\u5229\u8fdb\u884c\u3002</p>"},{"location":"UI/CommonUI/01Focus/#focuspath","title":"FocusPath \u603b\u7ed3","text":"<ul> <li>Focus Path \u662f\u4e00\u7cfb\u5217\u53ef\u4ee5\u987a\u7545\u5bfc\u822a\u7684 Widget\uff0c\u7528\u4e8e\u7ba1\u7406\u952e\u76d8\u548c\u6e38\u620f\u624b\u67c4\u7b49\u8f93\u5165\u8bbe\u5907\u7684\u7126\u70b9\u3002</li> <li>RouteAlongFocusPath \u65b9\u6cd5\u7528\u4e8e\u5c06\u4e8b\u4ef6\u6cbf\u7740\u7126\u70b9\u8def\u5f84\u8fdb\u884c\u4f20\u9012\uff0c\u786e\u4fdd\u6bcf\u4e2a Widget \u90fd\u80fd\u6b63\u786e\u5904\u7406\u4e8b\u4ef6\u3002</li> <li>OnAddedToFocusPath \u4e8b\u4ef6\u5728 Widget \u88ab\u6dfb\u52a0\u5230\u7126\u70b9\u8def\u5f84\u65f6\u89e6\u53d1\uff0c\u7528\u4e8e\u5904\u7406\u7126\u70b9\u53d8\u5316\u3002</li> </ul> <p><code>FReply</code> \u7c7b\u662f Unreal Engine 5 \u4e2d\u7528\u4e8e\u5904\u7406 Slate \u4e8b\u4ef6\u54cd\u5e94\u7684\u4e00\u4e2a\u6838\u5fc3\u7c7b\u3002\u5b83\u7684\u4e3b\u8981\u529f\u80fd\u662f\u901a\u77e5\u7cfb\u7edf\u67d0\u4e2a\u4e8b\u4ef6\u662f\u5982\u4f55\u88ab\u5904\u7406\u7684\uff0c\u4ee5\u53ca\u6307\u793a\u7cfb\u7edf\u5728\u5904\u7406\u4e8b\u4ef6\u540e\u9700\u8981\u6267\u884c\u7684\u64cd\u4f5c\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u4e2a\u7c7b\u7684\u5206\u6790\uff1a</p>"},{"location":"UI/CommonUI/01Focus/#freply","title":"FReply","text":"<p>\u6240\u4ee5\u8f93\u5165\u4e8b\u4ef6\u7684\u64cd\u4f5c\uff0c\u90fd\u662f\u901a\u8fc7\u6784\u9020\u4e00\u4e2aFReply\u5bf9\u8c61\uff0c\u5e76\u5bf9\u5176\u8bbe\u7f6e\u54cd\u5e94\u7684\u503c\uff0c\u4e00\u5c42\u4e00\u5c42\u5730\u4f20\u9012\u5904\u7406\u3002</p> <p><code>FReply</code> \u7c7b\u662f\u4e00\u4e2a\u7528\u4e8e\u5728 Slate \u7cfb\u7edf\u4e2d\u5904\u7406\u548c\u54cd\u5e94\u4e8b\u4ef6\u7684\u5de5\u5177\u7c7b\u3002\u5b83\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684 API\uff0c\u7528\u4e8e\u6307\u793a\u7cfb\u7edf\u5982\u4f55\u5904\u7406\u9f20\u6807\u4e8b\u4ef6\u3001\u7126\u70b9\u7ba1\u7406\u3001\u5bfc\u822a\u3001\u62d6\u62fd\u64cd\u4f5c\u7b49\u3002\u901a\u8fc7\u8fd4\u56de <code>FReply</code> \u5bf9\u8c61\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u7075\u6d3b\u5730\u63a7\u5236\u4e8b\u4ef6\u5904\u7406\u6d41\u7a0b\uff0c\u589e\u5f3a\u7528\u6237\u4ea4\u4e92\u4f53\u9a8c\u3002</p> <ol> <li>\u4e8b\u4ef6\u5904\u7406\u72b6\u6001\uff1a</li> <li> <p><code>Handled()</code> \u548c <code>Unhandled()</code> \u9759\u6001\u65b9\u6cd5\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u8868\u793a\u4e8b\u4ef6\u5904\u7406\u72b6\u6001\u7684 <code>FReply</code> \u5bf9\u8c61\u3002<code>Handled()</code> \u8868\u793a\u4e8b\u4ef6\u5df2\u88ab\u5904\u7406\uff0c<code>Unhandled()</code> \u8868\u793a\u4e8b\u4ef6\u672a\u88ab\u5904\u7406\u3002</p> </li> <li> <p>\u9f20\u6807\u4e8b\u4ef6\u5904\u7406\uff1a</p> </li> </ol> <p>\u6ce8\u610f\uff0c\u8fd9\u4e9b\u90fd\u662f\u8bbe\u7f6e\u76f8\u5e94\u7684\u503c\uff0c\u6700\u7ec8\u5904\u7406\u662f\u5728Tick\u91cc\u3002</p> <ul> <li><code>CaptureMouse(TSharedRef&lt;SWidget&gt; InMouseCaptor)</code>\uff1a\u8bf7\u6c42\u7cfb\u7edf\u5c06\u9f20\u6807\u4e8b\u4ef6\u6355\u83b7\u5230\u6307\u5b9a\u7684 Widget\u3002</li> <li><code>UseHighPrecisionMouseMovement(TSharedRef&lt;SWidget&gt; InMouseCaptor)</code>\uff1a\u8bf7\u6c42\u542f\u7528\u9ad8\u7cbe\u5ea6\u9f20\u6807\u79fb\u52a8\u3002</li> <li><code>SetMousePos(const FIntPoint&amp; NewMousePos)</code>\uff1a\u8bf7\u6c42\u5c06\u9f20\u6807\u5149\u6807\u79fb\u52a8\u5230\u6307\u5b9a\u4f4d\u7f6e\u3002</li> <li><code>LockMouseToWidget(TSharedRef&lt;SWidget&gt; InWidget)</code>\uff1a\u8bf7\u6c42\u5c06\u9f20\u6807\u9501\u5b9a\u5728\u6307\u5b9a Widget \u7684\u8303\u56f4\u5185\u3002</li> <li><code>ReleaseMouseLock()</code>\uff1a\u8bf7\u6c42\u91ca\u653e\u9f20\u6807\u9501\u5b9a\u3002</li> <li> <p><code>ReleaseMouseCapture()</code>\uff1a\u8bf7\u6c42\u91ca\u653e\u9f20\u6807\u6355\u83b7\u3002</p> </li> <li> <p>\u7126\u70b9\u7ba1\u7406\uff1a</p> </li> <li><code>SetUserFocus(TSharedRef&lt;SWidget&gt; GiveMeFocus, EFocusCause ReasonFocusIsChanging, bool bInAllUsers)</code>\uff1a\u8bf7\u6c42\u5c06\u7528\u6237\u7126\u70b9\u8bbe\u7f6e\u5230\u6307\u5b9a\u7684 Widget\u3002</li> <li><code>ClearUserFocus(bool bInAllUsers)</code> \u548c <code>ClearUserFocus(EFocusCause ReasonFocusIsChanging, bool bInAllUsers)</code>\uff1a\u8bf7\u6c42\u6e05\u9664\u7528\u6237\u7126\u70b9\u3002</li> <li> <p><code>CancelFocusRequest()</code>\uff1a\u53d6\u6d88\u5148\u524d\u7684\u7126\u70b9\u8bf7\u6c42\u3002</p> </li> <li> <p>\u5bfc\u822a\uff1a</p> </li> <li><code>SetNavigation(EUINavigation InNavigationType, const ENavigationGenesis InNavigationGenesis, const ENavigationSource InNavigationSource)</code>\uff1a\u8bf7\u6c42\u7cfb\u7edf\u5c1d\u8bd5\u8fdb\u884c\u6307\u5b9a\u7c7b\u578b\u7684\u5bfc\u822a\u3002</li> <li> <p><code>SetNavigation(TSharedRef&lt;SWidget&gt; InNavigationDestination, const ENavigationGenesis InNavigationGenesis, const ENavigationSource InNavigationSource)</code>\uff1a\u8bf7\u6c42\u5bfc\u822a\u5230\u6307\u5b9a\u7684 Widget\u3002</p> </li> <li> <p>\u62d6\u62fd\u64cd\u4f5c\uff1a</p> </li> <li><code>DetectDrag(const TSharedRef&lt;SWidget&gt;&amp; DetectDragInMe, FKey MouseButton)</code>\uff1a\u8bf7\u6c42\u7cfb\u7edf\u68c0\u6d4b\u6307\u5b9a Widget \u7684\u62d6\u62fd\u64cd\u4f5c\u3002</li> <li><code>BeginDragDrop(TSharedRef&lt;FDragDropOperation&gt; InDragDropContent)</code>\uff1a\u5f00\u59cb\u4e00\u4e2a\u62d6\u62fd\u64cd\u4f5c\u3002</li> <li> <p><code>EndDragDrop()</code>\uff1a\u7ed3\u675f\u5f53\u524d\u7684\u62d6\u62fd\u64cd\u4f5c\u3002</p> </li> <li> <p>\u5176\u4ed6\u64cd\u4f5c\uff1a</p> </li> <li><code>PreventThrottling()</code>\uff1a\u8bf7\u6c42\u5728\u9f20\u6807\u6309\u4e0b\u65f6\u4e0d\u8fdb\u884c UI \u54cd\u5e94\u7684\u8282\u6d41\u3002</li> </ul>"},{"location":"UI/CommonUI/01Focus/#fcommonanalogcursor","title":"FCommonAnalogCursor","text":""},{"location":"UI/CommonUI/01Focus/#isgameviewportinfocuspathwithoutcapture","title":"\u51fd\u6570 <code>IsGameViewportInFocusPathWithoutCapture</code>","text":"<pre><code>/**\n * A ridiculous function name, but we have this exact question in a few places.\n * We don't care about input while our owning player's game viewport isn't involved in the focus path,\n * but we also want to hold off doing anything while that game viewport has full capture.\n * So we need that \"relevant, but not exclusive\" sweet spot.\n */\nbool IsGameViewportInFocusPathWithoutCapture() const;\n</code></pre> <p>Note</p> <p>\u5b98\u65b9\u8bf4\u8fd9\u4e2a\u51fd\u6570\u7684\u540d\u5b57\u5f88\u641e\u7b11\u3002\u3002</p> <p>\u8fd9\u6bb5\u6ce8\u91ca\u89e3\u91ca\u4e86\u51fd\u6570 <code>IsGameViewportInFocusPathWithoutCapture</code> \u7684\u4f5c\u7528\uff1a</p> <ul> <li>\u4e0d\u5173\u5fc3\u8f93\u5165\uff1a\u5f53\u62e5\u6709\u73a9\u5bb6\u7684 <code>GameViewport</code> \u4e0d\u5728\u7126\u70b9\u8def\u5f84\u4e2d\u65f6\uff0c\u6211\u4eec\u4e0d\u5173\u5fc3\u8f93\u5165\u3002</li> <li>\u6682\u505c\u64cd\u4f5c\uff1a\u5f53 <code>GameViewport</code> \u5b8c\u5168\u6355\u83b7\u8f93\u5165\u65f6\uff08\u5373\u5177\u6709\u5168\u6355\u83b7\uff09\uff0c\u6211\u4eec\u4e5f\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\u3002</li> <li>\u7406\u60f3\u72b6\u6001\uff1a\u6211\u4eec\u5bfb\u6c42\u7684\u662f\u4e00\u4e2a\u201c\u76f8\u5173\u4f46\u4e0d\u72ec\u5360\u201d\uff08\u201crelevant, but not exclusive\u201d\uff09\u7684\u72b6\u6001\uff0c\u5373 <code>GameViewport</code> \u5728\u7126\u70b9\u8def\u5f84\u4e2d\uff0c\u4f46\u6ca1\u6709\u5b8c\u5168\u6355\u83b7\u8f93\u5165\u3002</li> </ul>"},{"location":"UI/CommonUI/01Focus/#tick","title":"\u65b9\u6cd5 <code>Tick</code>","text":"<pre><code>void FCommonAnalogCursor::Tick(const float DeltaTime, FSlateApplication&amp; SlateApp, TSharedRef&lt;ICursor&gt; Cursor)\n{\n    // Refreshing visibility per tick to address multiplayer p2 cursor visibility getting stuck\n    RefreshCursorVisibility();\n\n    // Don't bother trying to do anything while the game viewport has capture\n    if (IsUsingGamepad() &amp;&amp; IsGameViewportInFocusPathWithoutCapture())\n    {\n        // \u7701\u7565\u5176\u4ed6\u4ee3\u7801\n    }\n</code></pre> <p>\u5728 <code>Tick</code> \u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5bf9 <code>IsGameViewportInFocusPathWithoutCapture</code> \u7684\u8c03\u7528\uff1a</p> <ul> <li>\u5237\u65b0\u5149\u6807\u53ef\u89c1\u6027\uff1a\u6bcf\u4e00\u5e27\u5237\u65b0\u5149\u6807\u7684\u53ef\u89c1\u6027\uff0c\u4ee5\u89e3\u51b3\u591a\u73a9\u5bb6\u7b2c\u4e8c\u4e2a\u73a9\u5bb6\u5149\u6807\u53ef\u89c1\u6027\u5361\u4f4f\u7684\u95ee\u9898\u3002</li> <li>\u5224\u65ad\u6761\u4ef6\uff1a\u5982\u679c\u6b63\u5728\u4f7f\u7528\u6e38\u620f\u624b\u67c4\uff0c\u5e76\u4e14 <code>GameViewport</code> \u5728\u7126\u70b9\u8def\u5f84\u4e2d\u4f46\u6ca1\u6709\u6355\u83b7\u5149\u6807\uff0c\u5219\u6267\u884c\u540e\u7eed\u4ee3\u7801\u3002   </li> </ul> <p>\u5927\u81f4\u4e86\u89e3FReply\uff0c\u5728\u770b\u5b98\u65b9\u8fd9\u4e2a\u56fe\uff0c\u5c31\u597d\u7406\u89e3\u5f88\u591a\u3002 </p>"},{"location":"UI/CommonUI/01Focus/#_5","title":"\u5b98\u65b9\u8bf4\u660e","text":"<p>When navigation input occurs, the input is handled by the default <code>SWidget::OnKeyDown</code> or<code>SWidget::OnAnalogValueChanged</code> methods. However, these default methods do not directly change widget focus. Instead, the following occurs:</p> <p>The navigation method uses either <code>FSlateApplication::GetNavigationDirectionFromKey</code> or <code>FSlateApplication::GetNavigationDirectionFromAnalog</code> to translate the input into a navigation direction. It takes the Navigation Config for the widget into account when it runs this translation.</p> <p>The navigation direction is captured and included in the <code>FReply::Handled</code> reply, which is sent through<code>FReply::SetNavigation</code>.</p> <p>Note</p> <p>FReply can carry a lot of contextual information. For more see the information on FReply in the Input Routing section below.</p> <p>Slate starts processing the FReply using <code>FSlateApplication::ProcessReply</code>, which causes navigation to occur. If a navigation event is loosely defined by direction, then <code>_FSlateApplication::AttemptNavigation</code> _attempts to find the correct widget to navigate to.</p> <p>If possible, <code>FSlateApplication::ExecuteNavigation</code> navigates to the destination widget.</p> <p>If the destination widget is valid, <code>FSlateApplication::SetUserFocus</code> is called on that widget. This happens whether the destination widget was specified directly, or found beforehand.</p> <p>After the Slate focus navigation occurs, <code>FCommonAnalogCursor::Tick</code> automatically moves and centers the synthetic cursor onto the focused widget during the next tick.</p> <p>This makes it possible to use hover effects when you use a gamepad.</p>"},{"location":"UI/CommonUI/02CommonActionWidget/","title":"How to Use CommonActionWidget","text":""},{"location":"UI/CommonUI/02CommonActionWidget/#support-for-held-progress-animation","title":"Support for Held Progress Animation","text":"<p>I have been trying to make it work without success, but after debugging layer by layer, I finally found the reason.</p> <ul> <li>Make sure that \"held\" and \"UIHold Data\" are configured correctly.     </li> <li> <p>Only actions with trigger types that support \"held\" can bind to the \"held\" action.</p> <p></p><pre><code>    bool UCommonActionWidget::IsHeldAction() const\n    {\n        if (EnhancedInputAction &amp;&amp; CommonUI::IsEnhancedInputSupportEnabled())\n        {\n            for (const TObjectPtr&lt;UInputTrigger&gt;&amp; Trigger : EnhancedInputAction-&gt;Triggers)\n            {\n                if (EnumHasAnyFlags(Trigger-&gt;GetSupportedTriggerEvents(), ETriggerEventsSupported::Ongoing))\n                {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    }\n</code></pre> Otherwise, the progress image used for the animation will be hidden. <pre><code>        if (IsHeldAction())\n        {\n            MyProgressImage-&gt;SetVisibility(EVisibility::SelfHitTestInvisible);\n        }\n        else\n        {\n            MyProgressImage-&gt;SetVisibility(EVisibility::Collapsed);\n        }\n</code></pre> Therefore, open the corresponding InputAction and add support for \"Hold\":  </li> </ul>"},{"location":"UI/CommonUI/03Hold%20Support%20For%20Enhnaced%20Input/","title":"Make Enhanced Input Trriger Support \"hold\"","text":"<p>In the last post, I mentioned that the CommonUI Enhanced Input Trigger does not support the \"Hold\" action. Here is my solution: create a class derived from \"CommonBaseButton\" to make the Enhanced Input Trigger support the \"Hold\" action without modifying the UE source code.</p>"},{"location":"UI/CommonUI/03Hold%20Support%20For%20Enhnaced%20Input/#holdsupportbasebuttonh","title":"HoldSupportBaseButton.h","text":"<pre><code>#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"CommonButtonBase.h\"\n#include \"HoldSupportBaseButton.generated.h\"\n\nclass FHoldEventDelegate;\n/**\n *  Enhanced Input trigger Hold support button\n */\nUCLASS()\nclass AURA_API UHoldSupportBaseButton : public UCommonButtonBase\n{\n    GENERATED_BODY()\n\nprotected:\n    virtual void NativeConstruct() override;\n\n    UFUNCTION()\n    void EnhancedHoldProgress(float HoldProgress);\n\npublic:\n\n    UFUNCTION(BlueprintImplementableEvent, Category = \"Aura|UI\")\n    void OnHoldComplete();\n\n    UFUNCTION()\n    void CheckAndAddHoldBinding();\n\n    FDelegateHandle HoldSupportHandle;\n};\n</code></pre>"},{"location":"UI/CommonUI/03Hold%20Support%20For%20Enhnaced%20Input/#holdsupportbasebuttoncpp","title":"HoldSupportBaseButton.cpp","text":"<pre><code>#include \"UI/Widget/HoldSupportBaseButton.h\"\n#include \"EnhancedActionKeyMapping.h\"\n#include \"EnhancedInputSubsystems.h\"\n#include \"ICommonInputModule.h\"\n#include \"Input/UIActionBinding.h\"\n#include \"UI/Widget/AuraActivatableWidget.h\"\n\nvoid UHoldSupportBaseButton::NativeConstruct()\n{\n    Super::NativeConstruct();\n    CheckAndAddHoldBinding();\n\n    if (GetOwningLocalPlayer())\n    {\n        UEnhancedInputLocalPlayerSubsystem* EnhancedInputSubsystem = GetOwningLocalPlayer()-&gt;GetSubsystem&lt;UEnhancedInputLocalPlayerSubsystem&gt;();\n        if (EnhancedInputSubsystem)\n        {\n            // make sure FEnhancedActionKeyMapping is set up correctly\n            EnhancedInputSubsystem-&gt;ControlMappingsRebuiltDelegate.AddUniqueDynamic(this, &amp;UHoldSupportBaseButton::CheckAndAddHoldBinding);\n        }\n    }\n\n}\n\n/*\n * I don't want to use bRequiresHold for EnhancedInputAction, I want to use the mapping to determine if it requires hold,\n * the bRequiresHold is for Button itself not for a speacific EnhancedInputAction\n * if a EnhancedInputAction has a hold mapping, then it requires hold.\n * \n */\nvoid UHoldSupportBaseButton::CheckAndAddHoldBinding()\n{\n    // if (!bRequiresHold) return;\n    if (!TriggeringEnhancedInputAction) return;\n    if (!TriggeringBindingHandle.IsValid()) return;\n    const TSharedPtr&lt;FUIActionBinding&gt; ActionBinding = FUIActionBinding::FindBinding(TriggeringBindingHandle);\n    if (!ActionBinding.IsValid()) return ;\n    // ActionBinding-&gt;OnHoldActionPressed.AddUObject(this, &amp;UHoldSupportBaseButton::NativeOnPressed);\n    ActionBinding-&gt;OnHoldActionProgressed.Remove(HoldSupportHandle);\n\n    HoldSupportHandle = ActionBinding-&gt;OnHoldActionProgressed.AddUObject(this,&amp;UHoldSupportBaseButton::EnhancedHoldProgress);\n    if (const UEnhancedInputLocalPlayerSubsystem* InputSystem = GetOwningLocalPlayer()-&gt;GetSubsystem&lt;UEnhancedInputLocalPlayerSubsystem&gt;())\n    {\n        for (const FEnhancedActionKeyMapping&amp; Mapping : InputSystem-&gt;GetAllPlayerMappableActionKeyMappings())\n        {\n            if (Mapping.Action == TriggeringEnhancedInputAction)\n            {\n                UInputTriggerHold* Trigger = nullptr;\n                Mapping.Action-&gt;Triggers.FindItemByClass(&amp;Trigger);\n                if (Trigger)\n                {\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, Trigger-&gt;HoldTimeThreshold, Trigger-&gt;HoldTimeThreshold);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n                else  if (HoldData &amp;&amp; bRequiresHold)\n                {\n                    const UCommonUIHoldData* CommonUIHoldBehaviorValues =HoldData.GetDefaultObject();\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, CommonUIHoldBehaviorValues-&gt;KeyboardAndMouse.HoldTime, CommonUIHoldBehaviorValues-&gt;KeyboardAndMouse.HoldRollbackTime);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n            }\n        }\n    }\n}\n\n\n\nvoid UHoldSupportBaseButton::EnhancedHoldProgress(const float HoldProgress)\n{\n    if (HoldProgress &gt;= 1.0f)\n    {\n        OnHoldComplete();\n    }\n}\n</code></pre>"},{"location":"UI/CommonUI/05ActionBar%20Support%20%27Hold%27/","title":"CommonActionWidget ActionBar Support 'Hold'","text":"<p>Basically, the Enhanced Input by default doesn't support triggering BoundButton in the ActionBar using Hold through Enhanced Trigger.</p> <p>So, I implemented a widget that allows dynamically adding buttons to the ActionBar in Blueprint and supports choosing whether Hold is needed or not.</p> <p></p>"},{"location":"UI/CommonUI/05ActionBar%20Support%20%27Hold%27/#blueprint-setup","title":"Blueprint Setup","text":"<ul> <li> <p>Supports a default action:     </p> </li> <li> <p>Allows adding actions dynamically:     </p> </li> </ul>"},{"location":"UI/CommonUI/05ActionBar%20Support%20%27Hold%27/#code","title":"Code","text":"UAuraActivatableWidget.h<pre><code>USTRUCT(BlueprintType)\nstruct FHoldSupportAction\n{\n    GENERATED_BODY()\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = \"Input\")\n    TObjectPtr&lt;UInputAction&gt; EnhancedInputAction;\n\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = \"Input\")\n    bool bHoldEnabled = false;\n};\n\n/**\n * \n */\nUCLASS()\nclass AURA_API UAuraActivatableWidget : public UCommonActivatableWidget\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintCallable)\n    virtual void SetWidgetController(UObject* InWidgetController);\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void HandleDefaultActionPress();\n\n    UFUNCTION(BlueprintCallable, Category = \"Aura|UI\")\n    void RegisterEnhancedActionToActionBar(const FHoldSupportAction&amp; HoldSupportAction, const FSupportEventDelegate&amp; HoldEventDelegate);\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void OnMenuEmpty();\n\nprotected:\n    virtual void NativeOnInitialized() override;\n\n    UFUNCTION(BlueprintImplementableEvent, Category = \"Aura|UI\")\n    void DefaultHoldComplete();\n\n    void AddHoldBinding(const FUIActionBindingHandle&amp; ActionBindingHandle, UInputAction* BEnhancedInputAction, const FSupportEventDelegate&amp; HoldEventDelegate);\n\n    UPROPERTY(BlueprintReadOnly)\n    TObjectPtr&lt;UObject&gt; AuraWidgetController;\n\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void OnWidgetControllerSet();\n\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (EditCondition = \"CommonInput.CommonInputSettings.IsEnhancedInputSupportEnabled\", EditConditionHides))\n    FHoldSupportAction DefaultEnhancedInputAction;\n\n\n\nprivate:\n\n    FUIActionBindingHandle DefaultActionHandle;\n\n\n\n};\n</code></pre> UAuraActivatableWidget.cpp<pre><code>void UAuraActivatableWidget::SetWidgetController(UObject* InWidgetController)\n{\n    if (InWidgetController)\n    {\n        AuraWidgetController = InWidgetController;\n        OnWidgetControllerSet();\n        UWidgetLibraryHelp::SetWidgetController(InWidgetController, WidgetTree);\n    }\n}\n\n\nvoid UAuraActivatableWidget::AddHoldBinding(const FUIActionBindingHandle&amp; ActionBindingHandle, UInputAction* BEnhancedInputAction, const FSupportEventDelegate&amp; HoldEventDelegate)\n{\n    if (!GetOwningLocalPlayer()) return;\n    if (!BEnhancedInputAction) return;\n    const TSharedPtr&lt;FUIActionBinding&gt; ActionBinding = FUIActionBinding::FindBinding(ActionBindingHandle);\n    if (!ActionBinding.IsValid()) return;\n\n    ActionBinding-&gt;OnHoldActionProgressed.AddLambda([HoldEventDelegate](const float HoldProgress)\n    {\n        if (HoldProgress &gt;= 1.0f)\n        {\n            HoldEventDelegate.ExecuteIfBound();\n        }\n    });\n\n    if (const UEnhancedInputLocalPlayerSubsystem* InputSystem = GetOwningLocalPlayer()-&gt;GetSubsystem&lt;UEnhancedInputLocalPlayerSubsystem&gt;())\n    {\n        for (const FEnhancedActionKeyMapping&amp; Mapping : InputSystem-&gt;GetAllPlayerMappableActionKeyMappings())\n        {\n            if (Mapping.Action == BEnhancedInputAction)\n            {\n                UInputTriggerHold* Trigger = nullptr;\n                Mapping.Action-&gt;Triggers.FindItemByClass(&amp;Trigger);\n                if (Trigger)\n                {\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, Trigger-&gt;HoldTimeThreshold, Trigger-&gt;HoldTimeThreshold);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n                else\n                {\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, 0.75f, 0.75f);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n            }\n        }\n    }\n}\n\n\n\n\nvoid UAuraActivatableWidget::RegisterEnhancedActionToActionBar(const FHoldSupportAction&amp; HoldSupportAction, const FSupportEventDelegate&amp; HoldEventDelegate)\n{\n    const FUIActionBindingHandle ActionBindingHandle = RegisterUIActionBinding(FBindUIActionArgs(HoldSupportAction.EnhancedInputAction, true,\n                                                                                                 FSimpleDelegate::CreateLambda([HoldSupportAction,HoldEventDelegate]()\n                                                                                                 {\n                                                                                                     if (!HoldSupportAction.bHoldEnabled)\n                                                                                                     {\n                                                                                                         HoldEventDelegate.ExecuteIfBound();\n                                                                                                     }\n                                                                                                 })));\n    if (HoldSupportAction.bHoldEnabled)\n    {\n        AddHoldBinding(ActionBindingHandle, HoldSupportAction.EnhancedInputAction, HoldEventDelegate);\n    }\n}\n</code></pre>"},{"location":"UI/CommonUI/06HandleInputChange/","title":"CommonUI Gamepad Mouse Missing","text":"<p>\u6700\u8fd1\u53d1\u73b0\uff0cFUIInputConfig\u8bbe\u7f6e\u4e86\u4e0d\u9690\u85cf\u9f20\u6807\uff0c\u4f46\u662f\u4e00\u7528\u624b\u67c4\uff0c\u9f20\u6807\u7acb\u5373\u6d88\u5931\u3002</p>"},{"location":"UI/CommonUI/06HandleInputChange/#_1","title":"\u5bfb\u627e\u8f93\u5165\u5207\u6362\u7684\u5165\u53e3","text":"<p>\u901a\u8fc7 OnInputMethodChangedNative \u6dfb\u52a0\u76d1\u542c </p>"},{"location":"UI/CommonUI/06HandleInputChange/#_2","title":"\u5207\u6362\u7684\u5904\u7406","text":"<p>\u5728UCommonUIActionRouterBase::ApplyUIInputConfig(const FUIInputConfig&amp; NewConfig, bool bForceRefresh) \u9605\u8bfb\u8fd9\u91cc\u7684\u4ee3\u7801\uff0c\u5c1d\u8bd5\u7406\u89e3\u4e3a\u4ec0\u4e48gamepad\u6a21\u5f0f\u4e0b \u9f20\u6807\u4f1a\u6d88\u5931  \u8fd9\u91cc\u662f\u6839\u636eUIInputConfing\u6765\u5207\u6362\u8f93\u5165\u6a21\u5f0f\uff0c\u4f46\u662f\u8c03\u8bd5\u53d1\u73b0\uff0c\u914d\u7f6e\u662f\u6b63\u786e\u7684\uff0c\u548c\u8fd9\u91cc\u65e0\u5173\uff0cGamePad \u6a21\u5f0f\u9f20\u6807\u5c31\u662f\u4e0d\u663e\u793a\uff0c\u53ea\u597d\u53e6\u627e\u9ad8\u660e\u3002</p>"},{"location":"UI/CommonUI/06HandleInputChange/#_3","title":"\u67f3\u6697\u82b1\u660e","text":"<p>\u641c\u7d22\u51e0\u767e\u6b21\u4ee3\u7801\uff0c\u7ec8\u4e8e\u8ba9\u6211\u627e\u5230\u4f60\u4e86\uff01  \u8fd9\u4e2aRefreshCursorVisibility\u4f1a\u5728CommonAnalogCursor::Tick\u91cc\u8c03\u7528\u30023\u79cd\u60c5\u51b5\u4f1a\u663e\u793a\u9f20\u6807\uff1a</p> <ul> <li>bIsAnalogMovementEnabled \u8fd9\u4e2a\u503c\u6ca1\u6709\u63d0\u4f9b\u4fee\u6539\u63a5\u53e3\uff0c\u4e0d\u662f\u5b83</li> <li>ActionRouter.ShouldAlwaysShowCursor() \u7b26\u5408\u603b\u662f\u663e\u793a</li> <li>ActiveInputMethod == ECommonInputType::MouseAndKeyboard \u662f\u952e\u9f20\u6a21\u5f0f</li> </ul> <p></p> <p>\u800c \u7b26\u5408\u603b\u662f\u663e\u793a\u4e5f\u6709\u4e24\u4e2a\u6761\u4ef6\uff1a</p> <ul> <li>bAlwaysShowCursor \u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u53f0\u4fee\u6539\uff0c\u5c31\u5b83\u4e86\u3002    </li> <li>\u540c\u65f6\u7b26\u5408\u6a21\u62df\u89e6\u6478\u7684\u4e24\u4e2a\u6761\u4ef6\u3002  </li> </ul>"},{"location":"UI/CommonUI/06HandleInputChange/#_4","title":"\u8fd8\u662f\u4e0d\u663e\u793a\uff1f","text":"<p>\u5982\u679c\u8fd8\u662f\u4e0d\u663e\u793a\uff0cbEnableGamepadPlatformCursor\u4e5f\u8981\u8bbe\u7f6e\u4e3atrue </p><pre><code>bool bEnableGamepadPlatformCursor = false;\nstatic const FAutoConsoleVariableRef CVarInputEnableGamepadPlatformCursor\n(\n    TEXT(\"CommonInput.EnableGamepadPlatformCursor\"),\n    bEnableGamepadPlatformCursor,\n    TEXT(\"Should the cursor be allowed to be used during gamepad input\")\n);\n</code></pre>"},{"location":"UI/CommonUI/06HandleInputChange/#_5","title":"\u8fd8\u6709\u5927\u5751\uff1f","text":"<ul> <li> <p>\u8c03\u8bd5\u53d1\u73b0\uff0c\u5982\u679c\u70b9\u51fbface button bottom, \u4f1a\u89e6\u53d1\u70b9\u51fb\u4e8b\u4ef6\uff0c\u9f20\u6807\u4f1a\u56de\u5230\u5c4f\u5e55\u4e2d\u95f4\uff01     </p> </li> <li> <p>\u8fd9\u91cc\u6ca1\u6709\u53ef\u7528\u7684\u5f00\u5173\u53d8\u91cf\uff0c\u70b9\u51fb\u540e\u4e00\u5b9a\u4f1a\u88ab<code>TargetGeometry.GetAbsolutePositionAtCoordinates(FVector2D(0.5f, 0.5f));</code> \u628a\u9f20\u6807\u8bbe\u7f6e\u56de\u5c4f\u5e55\u4e2d\u95f4\u3002 \u800cbLinkCursorToGamepadFocus\u76ee\u524d\u662f\u4e2a\u6ca1\u7528\u4e0a\u7684\u865a\u5047\u5360\u4f4d\u53d8\u91cf\u3002    </p> </li> <li>\u7136\u540e\uff0c\u8fd8\u53d1\u73b0\u8981\u4e00\u4e2a\u597d\u73a9\u7684\u5185\u90e8\u6d4b\u8bd5\u4ee3\u7801\uff0c\u540c\u65f6\u6309\u4e0b\u8fd94\u4e2a\u6309\u952e\u4e00\u79d2\uff0c\u4f1a\u89e6\u53d1\u9690\u85cf\u5f00\u5173\uff0c\u9f20\u6807\u4e0d\u4f1a\u56de\u4e2d\u95f4\u4e86\uff0c\u4f46\u624b\u67c4\u5de6\u8fb9\u53d8\u6210\u79fb\u52a8\u9f20\u6807\u4e86\u3002 \u76ee\u524d\u6765\u8bf4\uff0c\u53ea\u80fd\u4fee\u6539\u6e90\u7801\u5b9e\u73b0\u3002</li> </ul> <p></p>"},{"location":"UI/CommonUI/06HandleInputChange/#usage","title":"Usage","text":"<p>\u5982\u679c\u4e0d\u6309face button bottom\u8fdb\u884c\u70b9\u51fb\u4e8b\u4ef6\uff0c\u529f\u80fd\u8fd8\u662f\u6b63\u5e38\u7684\u3002 tab ` to open console: </p><pre><code>CommonUI.AlwaysShowCursor true\n</code></pre> <p>Or blueprint</p> <p></p>"},{"location":"UI/CommonUI/06HandleInputChange/#_6","title":"\u540e\u7eed\u6d4b\u8bd5","text":"<p>\u53d1\u73b0\u8fd9\u79cd\u5f3a\u884c\u663e\u793a\u9f20\u6807\u7684\u65b9\u5f0f\uff0c\u8fd8\u662f\u5f88\u591abug, \u6bd4\u5982\u9700\u8981\u7b49\u5e26\u4e00\u6bb5\u65f6\u95f4\uff0c\u9f20\u6807\u624d\u4f1a\u663e\u793a\u51fa\u6765\uff0c\u800c\u4e14\u9f20\u6807\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u7a81\u7136\u52a0\u901f\uff0c\u6682\u65f6\u6ca1\u7a7a\u7814\u7a76\u3002\u76ee\u524d\u5148\u653e\u5f03\u3002</p>"},{"location":"UI/CommonUI/07CustomAnalogCursor/","title":"The CommonUI Gamepad FaceButton-Bottom is already taken.","text":"<p>When using CommonUI, the FaceButton-Bottom is already reserved by the system to simulate a Mouse Left Click. It's quite annoying, so I dug into the code and \"fixed\" the issue.</p>"},{"location":"UI/CommonUI/07CustomAnalogCursor/#custom-fcommonanalogcursor","title":"Custom FCommonAnalogCursor","text":"<p>The FCommonAnalogCursor is an InputAction pre-processor. When an input action is consumed by this pre-processor, the EnhancedInput Subsystem won't receive this input action.</p> <p>I discovered that this function in FCommonAnalogCursor is intercepting our original InputAction. So, we just need to override it to prevent FCommonAnalogCursor from handling the InputAction of FaceButton-Bottom.</p> FCommonAnalogCursor.cpp<pre><code>bool FCommonAnalogCursor::IsRelevantInput(const FKeyEvent&amp; KeyEvent) const\n{\n    return IsUsingGamepad() &amp;&amp; FAnalogCursor::IsRelevantInput(KeyEvent) &amp;&amp; (IsGameViewportInFocusPathWithoutCapture() || (KeyEvent.GetKey() == EKeys::Virtual_Accept &amp;&amp; CanReleaseMouseCapture()));\n}\n</code></pre> <p>Here is my solution: </p> <ul> <li> <p>Create those classes:</p> <p></p> </li> <li> <p>like so:</p> <p>(UCommonUIActionRouterBase not need to manually call, the SubSystem will handle it, Subsystem)</p> UAuraUIActionRouterBase<pre><code>#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"Input/CommonUIActionRouterBase.h\"\n#include \"AuraUIActionRouterBase.generated.h\"\nUCLASS()\nclass AURA_API UAuraUIActionRouterBase : public UCommonUIActionRouterBase\n{\n    GENERATED_BODY()\n\nprotected:\n    virtual TSharedRef&lt;FCommonAnalogCursor&gt; MakeAnalogCursor() const override;\n\n};\n\n#include \"AuraUIActionRouterBase.h\"\n\n#include \"AuraAnalogCursor.h\"\n#include \"Input/CommonAnalogCursor.h\"\n\nTSharedRef&lt;FCommonAnalogCursor&gt; UAuraUIActionRouterBase::MakeAnalogCursor() const\n{\n    return FCommonAnalogCursor::CreateAnalogCursor&lt;FAuraAnalogCursor&gt;(*this);\n}\n</code></pre> FAuraAnalogCursor.h<pre><code>#pragma once\n#include \"Input/CommonAnalogCursor.h\"\n\nclass FAuraAnalogCursor final : public FCommonAnalogCursor\n{\n\npublic:\n    explicit FAuraAnalogCursor(const UCommonUIActionRouterBase&amp; InActionRouter)\n        : FCommonAnalogCursor(InActionRouter)\n    {\n    }\n\nprotected:\n    virtual bool IsRelevantInput(const FKeyEvent&amp; KeyEvent) const override;\n\n\n};\n</code></pre> </li> <li> <p>Only when the Active Input Mode is Menu Mode, should it simulate the Mouse Left Click.     </p> </li> </ul>"},{"location":"UI/CommonUI/07CustomAnalogCursor/#other-problem","title":"Other Problem","text":"<p>At this moment, the FaceButton-Bottom doesn't simulate a Left Mouse Click in \"Game Input Mode\". However, if the FaceButton-Bottom doesn't handle your custom event properly, try opening the console and typing <code>showdebug EnhancedInput</code>. It's possible that some other Input-Action is overriding it, so you may need to adjust the Mapping priority. Or there could be another issue to consider. Please refer to Priority.</p>"},{"location":"UI/CommonUI/07CustomAnalogCursor/#doc","title":"Doc","text":"<p>\u6587\u6863\u8fd8\u544a\u8bc9\u6211\u4eec\uff0c\u5149\u6807\u7684\u53ef\u89c1\u6027\uff0c\u662f\u5426\u5c45\u4e2d\uff0c\u90fd\u53ef\u4ee5\u91cd\u5199\u8fd9\u4e2a\u7c7b\u6765\u81ea\u5b9a\u4e49\u81ea\u5df1\u8981\u7684\u884c\u4e3a\u3002 </p>"},{"location":"UI/CommonUI/08CropoutSample/","title":"CommonUI In Cropout Demo","text":"<p>Cropout\u662f\u865a\u5e7b\u5b98\u65b9\u5f00\u6e90\u7684\u4e00\u4e2a\u7c7b\u4f3c\u7684RTS\u7684\u6e38\u620f\uff0c\u548cLyra \u4e00\u6837\u4f7f\u7528\u4e86CommonUI\uff0c\u800cCropout\u662f\u76f8\u5bf9\u7b80\u5355\u7684\u7eaf\u84dd\u56fe\u9879\u76ee\u3002</p> <p>\u5b98\u7f51:https://www.unrealengine.com/en-US/blog/cropout-casual-rts-game-sample-project</p>"},{"location":"UI/CommonUI/08CropoutSample/#layer","title":"Layer","text":"<p>Cropout \u548c Lyra \u6700\u5927\u7684\u533a\u522b\uff0c\u6ca1\u6709\u5c06 Game Stack \u548c Menu Stack \u653e\u5728\u540c\u4e00\u4e2a Root Widget \u91cc\uff0c\u5b83\u4eec\u5206\u522b\u5728\u4e92\u76f8\u72ec\u7acb\u5173\u5361\u91cc\u9762\u3002</p> <ul> <li> <p>GameLayer \u901a\u8fc7BP_GM \u521b\u5efa\u548c\u6fc0\u6d3b </p> </li> <li> <p>MenuLayer \u901a\u8fc7 BP_MainMenuGM \u521b\u5efa\u6fc0\u6d3b </p> </li> </ul> <p>\u4e2a\u4eba\u8ba4\u4e3a\uff0c\u4e3b\u5173\u5361\u5e94\u8be5\u50cfLara\u90a3\u6837\uff0c\u540c\u65f6\u652f\u6301\u4e24\u4e2aStack\uff0c\u4e0d\u8fc7lyra\u4e5f\u662f\u901a\u8fc7\u84dd\u56fe\u6765\u521b\u5efaStack\uff0c\u8003\u8651\u5230stack\u7684\u7ed3\u6784\u662f\u51e0\u4e4e\u4e0d\u4f1a\u53bb\u6539\u53d8\u7684\uff0c\u6211\u89c9\u5f97\u5e94\u8be5\u653e\u5728C++ \u5c42\u53bb\u5b9e\u73b0\uff0c\u5206\u914d\u597dGame \u548c Menu\u4e24\u4e2a stack\uff0c\u63d0\u4f9b\u7ed9\u84dd\u56fe\u4f7f\u7528\uff0c\u51cf\u5c11\u84dd\u56fe\u4f7f\u7528\u7684\u590d\u6742\u5ea6\u3002</p> <ul> <li>\u6211\u7684\u5b9e\u73b0\uff1a   </li> </ul> <p>\u66f4\u591a\u8bf7\u53c2\u8003\u8fd9\u91cc</p>"},{"location":"UI/CommonUI/08CropoutSample/#common-input","title":"Common Input","text":"<p>Cropout \u7684commonUI\u6ca1\u6709\u4f7f\u75285.4\u63d0\u4f9b\u7684Enhanced Input\u652f\u6301\uff0c\u843d\u540e\u4e00\u4e2a\u7248\u672c\u3002</p> <ul> <li> <p>Project-&gt;Game-&gt;Common Input Settings:   </p> </li> <li> <p>\u9700\u8981DataTable\u6765\u914d\u7f6e\u8f93\u5165\u6570\u636e, \u8fd9\u91cc\u663e\u793a\u624b\u67c4\u7684\u786e\u8ba4\u6309\u94ae\u662fA   </p> </li> <li> <p>\u65b0\u7684\u4e0d\u9700\u8981dataTable,\u53ea\u9700\u7b80\u5355\u914d\u7f6eUI\u5bf9\u5e94\u7684Action\uff1a   </p> </li> </ul> <p>\u867d\u7136\u914d\u7f6e\u76f8\u5bf9\u9ebb\u70e6\u5199\uff0c\u4f46\u66f4\u7a33\u5b9a\uff0c\u6ca1\u6709\u542f\u7528 Enhanced Input Support \u540e \u624b\u67c4A\u952e \u88ab\u5403\u6389\u7684\u95ee\u9898\u3002</p>"},{"location":"UI/CommonUI/08CropoutSample/#enhanceinput","title":"\u8ba9\u5b83\u652f\u6301EnhanceInput","text":"<p>\u867d\u7136\u4e0d\u9700\u8981DataTable\uff0c\u4f46\u9700\u8981\u914d\u7f6e\u4e00\u4e2aDataAsset\uff1a - \u65b0\u5efa DataAsset-&gt;Common Mapping Context MetaData   </p> <ul> <li> <p>\u914d\u7f6e\u5168\u5c40\u9ed8\u8ba4\uff0c\u548c\u5355\u72ec\u6307\u5b9a\u3002\u66f4\u591a </p> </li> <li> <p>\u6839\u636e\u8868\u683c\u7684\u5b9a\u4e49\u7684action\uff0c\u65b0\u5efaenhance input action       \u7c7b\u4f3c\uff1a   </p> </li> <li> <p>\u627e\u5230\u7236\u5e03\u5c40\uff0c\u628aMapping \u8bbe\u7f6e\u597d</p> </li> <li> <p>\u6700\u540e\uff0c\u627e\u5230\u5bf9\u5e94\u7684BaseButton\uff0cInput-&gt; \u52a0\u5165\u5bf9\u5e94\u7684Action\u5373\u53ef</p> </li> </ul>"},{"location":"UI/CommonUI/08CropoutSample/#bug","title":"Bug","text":"<ul> <li> <p>Cropout \u662f\u57fa\u4e8e5.2-5.3\u7684\uff0c\u4f9d\u65e7\u4f7f\u7528 SetInputMode \u7684\u65b9\u5f0f\u6765\u5207\u6362\u8f93\u5165\u65b9\u5f0f\u3002\u53ef\u80fd\u4f1a\u6709\u9f20\u6807\u63a7\u5236\u9519\u4e71\u7684bug\uff0c\u8be6\u7ec6\u89c1xist\u7684\u8bf4\u660e </p> </li> <li> <p>Cropout\u5230\u5904\u90fd\u662f setinput mode \u7684\u5207\u6362\u7ba1\u7406\uff0c \u7279\u522b\u7e41\u7410   </p> </li> </ul>"},{"location":"UI/CommonUI/08CropoutSample/#feature","title":"\u7528\u65b0feature\u89e3\u51b3","text":"<ul> <li> <p>\u641c\u7d22\u5168\u90e8 SetInputMode,\u5220\u6389\u6216\u8005\u4e0d\u6267\u884c</p> </li> <li> <p>\u8bbe\u7f6e \u5bf9\u5e94\u7684 Desired InputConfig</p> </li> <li> <p>Game Layer: \u8bbe\u7f6e \u652f\u6301\u53ef\u6fc0\u6d3b </p> </li> <li> <p>\u6548\u679c\uff1aInputConfig\u4f1a\u81ea\u52a8\u6fc0\u6d3b\u4e86   </p> </li> </ul>"},{"location":"UI/CommonUI/08CropoutSample/#facebutton-bottom","title":"FaceButton Bottom","text":"<p>\u7531\u4e8e\u539f\u9879\u76ee\u4f7f\u7528\u7684\u662f SetInputMode \u6765\u8bbe\u7f6e \u8f93\u5165\u6a21\u5f0f\uff0c\u6240\u4ee5 \u5b83\u7684 Xbox\u624b\u67c4 A\u952e \u6ca1\u6709\u88ab \u6a21\u62df\u6210 \u5de6\u952e\u70b9\u51fb\u3002</p> <p>\u6539\u7528\u65b0 feature\u540e\uff0c\u6210\u529f\u590d\u73b0 FaceButton Bottom \u88ab CommonUI\u5360\u7528\u7684\u95ee\u9898\u3002\u76ee\u524d\u662f\u7528C++ \u91cd\u5199\u7236\u7c7b\u5224\u65ad\u7684\u65b9\u6cd5\u6765\u89e3\u51b3</p>"},{"location":"zh/","title":"About","text":"<p>\u65c5\u884c\u8005\u4f60\u597d</p> <p>\u672c\u7ad9\u4e3b\u8981\u5206\u4eab\u865a\u5e7b5\u6e38\u620f\u5f00\u53d1\u548c\u5b66\u4e60\u8fc7\u7a0b\u4f1a\u9047\u5230\u7684\u5404\u79cd\u95ee\u9898\uff0c\u6b22\u8fce\u4ea4\u6d41</p> <p>Baisc: \u8f83\u57fa\u7840\u7684\u5185\u5bb9\uff0c\u7b14\u8bb0\u5411\uff0c\u597d\u8bb0\u6027\u4e0d\u5982\u7801\u4e0b\u6765\u3002</p> <p>GAS: Gameplay Abilities System\uff0c\u5728\u5b66\u4e60GAS\u8fc7\u7a0b\u4e2d\uff0c\u8bb0\u5f55\u6211\u7406\u89e3\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>PCG: Procedural Content Generation, \u6211\u5f88\u559c\u6b22PCG\uff0c\u6211\u559c\u6b22\u7528\u4ee3\u7801\u50cf\u9b54\u6cd5\u4e00\u6837\u6784\u5efa\u6e38\u620f\u4e16\u754c,\u6b22\u8fce\u4ea4\u6d41\u3002</p> <p>UI: UI\u89e3\u51b3\u65b9\u6848\u8bb0\u5f55</p> <p>\u90e8\u5206post\u6211\u4f1a\u4f7f\u7528\u4e2d\u82f1\u53cc\u8bed\uff0c\u6216\u8005\u53ea\u5199\u82f1\u8bed\u6216\u8005\u4e2d\u6587\u7248\u672c\u4e4b\u4e00\uff0c\u56e0\u4e3a\u6211\u5728\u5b66\u4e60\u82f1\u8bed\u3002\ud83d\ude01</p>"},{"location":"zh/Basic/Material/","title":"Material","text":"<p>\u6750\u8d28\u51fd\u6570\u91cc\u753b\u5708\u5708\u7684\u51e0\u79cd\u65b9\u5f0f</p>"},{"location":"zh/Basic/Material/#_1","title":"\u5750\u6807\u7cfb","text":"<p>\u6839\u636e\u559c\u597d\uff0c\u9009\u62e9\u4f60\u7684\u5750\u6807\u7cfb</p>"},{"location":"zh/Basic/Material/#_2","title":"\u7b80\u5355\u5750\u6807\u7cfb","text":"<p>\u666e\u901a\u597d\u7528\uff0c\u8282\u70b9\u5c11\uff0c\uff08-1\uff0c-1\uff09\u5728\u53f3\u4e0a\u89d2\uff0c\u548c\u4e66\u672c\u4e0a\u7684\u4e0d\u540c\u6709\u70b9\u53cd\u76f4\u89c9\uff0c\u4f46\u4e60\u60ef\u5c31\u597d </p>"},{"location":"zh/Basic/Material/#_3","title":"\u521b\u5efa\u6807\u51c6\u5750\u6807\u7cfb","text":"<p>\u6807\u51c6\u5750\u6807\u7cfb\u591a\u4e86\u4e24\u4e2a\u6b65\u9aa4\uff0c\u65cb\u8f6c \u548c\u4ea4\u6362 XY\u8f74\uff0c\u867d\u7136\u591a\u4e86\u4e24\u6761\u6307\u4ee4\uff0c\u4f46\u597d\u7684\u5750\u6807\u7cfb\u6709\u52a9\u4e8e\u7406\u89e3 </p>"},{"location":"zh/Basic/Material/#_4","title":"\u753b\u5706","text":""},{"location":"zh/Basic/Material/#lerp","title":"lerp \u4e00\u4e2a","text":"<p>\u8ddd\u79bb\u573a\u4f5c\u4e3a\u6bd4\u4f8b\uff0c\u5bf90\u548c-1 \u63d2\u503c </p>"},{"location":"zh/Basic/Material/#_5","title":"\u51cf\u4e86\u518d\u4e58","text":"<p>\u5c0f\u4e8e0.8\u90fd\u662f\u8d1f\u6570\uff0c\u5168\u9ed1\u3002\u7528\u4e58\u6cd5\u63a7\u5236\u8fb9\u7f18\uff0c\u53ea\u8d8a\u5927\u8d8a\u9510\u5229 </p>"},{"location":"zh/Basic/Material/#radialgradientexponential","title":"RadialGradientExponential","text":"<p>\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\uff0c\u753b\u666e\u901a\u5706\u7528\u8fd9\u4e2a\u4e0d\u63a8\u8350\uff0c\u8ba1\u7b97\u91cf\u76f8\u5bf9\u5927\uff0c\u4e0a\u9762\u90fd\u662f47\u4e2a\u6307\u4ee4\uff0c\u800c\u8fd9\u4e2a\u898151\u4e2a\u3002\u5b83\u80fd\u751f\u6210\u68c9\u82b1\u7cd6\u4e00\u6837\u7684\u5706 </p> <p>\u5185\u90e8\u5b9e\u73b0\u4e5f\u5f88\u590d\u6742\uff0c\u4e0d\u662f\u7279\u522b\u9700\u8981\u8fd9\u79cd\u6548\u679c\uff0c\u6ca1\u5fc5\u8981\u4f7f\u7528\u5b83 </p>"},{"location":"zh/Basic/Material/#spheregradient","title":"SphereGradient","text":"<p>\u5185\u7f6e\u51fd\u6570SphereGradient\u7403\u5f62\u6e10\u53d8\u7684\u5706\uff0c\u5b9e\u73b0\u7c7b\u578b\u4e0b\u56fe\uff0c\u5229\u7528\u5706\u65b9\u7a0b\u5b9e\u73b0\u5e73\u6ed1\u8fc7\u6e21\u7684\u6548\u679c\uff0c\u666e\u901a\u753b\u5706\u4f9d\u7136\u4e0d\u5efa\u8bae\u4f7f\u7528 </p>"},{"location":"zh/Basic/Material/#smoothstep","title":"smoothstep","text":"<p>\u63a8\u8350\uff0c\u7528\u5b83\u753b\u7684\u5706\u662f\u6700\u7b80\u5355\u7684\uff0cmax =min \u5c31\u4e0d\u7528\u5904\u7406\u6e10\u53d8\u503c\uff0c\u8f93\u51fa\u503c\u53ea\u6709\u7eaf\u7cb9\u76840-1\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0cmin \u548c max\u5bf9\u8c03\u7684\u8bdd\uff0c\u4f1a\u53cd\u5411\u3002\u4e0d\u8fc7\u8981\u65b9\u5411\u6700\u597d\u75281-x </p>"},{"location":"zh/Basic/Material/#_6","title":"\u753b\u5708","text":"<p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u4f7f\u7528\u6700\u7b80\u7684\u753b\u51fa\u5927\u5706\uff0c\u518d\u753b\u5c0f\u5706\uff0c\u5c31\u53ef\u4ee5\u753b\u51fa\u5708\u7684</p>"},{"location":"zh/Basic/Material/#_7","title":"\u76f8\u4e58","text":"<p>\u4e24\u5706\uff0c\u4e00\u6b63\u4e00\u53cd\uff0c\u91cd\u53e0\u7684\u90e8\u5206\u662f\u6b63\u6570\uff0c\u76f8\u4e58\u5411\u4e0a\u53d6\u6574 </p>"},{"location":"zh/Basic/Material/#dot","title":"dot","text":"<p>\u4e24\u5706\u70b9\u4e58 dot \u8303\u56f4-1 \u5230 1\uff0c\u91cd\u53e0\u90e8\u5206\u8d8a\u76f8\u4f3c\uff0c\u8d8a\u63a5\u8fd11 </p>"},{"location":"zh/Basic/Material/#_8","title":"\u76f8\u51cf","text":"<p>smoothstep \u8f93\u51fa\u7eaf\u7cb9\u76840\u548c1\uff0c\u975e\u5e38\u68d2 </p>"},{"location":"zh/Basic/Material/#_9","title":"\u52a8\u753b","text":"<p>\u8fd9\u91cc\u7528\u5468\u671f\u65f6\u95f4\u9a71\u52a8  atan2\u7684\u53d6\u503c\u8303\u56f4\u662f \\(\\left[ -\\pi,\\pi \\right]\\) \u8fd9\u91cc\u6709\u4e2a\u5999\u5904\uff0c\u5c31\u662f\u9664\u4ee52\u03c0 \u548c \u7528frac\u53d6\u5c0f\u6570\u3002\u4e4b\u6240\u4ee5\u9664\u4ee52\u03c0\u4e0d\u662f\u03c0\u662f\u56e0\u4e3a\uff1a</p> <ul> <li>\u9664\u4ee52\u03c0\u8303\u56f4\u53d8\u6210\\(\\left[ -0.5,0.5 \\right]\\)</li> <li>frac \u5bf9\u8d1f\u6570\u7684\u5904\u7406\u662f 1-x,\u6bd4\u5982-0.4\uff0c\u53d6\u5c0f\u6570\u90e8\u52060.4\uff0c\u7136\u540e1-0.4=0.6</li> <li>\u7531\u4e8e\u8fd9frac\u64cd\u4f5c\u503c\u7ee7\u7eed\u4e0a\u5347\uff0c\u76f4\u52301, \u4e8e\u662f\u5c31\u53ef\u4ee5\u5b8c\u6574\u8d70\u5b8c\u4e00\u5708\u3002  </li> </ul>"},{"location":"zh/Basic/Material/#_10","title":"\u7b80\u5355\u7ed3\u5408","text":""},{"location":"zh/PCG/UE5.4PCGWithCPP/","title":"UE5.4 PCG \u81ea\u5b9a\u4e49\u8282\u70b9 C++\u5e38\u7528\u7c7b \u6d45\u6790","text":""},{"location":"zh/PCG/UE5.4PCGWithCPP/#upcgdata","title":"UPCGData","text":"<ul> <li>\u76f8\u5f53\u4e8e PGC\u7684\u201cUObject\u201d, \u5927\u90e8\u5206PCG\u7684\u7c7b\u90fd\u6d3e\u751f\u4e8e\u5b83\u3002</li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#fpcgpoint","title":"FPCGPoint","text":"<ul> <li>PCG \u70b9\u7684\u5143\u7ed3\u6784\uff0c\u5c31\u662f\u84dd\u56fe\u91cc\u8c03\u8bd5\u65f6\u663e\u793a\u7684\u70b9\u4fe1\u606f\uff0cPosition, Density, Bound \u7b49\u5f85\u3002</li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#fpcgcontext","title":"FPCGContext","text":"<ul> <li>\u6267\u884c\u65f6\u7684\u4e0a\u4e0b\u6587\uff08\u6709\u591a\u5c11\u7ebf\u8fde\u8fdb\u6765\u53ef\u4ee5\u901a\u8fc7\u5b83\u83b7\u53d6)</li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#upcgsettings","title":"UPCGSettings","text":"<ul> <li>\u5927\u90e8\u5206PCG \u8282\u70b9\u90fd\u662f\u5e26UPCGSettings\u7684\uff0c\u81ea\u5b9a\u4e49\u8282\u70b9\u4e5f\u7ee7\u627f\u8fd9\u4e2a\u7c7b\uff0c\u662f\u5bf9\u6574\u4e2a\u8282\u70b9\u914d\u7f6e\u7684\u5305\u88c5\uff0c\u7528\u4e8e\u751f\u6210IPCGElement\u5c31\u662f\u84dd\u56fe\u91cc\u6211\u4eec\u770b\u5230\u7684\u8282\u70b9\uff0c\u5916\u90e8\u901a\u8fc7IPCGElement::Execute\u6765\u6267\u884c<code>UPCGSettings::ExecuteInternal</code>\u65b9\u6cd5\u3002ExecuteInternal\u5c31\u662f\u6211\u4eec\u81ea\u5b9a\u4e49\u903b\u8f91\u7684\u5730\u65b9\u3002</li> <li>\u81ea\u5b9a\u4e49\u53d8\u91cf\u5199\u5728\u8fd9\u91cc\uff0c\u5c31\u53ef\u4ee5\u5728graph \u8282\u70b9\u91cc\u914d\u7f6e</li> <li>\u8be5\u7c7b\u4e5f\u662f\u6d3e\u751f\u4e8eUPCGData</li> <li> <p>Settings\u91cc\u4f1a\u7528\u5230\u4e24\u4e2a\u91cd\u8981\u7684\u7ed3\u6784\u4f53</p> </li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#fpcgpinproperties","title":"FPCGPinProperties","text":"<ul> <li>\u662fPin\u7684\u5c5e\u6027\u7c7b\uff0c\u7528\u4e8e\u63cf\u8ff0UPCGSettings\u7684Input/Output Pin \u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u662f\u5426\u4e3a\u9ad8\u7ea7\uff0c\u662f\u5426\u5fc5\u987b\u8bbe\u7f6e(EPCGPinStatus::Required) \u7b49</li> <li>\u901a\u8fc7EPCGDataType\u6765\u914d\u7f6ePin\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6700\u5e38\u7528\u7684\u7c7b\u578b\u662fPoint \u548c Param, Param\u5c31\u662f\u84dd\u56fe\u91cc\u7684Attribute Set\u7c7b\u578b</li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#fpcgtaggeddata","title":"FPCGTaggedData","text":"<ul> <li>Pin\u7684\u6570\u636e\u7c7b\uff0c\u7528\u4e8e\u63cf\u8ff0Pin\u7684\u6570\u636e\u3002\u88ab\u6267\u884c\u65f6\uff0c\u9700\u8981\u4eceFPCGContext\u83b7\u5f97\u8fde\u63a5\u8fdb\u6765\u7684\u6570\u636e\u3002\u201c\u6709\u591a\u5c11\u7ebf\u8fde\u8fdb\u6765\uff0c\u5c31\u6709\u591a\u5c11FPCGTaggedData\u201d</li> <li>\u6709\u4e2a\u6570\u636e\u5b57\u6bb5<code>TObjectPtr&lt;const UPCGData&gt; Data</code>\uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\uff0ccast \u6210\u81ea\u5df1\u8981\u7684\u6d3e\u751f\u7c7b</li> <li> <p>\u8f93\u5165\u6570\u636e \u9700\u8981\u7528 <code>Outputs.Add_GetRef(Input)</code> \u5173\u8054\u4e00\u4e0b input</p> <pre><code>//step1 \u4ece\u6267\u884c\u7684\u4e0a\u4e0b\u6587\u91cc\u83b7\u5f97Outputs\nTArray&lt;FPCGTaggedData&gt;&amp; Outputs = Context-&gt;OutputData.TaggedData;\n//step2 \u5173\u8054Input\nFPCGTaggedData&amp; ChosenTaggedData = Outputs.Add_GetRef(Input);\n//step3 \u5b8c\u6210\u914d\u7f6e\nChosenTaggedData.Data = ChosenPointsData;\nChosenTaggedData.Pin = PCGRandomChoiceSettings::ChosenPointsLabel;\n</code></pre> </li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#upcgpointdata","title":"UPCGPointData","text":"<ul> <li>Point\u7c7b\u578b\u7684\u5305\u88c5\u7c7b\uff0c\u7ee7\u627f\u4e8eUPCGData\uff0c\u5305\u88c5\u4e86FPCGPoint</li> <li>FPCGTaggedData \u7684Data \u7c7b\u578b\u9009\u9879\u4e4b\u4e00</li> <li>\u521b\u5efa\u540e\u901a\u5e38\u8981\u7528Input PointData \u6765InitializeFromData\u5b83,\u56e0\u4e3a \u8fdb\u6765\u7684PointData\u5305\u542b\u4e86\u4e00\u4e9b\u4e0a\u4e0b\u6587\u4e0d\u80fd\u4e22\u5931     <pre><code>UPCGPointData* ChosenPointsData = NewObject&lt;UPCGPointData&gt;();\nChosenPointsData-&gt;InitializeFromData(PointData);\nTArray&lt;FPCGPoint&gt;&amp; ChosenPoints = ChosenPointsData-&gt;GetMutablePoints();\n//\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\nChosenPoints.Reserve(NumberOfElementsToKeep);\n</code></pre></li> </ul>"},{"location":"zh/PCG/UE5.4PCGWithCPP/#upcgparamdata","title":"UPCGParamData","text":"<ul> <li>\u662f\u84dd\u56fe\u91cc\u7684Attribute Set\u7c7b\u578b, \u4e5f\u662fFPCGTaggedData \u7684Data \u7c7b\u578b\u9009\u9879\u4e4b\u4e00</li> <li> <p>\u521b\u5efa\u4e00\u4e2aint32 \u7c7b\u578b \u4ee3\u7801\u793a\u4f8b\uff0c\u5f62\u5f0f\u6709\u70b9\u50cfKey-Value</p> <pre><code>    // Create Attribute set\n    UPCGParamData* ParamData = NewObject&lt;UPCGParamData&gt;();\n    //\u901a\u8fc7CreateAttribute\u521b\u5efa int32, \n    FPCGMetadataAttribute&lt;int32&gt;* Attribute = ParamData-&gt;Metadata-&gt;CreateAttribute&lt;int32&gt;(TEXT(\"ChosenPointsNum\"), NumberOfElementsToKeep, true, true);\n    //\u8d4b\u503c\n    Attribute-&gt;SetValue(ParamData-&gt;Metadata-&gt;AddEntry(), NumberOfElementsToKeep);\n</code></pre> </li> </ul>"},{"location":"zh/Tools/01EditorModule/","title":"Auto Created Cooldown GE","text":"<p>\u5927\u90e8\u5206\u6280\u80fd\u7684\u51b7\u5374\u90fd\u662f\u975e\u5e38\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u6211\u4e0d\u60f3\u6bcf\u4e2a\u7b80\u5355\u7684GE \u90fd\u53bb\u624b\u52a8\u521b\u5efa\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u5199\u4e86\u4e00\u4e2a\u81ea\u52a8\u521b\u5efa\u7684 Asset Action\u3002</p> <p>\u5927\u6982200\u591a\u884c\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u5176\u4ed6Action\u7684\u6a21\u677f\uff0c\u8fc7\u7a0b\u4e2d\u6211\u5b66\u5230\u4e86\u5f88\u591a\u4e1c\u897f\uff0c\u6211\u4f1a\u9644\u4e0a\u8fd9\u4e2a\u529f\u80fd\u7684\u5b8c\u6574\u4ee3\u7801\uff0c\u5e0c\u671b\u5b83\u5bf9\u4f60\u4e5f\u6709\u5e2e\u52a9\u3002</p> <p></p>"},{"location":"zh/Tools/01EditorModule/#_1","title":"\u601d\u8def","text":"<p>Note</p> <p>\u4e4b\u524d\u7684\u5b9e\u8df5\u544a\u8bc9\u6211\uff0c\u6211\u4eec\u6700\u597d\u4e0d\u8981\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u521b\u5efaGE,\u6240\u4ee5\u8fd9\u91cc\u5c31\u76f4\u63a5\u7528Asset Action\u81ea\u52a8\u521b\u5efa\u3002</p> <p>\u5728Gamepaly Ability \u91cc\u9762\u5b9a\u4e49\u51b7\u5374\u65f6\u95f4\u5b57\u6bb5\uff0c\u7136\u540e\u53f3\u952e \u627e\u4e2a\u81ea\u5b9a\u4e49 Action\u7136\u540e\u81ea\u52a8\u521b\u5efa\u4e00\u4e2aGE\u3002\u9664\u4e86\u521b\u5efaGE\u672c\u8eab\uff0c\u8fd8\u6709\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684cool down Tag.</p>"},{"location":"zh/Tools/01EditorModule/#editor-module","title":"Editor Module","text":"<p>\u7531\u4e8e\u5bf9 Asset\u7ecf\u5e38\u64cd\u4f5c\uff0c\u662f\u5c5e\u4e8e Editor Module\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a Editor Module\uff0c</p> <ul> <li> <p>\u4f7f\u7528Rider\u53ef\u4ee5\u5f88\u597d\u5730\u5e2e\u6211\u4eec\u521b\u5efa   </p> </li> <li> <p>\u6dfb\u52a0\u4f9d\u8d56 (private \u8fd8\u662f public \u5199\u7684\u8fc7\u7a0b\u4e2dRider\u81ea\u52a8\u6dfb\u52a0\u6211\u6ca1\u53bb\u7ba1)   </p> </li> </ul>"},{"location":"zh/Tools/01EditorModule/#assetdefinition","title":"\u81ea\u5b9a\u4e49AssetDefinition","text":"<p>\u539f\u672c\u662f\u4f7f\u7528 UAssetDefinitionDefault \u6765\u5b9e\u73b0 asset action\u7684\uff0c\u4f46\u6ce8\u91ca\u63d0\u793a\u8bf4\uff0c\u8fd9\u4e2a\u7c7b\u5df2\u7ecf\u8fc7\u65f6\u4e86\uff0c\u9700\u8981\u7528AssetDefinition</p> <p>\u4e00\u5f00\u59cb\u6211\u76f4\u63a5 UGameplayAbility \u5bf9\u521b\u5efaAssetDefinition\uff0c\u4f46\u53d1\u73b0 UGameplayAbility\u5176\u5b9e\u662f\u5c5e\u4e8e blueprint asset\uff0c\u800c blueprint asset \u5fc5\u7136\u662f\u5df2\u7ecf\u5728\u5f15\u64ce\u5185\u90e8\u5b9e\u73b0\u4e86\uff0c\u81ea\u5df1\u5b9e\u73b0\u7684\u4f1a\u8986\u76d6\u6389\u5f15\u64ce\u5185\u90e8\u7684\u5b9e\u73b0\uff0c\u53ef\u80fd\u8981\u7ee7\u627f\uff0c\u4f46\u60c5\u51b5\u5c31\u53d8\u5f97\u590d\u6742\u3002\u597d\u5728\u770b\u5230\u5185\u90e8\u7684\u4f8b\u5b50\uff0cAssetDefinition \u4e0d\u662f\u4e00\u5b9a\u8981\u5b9e\u73b0\u7684\u3002\u53ef\u53c2\u8003\u3010GameplayAbilityAudit\u3011\u7684\u5b9e\u73b0\u3002</p>"},{"location":"zh/Tools/01EditorModule/#menuextension_xxx","title":"\u81ea\u5b9a\u4e49MenuExtension_xxx","text":"<p><code>namespace MenuExtension_YourActions</code></p> <p>\u53ea\u9700\u8981\u5728\u547d\u540d\u7a7a\u95f4\u91cc\u5b9e\u73b0 \u4e00\u4e2a\u53eb\u505a \u5ef6\u8fdf\u6ce8\u518c\u7684\u65b9\u6cd5\u5373\u53ef\u3002 </p> <p><code>static FDelayedAutoRegisterHelper DelayedAutoRegister(EDelayedRegisterRunPhase::EndOfEngineInit, []</code></p>"},{"location":"zh/Tools/01EditorModule/#_2","title":"\u5b9e\u73b0\u7ec6\u8282","text":"<p>\u6709\u4e24\u4e2a\u4e3b\u8981\u7ec6\u8282\uff1a  - \u521b\u5efaGE \u7684\u84dd\u56fe\u8d44\u4ea7  - \u521b\u5efaGameplayTag \u5e76\u4fdd\u5b58\u5230 .ini \u6587\u4ef6\u91cc</p>"},{"location":"zh/Tools/01EditorModule/#ge","title":"\u521b\u5efaGE","text":"<p><code>FAssetToolsModule&amp; AssetToolsModule = FModuleManager::GetModuleChecked&lt;FAssetToolsModule&gt;(\"AssetTools\");</code></p> <p>\u9996\u5148\u83b7\u5f97AssetToolsModule </p> <pre><code>UBlueprintFactory* BlueprintFactory = NewObject&lt;UBlueprintFactory&gt;();\nBlueprintFactory-&gt;ParentClass = UGameplayEffect::StaticClass();\n// do not Use GE directly\n// UGameplayEffect* NewGE = Cast&lt;UGameplayEffect&gt;(AssetToolsModule.Get().CreateAsset(CooldownGEName, NewGEPath, UGameplayEffect::StaticClass(), nullptr));\nUObject* CreatedAsset = AssetToolsModule.Get().CreateAsset(CooldownGEName, NewGEPath, UBlueprint::StaticClass(), BlueprintFactory);\n</code></pre> <p>\u521b\u5efaGE\u7684\u84dd\u56fe\u8d44\u4ea7\uff0c\u8fd9\u91cc\u9700\u8981\u4f7f\u7528BlueprintFactory\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7528UGameplayEffect\u6765\u521b\u5efa\uff0c\u4e0d\u7136\u53ea\u4f1a\u83b7\u5f97UGameplayEffect\u7684\u9ed8\u8ba4\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u5b83\u84dd\u56fe\u8d44\u4ea7\u3002</p> <pre><code>// GE Blueprint Asset Class\nUClass* GeneratedClass = GE_Blueprint-&gt;GeneratedClass;\n// use the CDO, not New Object\nUGameplayEffect* NewGE = Cast&lt;UGameplayEffect&gt;(GeneratedClass-&gt;GetDefaultObject());\n</code></pre> <p>\u7136\u540e\u5c31\u662f\u83b7\u5f97\u8be5\u84dd\u56fe\u91cc\u7684GeneratedClass\uff0c\u4ee5\u53ca\u5185\u90e8\u7684CDO\uff0c\u624d\u80fd\u7528\u4ee3\u7801\u7ed9\u4ed6\u8d4b\u503c\u3002</p>"},{"location":"zh/Tools/01EditorModule/#gameplaytag","title":"\u521b\u5efaGameplayTag","text":"<p>\u9700\u7528\u7528\u5230IGameplayTagsEditorModule\uff0c\u6240\u4ee5\u5fc5\u987b\u5148\u6dfb\u52a0\u4f9d\u8d56\u3002\u7528\u6cd5\u6bd4\u8f83\u7b80\u5355\uff1a</p> <ul> <li>\u5224\u65ad\u9879\u76ee\u662f\u5426\u5141\u8bb8\u901a\u8fc7ini \u6587\u4ef6\u6765\u521b\u5efaGameplayTag     <pre><code>const UGameplayTagsManager&amp; Manager = UGameplayTagsManager::Get();\n// Only support adding tags via ini file\nif (Manager.ShouldImportTagsFromINI() == false)\n{\n    return;\n}\n</code></pre></li> <li>\u521b\u5efaGameplayTag, <code>static FName DefaultTagINI = \"DefaultGameplayTags.ini\";</code> \u6587\u4ef6\u540d\u6682\u65f6\u9ed8\u8ba4\u4e3a <code>DefaultGameplayTags.ini</code> <pre><code>const TSharedPtr&lt;FGameplayTagNode&gt; TagNode = Manager.FindTagNode(CooldownTagName);\n    if (!TagNode.IsValid())\n    {\n        const FString TagComment = FString::Format(TEXT(\"Auto Gen Cooldown Tag for {0}\"), {TagName});\n        IGameplayTagsEditorModule::Get().AddNewGameplayTagToINI(TagName, TagComment, DefaultTagINI);\n    }\n</code></pre></li> </ul>"},{"location":"zh/Tools/01EditorModule/#_3","title":"\u5b8c\u6574\u4ee3\u7801","text":"<p>GamePlayAbilityGenCooldownGE</p>"},{"location":"zh/Tools/01EditorModule/#_4","title":"\u5176\u4ed6\u5c1d\u8bd5","text":""},{"location":"zh/Tools/01EditorModule/#blueprint-editor-script","title":"blueprint editor script","text":"<p>\u6211\u8fdb\u884c\u8fc7\u5c1d\u8bd5\uff0c\u4f46\u53ea\u80fd\u521b\u5efaGE\u6587\u4ef6\uff0c\u8d4b\u503c\u90e8\u5206\u6682\u65f6\u6ca1\u627e\u5230\u65b9\u6cd5\u3002 Set Editor Property \u6211\u4e0d\u77e5\u9053\u5982\u4f55\u64cd\u4f5c\uff0c\u5982\u679c\u6709\u4eba\u77e5\u9053\uff0c\u8bf7\u7559\u8a00\u3002</p> <p></p>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/","title":"How to Setup CommonUI in UE5.4.2 \u7ed3\u5408\u589e\u5f3a\u8f93\u5165","text":"<p>\u76ee\u524d\u4e3a\u6b62\uff0ccommonUI\u7684\u6587\u6863\u975e\u5e38\u7b80\u964b\uff0c\u5e76\u672a\u660e\u786e\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u6b63\u786e\u914d\u7f6e\u3002\u6211\u82b1\u4e86\u597d\u957f\u65f6\u95f4\u624d\u641e\u660e\u767d\uff0c\u5728\u8fd9\u91cc\u628a\u4e3b\u8981\u8fc7\u7a0b\u8bb0\u5f55\u4e00\u4e0b\u3002</p>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#activate","title":"Activate \u7684\u6982\u5ff5","text":"<p>Activatable Widget\u662f Common UI \u7684\u91cd\u8981\u6982\u5ff5\u3002 \u8fd9\u91cc\u53ef\u4ee5\u7b80\u5355\u5730\u7406\u89e3\u4e3a\u6fc0\u6d3b\u4e86\u5c31\u4f1a\u663e\u793a\uff0cdeactivate\u5c31\u662f\u9690\u85cf\u3002\u8fd8\u6709\uff1a</p> <ul> <li>activate widget\u4e00\u65e6Activated,\u5c31\u4f1a\u63a5\u7ba1Input Action\uff0c\u7c7b\u4f3c UE4\u91cc\u624b\u52a8\u8c03\u7528<code>setInputMode</code>\uff0c\u5e76\u4e14\u8fd9\u662f\u51b2\u7a81\u7684\uff0c\u4e0d\u63a8\u8350\u5728CommonUI\u91cc\u4f7f\u7528\u65e7\u7684\u65b9\u5f0f\uff0c\u6211\u8bd5\u8fc7\u4f1a\uff0c\u8fd9\u5bfc\u81f4Mouse Capture \u51fa\u73b0\u5404\u79cd\u95ee\u9898\u3002</li> <li>\u63a5\u7ba1 inputAction\u662f\u4e00\u4e2a\u8d34\u5fc3\u7684\u8bbe\u8ba1\uff0c\u56e0\u4e3a\u5f88\u591a\u6e38\u620f\u4e00\u65e6\u663e\u793a\u83dc\u5355\uff0c\u5c31\u9700\u8981\u663e\u793a\u9f20\u6807\u3002\u6211\u4eec\u53ea\u9700\u8981\u91cd\u5199GetDesiredInputConfig\u5c31\u53ef\u4ee5\u51b3\u5b9a\u9f20\u6807\u548c\u63a7\u5236\u7684\u5404\u79cd\u884c\u4e3a\u3002</li> <li>\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u5728\u5e38\u9a7b\u7684HUD\u4e0a\u9762\u914d\u7f6e\u6e38\u620f\u7684\u9ed8\u8ba4InputAction\uff0c\u800c\u653e\u5f03\u4f7f\u7528UE4\u7684<code>setInputMode</code></li> </ul>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#stack","title":"stack\u7684\u6982\u5ff5","text":"<p>\u7c7b\u6bd4\u624b\u673aapp\uff0ccommonUI\u7684stack\u5c31\u662f\u754c\u9762\u4e00\u5c42\u5c42\u8fdb\u5165\u540e\u5806\u53e0\u8d77\u6765\u7684\u6548\u679c\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd4\u56de\u952e\u4e00\u5c42\u5c42\u5730\u56de\u9000\u3002</p> <ul> <li>\u53ef\u4ee5\u5728\u84dd\u56fe\u6216\u8005CPP\u521b\u5efa\u8fd9\u4e2aUCommonActivatableWidgetStack\uff0c\u5e76\u8bbe\u7f6e\u5bbd\u9ad8\u6cbe\u6ee1\u5c4f\u5e55</li> <li>\u6709\u4e86\u8fd9\u4e2astack\uff0cactivatable widget \u5c31\u53ef\u4ee5 Add\u5230\u8fd9\u91cc\u9762\u6765\u3002\u8fd0\u884c\u65f6\u4e00\u65e6add\u8fdb\u6765\u5c31\u4f1a\u7acb\u523b\u663e\u793a\uff0c\u7c7b\u4f3cAndroid\u7684startActivity</li> <li>\u53ef\u4ee5\u7528\u4e00\u4e2aRootLayout\u6765\u7ba1\u7406stak\uff0c\u4e00\u4e2aRootLayout\u53ef\u4ee5\u6709\u591a\u4e2astack\u3002Lyra\u9879\u76ee\u7684\u7528\u5230\u4e862\u4e2a: MenuStack\u548cGameStack</li> <li>Game Stack \u5c31\u662f\u6e38\u620f\u5e38\u9a7b\u7684HUD</li> <li>Menu Stack \u662f\u7ed9\u5404\u79cdMenuAdd\u8fdb\u6765\u7684Stack</li> <li>\u8981\u6ce8\u610f Stack\u4e4b\u95f4\u5806\u53e0\u7684\u987a\u5e8f\uff0cMenu\u6700\u597d\u5728Game\u7684\u4e0a\u9762\u3002</li> <li>Stack\u4e4b\u95f4\u6ca1\u6709\u6bd4\u8f83\u597d\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u6bd4\u5982\u5f53Menu Stack\u5df2\u7ecf\u6e05\u7a7a\u4e86\uff0c\u5c31\u662f\u6ca1\u6709\u4efb\u4f55Menu\u663e\u793a\u5728\u5c4f\u5e55\u7684\u65f6\u5019\uff0c\u6211\u60f3\u901a\u77e5\u4e00\u4e0bGameStack\u91cc\u9762\u7684Activated Widget\u505a\u51fa\u4e00\u4e9b\u53cd\u5e94\uff0c\u6bd4\u5982\u64ad\u653e\u8fd8\u539f\u52a8\u753b\uff0cCommonUI\u5e76\u6ca1\u6709\u63d0\u4f9b\u73b0\u6210\u65b9\u6cd5\u3002\u5982\u679c\u4f60\u77e5\u9053\uff0c\u8bf7\u52a1\u5fc5\u544a\u8bc9\u6211\u3002</li> <li>\u4ee3\u7801\u793a\u4f8b\uff0c\u53ef\u4ee5\u7528\u84dd\u56fe\u3002\u4f46\u6211\u89c9\u5f97C++\u66f4\u65b9\u4fbf\uff0c\u800c\u4e14\u6211\u505a\u4e86\u4e00\u4e9bhack\u64cd\u4f5c\uff0c\u901a\u77e5GameStack\u7684\u9ed8\u8ba4widget MenuStack\u5df2\u7ecf\u6e05\u7a7a\u4e86     YouHUD.cpp<pre><code>void YouHUD::InitHudWidgets(UAttributeSet* AS, UAbilitySystemComponent* ASC, APlayerState* PS, APlayerController* PC)\n{\n    checkf(OverlayWidgetClass, TEXT(\"please initial a OverlayWidgetClass\"));\n    checkf(OverLayWidgetControllerClass, TEXT(\"please initial a WidgetControllerClass\"));\n    checkf(MenuWidgetControllerClass, TEXT(\"please initial a MenuWidgetControllerClass\"));\n    UUserWidget* RootLayout = CreateWidget&lt;UUserWidget&gt;(GetWorld(), UCommonUserWidget::StaticClass());\n\n    UOverlay* OverLay = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UOverlay&gt;(UOverlay::StaticClass(), TEXT(\"Overlay\"));\n    // TSharedRef&lt;SOverlay&gt; RootLayout = SNew(SOverlay);\n    RootLayout-&gt;WidgetTree-&gt;RootWidget = OverLay;\n\n    GameLayerStack = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UCommonActivatableWidgetStack&gt;(UCommonActivatableWidgetStack::StaticClass(), TEXT(\"GameLayerStack\"));\n    MenuLayerStack = RootLayout-&gt;WidgetTree-&gt;ConstructWidget&lt;UCommonActivatableWidgetStack&gt;(UCommonActivatableWidgetStack::StaticClass(), TEXT(\"MenuLayerStack\"));\n\n\n    OverLay-&gt;AddChild(GameLayerStack);\n    OverLay-&gt;AddChild(MenuLayerStack);\n\n    // set horizontal alignment and vertical alignment\n    const auto GameBoxSlot = Cast&lt;UOverlaySlot&gt;(GameLayerStack-&gt;Slot);\n    GameBoxSlot-&gt;SetHorizontalAlignment(HAlign_Fill);\n    GameBoxSlot-&gt;SetVerticalAlignment(VAlign_Fill);\n\n    const auto MenuBoxSlot = Cast&lt;UOverlaySlot&gt;(MenuLayerStack-&gt;Slot);\n    MenuBoxSlot-&gt;SetHorizontalAlignment(HAlign_Fill);\n    MenuBoxSlot-&gt;SetVerticalAlignment(VAlign_Fill);\n\n    RootLayout-&gt;AddToViewport();\n\n    // set up overlay widget\n    OverlayWidget = CreateWidget&lt;UAuraActivatableWidget&gt;(GetWorld(), OverlayWidgetClass);\n    UAuraWidgetController* OverLayWidController = GetWidgetController&lt;UAuraOverlayWidgetController&gt;(FAuraWidgetControllerParma(AS, ASC, PS, PC));\n    OverlayWidget-&gt;SetWidgetController(OverLayWidController);\n    // OverlayWidget-&gt;AddToViewport();\n    GameLayerStack-&gt;AddWidgetInstance(*OverlayWidget);\n\n    MenuLayerStack-&gt;OnDisplayedWidgetChanged().AddLambda([this](UCommonActivatableWidget* DisplayedWidget)\n    {\n        if (DisplayedWidget == nullptr)\n        {\n            OverlayWidget-&gt;OnMenuEmpty();\n        }\n    });\n\n    // set up menu widget\n    OverLayWidController-&gt;BroadcastInitialValue();\n}\n</code></pre></li> </ul>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#_1","title":"\u4e00\u4e9b\u5148\u51b3\u6761\u4ef6","text":"<p>\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u4f1a\u5bfc\u81f4\u5931\u8d25</p> <ul> <li> <p>\u53c2\u8003\u5b98\u65b9\u6587\u6863 \u5f00\u542fcommonUI</p> </li> <li> <p>\u73a9\u5bb6\u63a7\u5236\u5668\uff1a\u786e\u4fdd\u201cblock input\u201d\u672a\u88ab\u9009\u4e2d\u3002 </p> </li> <li>\u521b\u5efa\u4e00\u4e2a\u4eceCommonActivatable Widget\u6d3e\u751f\u7684HUD\u6216Menu Widget\u3002</li> <li>\u786e\u4fdd\u60a8\u7684HUD\u6216Menu Widget\u5c06\u201cSupport Activation Focus\u201d\u8bbe\u7f6e\u4e3atrue\u3002 </li> <li>\u4e3aMenu Widget\u521b\u5efa\u7279\u5b9a\u7684UI\u8f93\u5165\u914d\u7f6e\u3002\u907f\u514d\u4f7f\u7528<code>\u8bbe\u7f6e\u8f93\u5165\u6a21\u5f0f\u4e3a\u6e38\u620f\u548cUI</code>\uff0c\u56e0\u4e3a\u8fd9\u5bf9CommonUI\u4e0d\u9002\u7528\uff01 </li> <li>\u5982\u679c\u60a8\u7684\u6e38\u620f\u662fTop Down \u7c7b\u578b\u7684\u6e38\u620f\uff0c\u5e76\u4e14\u5e0c\u671b\u4fdd\u7559\u9f20\u6807\u6355\u83b7\uff0c\u8bf7\u5728HUD widget\u4e2d\u5c06InputConfig\u7684\u9f20\u6807\u6355\u83b7\u6a21\u5f0f\u8bbe\u7f6e\u4e3a\u201c\u6c38\u4e45\u6355\u83b7\uff0c\u5305\u62ec\u521d\u59cb\u9f20\u6807\u6309\u4e0b\u201d\u3002\u5426\u5219\uff0c\u60a8\u7684\u6e38\u620f\u5c06\u9700\u8981\u53cc\u51fb\u624d\u80fd\u89e6\u53d1\u5355\u51fb\u9f20\u6807\u3002 </li> </ul>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#_2","title":"\u589e\u5f3a\u8f93\u5165\u548c\u6309\u94ae\u81ea\u52a8\u663e\u793a\u56fe\u6807","text":"<ul> <li>\u5728Game-&gt;CommonInputSetting\u4e2d\uff0c\u6dfb\u52a0\u60a8\u7684\u5e73\u53f0\u56fe\u6807\u6570\u636e\u3002\u5e76\u5c06\u201c\u542f\u7528\u589e\u5f3a\u8f93\u5165\u652f\u6301\u201d\u8bbe\u7f6e\u4e3atrue\u3002</li> </ul> <ul> <li> <p>\u521b\u5efa\u4e00\u4e2aCommonBaseButton\uff0c\u5728\u91cc\u9762\u653e\u7f6e\u4e00\u4e2aCommonActionWidget\uff0c\u5e76\u4e14\u91cd\u547d\u540d\u4e3aInputActionWidget\uff0c\u5fc5\u987b\u662f\u8fd9\u4e2a\u540d\u5b57\uff0c\u5426\u5219\u4e0d\u663e\u793a\u3002</p> </li> <li> <p>\u914d\u7f6eCommonBaseButton\u8f93\u5165\u64cd\u4f5c\uff0c\u7ed9\u4ed6\u8bbe\u7f6e\u4e00\u4e2aInputAction\u3002\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u6309\u952eE\uff0c\u6309\u94ae\u91cc\u7684CommonActionWidget\u5c31\u4f1a\u663e\u793a\u5bf9\u5e94\u7684\u56fe\u6807\u3002 </p> </li> <li> <p>\u4e0d\u7ed9\u4e0a\u9762\u7684CommonBaseButton\u6307\u5b9aInputAction\uff0c\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u5728\u5b83focus\u7684\u65f6\u5019\uff0c\u6839\u636e\u5e73\u53f0\u81ea\u52a8\u7ed9\u5b83\u8bbe\u7f6e\u76f8\u5173\u64cd\u4f5c\u7684\u56fe\u6807\u3002\u6bd4\u5982Xbox\u7684\u6309\u4e0b\u56fe\u6807\u901a\u5e38\u662fgamepad face button down, \u5c31\u4f1a\u663e\u793a\u4e00\u4e2aA\u56fe\u6807</p> </li> <li>\u8fd9\u4e2aA\u7684\u56fe\u6807\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6eCommonUIInputData\u6765\u6307\u5b9a   </li> <li>\u53ef\u4ee5\u628aForwardAction \u4eceA\u952e \u6539\u6210 X\u952e\u3002\u4f46\u8fd9\u53ea\u80fd\u4fee\u6539\u56fe\u6807\uff0c\u56e0\u4e3a\u5e73\u53f0\u7684\u4f20\u9012\u8fc7\u6765\u7684\u8fd8\u662fA\u952e\u7684InputAction\u3002\u8868\u73b0\u4e0a\u770b\u5c31\u662f\uff0c\u663e\u793a\u7684\u56fe\u6807\u662fX\uff0c\u4f46\u6309\u952e\u7ed1\u5b9a\u7684\u4f9d\u7136\u662fA\u3002\u6211\u53ea\u80fd\u628a\u5b83\u5f53\u4f5c\u4e00\u4e2abug\uff0c\u5982\u679c\u4f60\u77e5\u9053\u6b63\u786e\u505a\u6cd5\uff0c\u8bf7\u544a\u8bc9\u6211\u3002</li> </ul>"},{"location":"zh/UI/CommonUI/00How%20to%20setup%20CommonUI%20in%20UE5.4.2/#_3","title":"\u624b\u67c4\u5bfc\u822a\u914d\u7f6e","text":"<p>\u5f53\u4f7f\u7528\u624b\u67c4\u7684\u65f6\u5019\uff0c\u83dc\u5355\u5f39\u51fa\u6765\u540e\u9700\u8981\u7528\u624b\u67c4\u7684\u4e0a\u4e0b\u5de6\u53f3\u6765\u8fdb\u884c\u5bfc\u822a\uff0c\u8ba9\u73a9\u5bb6\u80fd\u591f\u9009\u62e9\u548c\u54ea\u4e2abutton\u8fdb\u884c\u64cd\u4f5c\u3002 \u53ea\u9700\u91cd\u5199<code>GetDesiredFocusTarget</code>\uff0c\u8ba9\u7cfb\u7edf\u77e5\u9053\u9ed8\u8ba4\u54ea\u4e2aCommon BaseButon\u9700\u8981focus\u5373\u53ef\u3002</p> <ul> <li>\u4ee5\u4e0a\u53ea\u9488\u5bf9\u624b\u67c4\u6709\u6548\uff0c\u952e\u76d8\u5bfc\u822a\u5f88\u9ebb\u70e6\uff0c\u731c\u6d4b\u662f\u56e0\u4e3a\u9f20\u6807\u7684\u5b58\u5728\u3002Lyra\u9879\u76ee\u662f\u7981\u7528\u952e\u76d8\u5bfc\u822a\u7684\u3002\u5982\u679c\u4f60\u77e5\u9053\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u8bf7\u544a\u8bc9\u6211\u3002:)  </li> </ul>"},{"location":"zh/UI/CommonUI/02CommonActionWidget/","title":"CommonActionWidget Usage","text":""},{"location":"zh/UI/CommonUI/02CommonActionWidget/#held-progress","title":"\u652f\u6301 held progress \u52a8\u753b","text":"<p>\u4e00\u76f4\u6ca1\u6210\u529f\uff0c\u4e00\u5c42\u5c42\u8c03\u8bd5\uff0c\u627e\u5230\u4e86\u539f\u56e0\u3002</p> <ul> <li>require held \u548c  UIHold Data\u914d\u7f6e\u6b63\u786e     </li> <li> <p>\u5fc5\u987b\u662f\u652f\u6301 hold \u7c7b\u578b\u7684trigger \u7684action \u624d\u652f\u6301 \u7ed1\u5b9a held</p> <p></p><pre><code>    bool UCommonActionWidget::IsHeldAction() const\n    {\n        if (EnhancedInputAction &amp;&amp; CommonUI::IsEnhancedInputSupportEnabled())\n        {\n            for (const TObjectPtr&lt;UInputTrigger&gt;&amp; Trigger : EnhancedInputAction-&gt;Triggers)\n            {\n                if (EnumHasAnyFlags(Trigger-&gt;GetSupportedTriggerEvents(), ETriggerEventsSupported::Ongoing))\n                {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n</code></pre> \u5426\u5219\uff0c\u7528\u6765\u653e\u52a8\u753b\u7684progress image \u4f1a\u88ab\u9690\u85cf <pre><code>        if (IsHeldAction())\n                    {\n                        MyProgressImage-&gt;SetVisibility(EVisibility::SelfHitTestInvisible);\n                    }\n                    else\n                    {\n                        MyProgressImage-&gt;SetVisibility(EVisibility::Collapsed);\n                    }\n</code></pre> \u6240\u4ee5\uff0c\u6253\u5f00 \u5bf9\u5e94\u7684InputAction, \u589e\u52a0\u5bf9Hold\u7684\u652f\u6301\uff1a  </li> </ul>"},{"location":"zh/UI/CommonUI/05ActionBar%20Support%20%27Hold%27/","title":"CommonActionWidget ActionBar Support 'Hold'","text":"<p>\u540c\u6837\u7684\u95ee\u9898\uff0cEnhanced Input \u9ed8\u8ba4\u60c5\u51b5\uff0c\u4e0d\u652f\u6301ActionBar \u91cc\u7684 BoundButton \u901a\u8fc7 Enhanced Trigger \u7684 Hold \u6765\u89e6\u53d1\u3002</p> <p>\u4e8e\u662f\u6211\u5b9e\u73b0\u4e86\u4e00\u4e2a\u63a7\u4ef6\uff0c\u652f\u6301\u5728\u84dd\u56fe \u52a8\u6001\u7ed9 ActionBar \u6dfb\u52a0 Button\uff0c\u5e76\u4e14 \u652f\u6301 \u9009\u62e9\u662f\u5426\u9700\u8981Hold\u3002</p> <p></p>"},{"location":"zh/UI/CommonUI/05ActionBar%20Support%20%27Hold%27/#_1","title":"\u84dd\u56fe\u914d\u7f6e","text":"<ul> <li> <p>\u652f\u6301\u4e00\u4e2a\u9ed8\u8ba4\u52a8\u4f5c\uff1a     </p> </li> <li> <p>\u652f\u6301\u52a8\u6001\u6dfb\u52a0\u52a8\u4f5c\uff1a     </p> </li> </ul>"},{"location":"zh/UI/CommonUI/05ActionBar%20Support%20%27Hold%27/#_2","title":"\u4ee3\u7801","text":"UAuraActivatableWidget.h<pre><code>USTRUCT(BlueprintType)\nstruct FHoldSupportAction\n{\n    GENERATED_BODY()\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = \"Input\")\n    TObjectPtr&lt;UInputAction&gt; EnhancedInputAction;\n\n    UPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = \"Input\")\n    bool bHoldEnabled = false;\n};\n\n/**\n * \n */\nUCLASS()\nclass AURA_API UAuraActivatableWidget : public UCommonActivatableWidget\n{\n    GENERATED_BODY()\n\npublic:\n    UFUNCTION(BlueprintCallable)\n    virtual void SetWidgetController(UObject* InWidgetController);\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void HandleDefaultActionPress();\n\n    UFUNCTION(BlueprintCallable, Category = \"Aura|UI\")\n    void RegisterEnhancedActionToActionBar(const FHoldSupportAction&amp; HoldSupportAction, const FSupportEventDelegate&amp; HoldEventDelegate);\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void OnMenuEmpty();\n\nprotected:\n    virtual void NativeOnInitialized() override;\n\n    UFUNCTION(BlueprintImplementableEvent, Category = \"Aura|UI\")\n    void DefaultHoldComplete();\n\n    void AddHoldBinding(const FUIActionBindingHandle&amp; ActionBindingHandle, UInputAction* BEnhancedInputAction, const FSupportEventDelegate&amp; HoldEventDelegate);\n\n    UPROPERTY(BlueprintReadOnly)\n    TObjectPtr&lt;UObject&gt; AuraWidgetController;\n\n\n    UFUNCTION(BlueprintImplementableEvent)\n    void OnWidgetControllerSet();\n\n    UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (EditCondition = \"CommonInput.CommonInputSettings.IsEnhancedInputSupportEnabled\", EditConditionHides))\n    FHoldSupportAction DefaultEnhancedInputAction;\n\n\n\nprivate:\n\n    FUIActionBindingHandle DefaultActionHandle;\n\n\n\n};\n</code></pre> UAuraActivatableWidget.cpp<pre><code>void UAuraActivatableWidget::SetWidgetController(UObject* InWidgetController)\n{\n    if (InWidgetController)\n    {\n        AuraWidgetController = InWidgetController;\n        OnWidgetControllerSet();\n        UWidgetLibraryHelp::SetWidgetController(InWidgetController, WidgetTree);\n    }\n}\n\n\nvoid UAuraActivatableWidget::AddHoldBinding(const FUIActionBindingHandle&amp; ActionBindingHandle, UInputAction* BEnhancedInputAction, const FSupportEventDelegate&amp; HoldEventDelegate)\n{\n    if (!GetOwningLocalPlayer()) return;\n    if (!BEnhancedInputAction) return;\n    const TSharedPtr&lt;FUIActionBinding&gt; ActionBinding = FUIActionBinding::FindBinding(ActionBindingHandle);\n    if (!ActionBinding.IsValid()) return;\n\n    ActionBinding-&gt;OnHoldActionProgressed.AddLambda([HoldEventDelegate](const float HoldProgress)\n    {\n        if (HoldProgress &gt;= 1.0f)\n        {\n            HoldEventDelegate.ExecuteIfBound();\n        }\n    });\n\n    if (const UEnhancedInputLocalPlayerSubsystem* InputSystem = GetOwningLocalPlayer()-&gt;GetSubsystem&lt;UEnhancedInputLocalPlayerSubsystem&gt;())\n    {\n        for (const FEnhancedActionKeyMapping&amp; Mapping : InputSystem-&gt;GetAllPlayerMappableActionKeyMappings())\n        {\n            if (Mapping.Action == BEnhancedInputAction)\n            {\n                UInputTriggerHold* Trigger = nullptr;\n                Mapping.Action-&gt;Triggers.FindItemByClass(&amp;Trigger);\n                if (Trigger)\n                {\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, Trigger-&gt;HoldTimeThreshold, Trigger-&gt;HoldTimeThreshold);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n                else\n                {\n                    FUIActionKeyMapping KeyMapping(Mapping.Key, 0.75f, 0.75f);\n                    ActionBinding-&gt;HoldMappings.Add(KeyMapping);\n                }\n            }\n        }\n    }\n}\n\n\n\n\nvoid UAuraActivatableWidget::RegisterEnhancedActionToActionBar(const FHoldSupportAction&amp; HoldSupportAction, const FSupportEventDelegate&amp; HoldEventDelegate)\n{\n    const FUIActionBindingHandle ActionBindingHandle = RegisterUIActionBinding(FBindUIActionArgs(HoldSupportAction.EnhancedInputAction, true,\n                                                                                                 FSimpleDelegate::CreateLambda([HoldSupportAction,HoldEventDelegate]()\n                                                                                                 {\n                                                                                                     if (!HoldSupportAction.bHoldEnabled)\n                                                                                                     {\n                                                                                                         HoldEventDelegate.ExecuteIfBound();\n                                                                                                     }\n                                                                                                 })));\n    if (HoldSupportAction.bHoldEnabled)\n    {\n        AddHoldBinding(ActionBindingHandle, HoldSupportAction.EnhancedInputAction, HoldEventDelegate);\n    }\n}\n</code></pre>"}]}