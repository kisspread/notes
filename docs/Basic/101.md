title: 101 notes
comments:false

101 笔记


# 第 10 章（Surface Shading）

https://sites.cs.ucsb.edu/~lingqi/teaching/resources/GAMES101_Lecture_07.pdf

### Z-buffer:
![alt text](../assets/images/zbuffer-image.png)
- Z-buffer 的思想来源于画家算法，用于处理不透明物体的遮挡问题
- Z-buffer 记录的是像素的深度，更近的会覆盖更远的，不存在排序，所以复杂度是 O(n)，本质只是记录最小（近）值
- Z-buffer 和绘制顺序无关


### Shading:

- Blinn-Phong Reflectance Model = Specular highlight（镜面高光）+ Diffuse reflection（漫反射）+ Ambient light（环境光）

- Shading 是模型自身的，是local的，不考虑影子这些不属于自身的！(shading ≠ shadow) 

- Lambertian Cosine Law 
  ![alt text](../assets/images/101_image.png)
- Lambertian reflection 模型认为漫反射和视角方向无关
  ![alt text](../assets/images/101_image-2.png)
- max(0,n·l) 是为了忽略负数
- I/r^2 能量守恒，辐射半径越远，球的表面积越大，根据面积公式可推理
  ![alt text](../assets/images/101_image-3.png)

- Blinn-Phong 模型中的高光计算源于Lambertian的模型。
- 高光使用半程向量计算，是为了简化计算量，是很聪明的方式
  ![alt text](../assets/images/101_image-4.png)
- 指数部分用于控制高光的锐利程度，通常取值范围在1-100之间，指数越高，即使较小的角度变化，过渡也越迅速
  ![alt text](../assets/images/101_image-5.png)

- Blinn-Phong Reflectance Model 结合了 Lambertian 模型，集大成者（h与视角有关）
  ![alt text](../assets/images/101_image-6.png)  

- Shading 可以发生在 Vertex Shader（顶点着色器）和 Fragment Shader（片段着色器）:
  ![alt text](../assets/images/101_image-7.png) 

## Shading Frequencies：

- Flat Shading 是最简单的，在 Vertex Shader 中完成，模型的面数越多，整体效果越精细
- Gouraud Shading 在 Flat Shading 的基础上增加了顶点插值，需要在 Fragment Shader 中进行插值计算，让过渡更平滑
- Phong Shading 在 Fragment Shader 中完成主要计算，由于是像素级，计算量较大

### **1. Flat Shading**
Flat Shading（平面着色）是一种最简单的着色方法，给每个多边形（通常是三角形）分配一个统一的颜色。
#### **特点：**
- **光照计算位置**：在每个多边形的一个点（通常是顶点或质心）进行光照计算。
- **插值方式**：不进行插值，整个多边形用相同的颜色。
- **效果**：
  - 每个多边形表现为一个独立的平面，边界明显，具有“低多边形”风格。
  - 表面看起来不够光滑，但计算速度快，适用于性能要求高的场景（如低分辨率的实时渲染）。
  
#### **优缺点：**
- **优点**：简单，计算量小，适合低细节的模型。
- **缺点**：效果生硬，难以表现曲面细节和平滑光照。

---

### **2. Gouraud Shading**
Gouraud Shading（高洛德着色）是一种改进的着色方法，通过插值光照值来实现更平滑的效果。
#### **特点：**
- **光照计算位置**：在多边形的顶点处计算光照。
- **插值方式**：将顶点计算出的光照值（颜色）线性插值到整个多边形。
- **效果**：
  - 光滑过渡，避免了 Flat Shading 中的“硬边”效果。
  - 表现复杂曲面时有一定的能力，但高光区域可能会丢失细节（例如，可能高光只出现在顶点，而不会平滑扩展到中间区域）。

#### **优缺点：**
- **优点**：计算量适中，效果平滑，适合大多数实时渲染。
- **缺点**：无法很好表现高光等复杂光照细节。

---

### **3. Phong Shading**
Phong Shading（冯氏着色）是一种更高级的着色方法，通过插值法线向量来计算像素级光照。
#### **特点：**
- **光照计算位置**：在每个像素（片段）计算光照。
- **插值方式**：先对顶点法线进行插值，再用插值后的法线计算每个像素的光照。
- **效果**：
  - 表面表现极为光滑，可以清晰地表现高光、阴影和其他复杂光照效果。
  - 是基于像素的光照计算方法，比 Gouraud Shading 更精确。

#### **优缺点：**
- **优点**：效果逼真，能精确表现高光、阴影和表面细节。
- **缺点**：计算量大，尤其在像素密度高的场景中。

---

### **对比总结**

| 特性                 | **Flat Shading**         | **Gouraud Shading**       | **Phong Shading**         |
|----------------------|--------------------------|---------------------------|---------------------------|
| **光照计算位置**     | 多边形的一个点          | 顶点                      | 每个像素                  |
| **插值方式**         | 无插值                  | 顶点颜色插值              | 法线插值                  |
| **效果**             | 表面分块，硬边明显      | 表面平滑，但高光可能缺失  | 表面极度平滑，光照逼真    |
| **计算量**           | 最低                    | 中等                      | 最高                      |
| **适用场景**         | 简单模型或性能优先      | 实时渲染，适用大多数场景  | 高质量图形渲染            |

---

### **应用场景**
- **Flat Shading**：适合低多边形风格、低端硬件或实时渲染需要时。
- **Gouraud Shading**：适合实时图形、游戏引擎的中低预算场景。
- **Phong Shading**：适合高品质渲染（如电影特效、静态场景渲染）或现代高性能 GPU 支持的场景。

 